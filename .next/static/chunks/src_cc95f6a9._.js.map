{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement, // Changed to HTMLParagraphElement for semantic correctness if it's a heading paragraph\n  React.HTMLAttributes<HTMLHeadingElement> // Kept HTMLHeadingElement for attribute compatibility, adjust if needed\n>(({ className, ...props }, ref) => (\n  <h3 // Changed from div to h3 for semantic meaning, adjust level (h2, h4, etc.) as appropriate\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight text-foreground\", // Changed from text-xl to text-lg and explicitly set text-foreground\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p // Changed from div to p for semantic correctness\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,KAAG,0FAA0F;;QAC5F,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qEACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,IAAE,iDAAiD;;QAClD,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        // Removed extra small size variant as it's not used\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,oDAAoD;YACpD,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\", // Changed text-base md:text-sm to just text-sm\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qXACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,6KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,6KAAA,CAAA,SAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC,6KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,6KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,6KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA;AACA;AAEA;AACA;AANA;;;;;;AAQA,MAAM,cAAc,8KAAA,CAAA,OAAyB;AAE7C,MAAM,qBAAqB,8KAAA,CAAA,UAA4B;AAEvD,MAAM,oBAAoB,8KAAA,CAAA,SAA2B;AAErD,MAAM,mCAAqB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAA,CAAA,UAA4B;QAC3B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,8KAAA,CAAA,UAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,8KAAA,CAAA,UAA4B;gBAC3B,KAAK;gBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,8KAAA,CAAA,UAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAA,CAAA,QAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,8KAAA,CAAA,QAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG5C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAA,CAAA,cAAgC;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,8KAAA,CAAA,cAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAA,CAAA,SAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,KAAK;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,8KAAA,CAAA,SAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAA,CAAA,SAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,8KAAA,CAAA,SAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 699, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dialog.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger // Export DialogTrigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close // Export DialogClose\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose, // Export DialogClose\n  DialogTrigger, // Export DialogTrigger\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,qKAAA,CAAA,OAAoB;AAEnC,MAAM,gBAAgB,sKAAwB,uBAAuB;AAA/C,CAAA,UAAuB;AAE7C,MAAM,eAAe,qKAAA,CAAA,SAAsB;AAE3C,MAAM,cAAc,sKAAsB,qBAAqB;AAA3C,CAAA,QAAqB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,qKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,qKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,qKAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,+LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,qKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,qKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 852, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,sKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,sKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC,sKAAA,CAAA,SAAuB;kBACtB,cAAA,6LAAC,sKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,sKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 900, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/calendar.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker, type DateFormatter, type DayModifiers, type Matcher } from \"react-day-picker\" // Added DayModifiers, Matcher\nimport type { Locale } from 'date-fns'; // Import Locale type\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\n// --- Added modifier props ---\nexport type CalendarProps = React.ComponentProps<typeof DayPicker> & {\n    locale?: Locale; // Add locale prop\n    modifiers?: DayModifiers; // Allow passing custom modifiers\n    modifiersClassNames?: Record<string, string>; // Allow passing class names for modifiers\n}\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  locale, // Destructure locale\n  modifiers, // Destructure modifiers\n  modifiersClassNames, // Destructure modifier class names\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      locale={locale} // Pass locale to DayPicker\n      modifiers={modifiers} // Pass modifiers\n      modifiersClassNames={{\n          // Adjusted holiday style: use primary text color, medium font weight, and primary border\n          holiday: 'text-primary font-medium border border-primary',\n          ...modifiersClassNames // Merge with any passed modifier classes\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n"],"names":[],"mappings":";;;;AAIA;AAAA;AACA,wRAAkG,8BAA8B;AAGhI;AACA;AARA;;;;;;AAiBA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,MAAM,EACN,SAAS,EACT,mBAAmB,EACnB,GAAG,OACW;IACd,qBACE,6LAAC,iKAAA,CAAA,YAAS;QACR,iBAAiB;QACjB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,KAAK;YACL,YAAY,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACX,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACJ,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBAChC,6LAAC,uNAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;YAE7D,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBACjC,6LAAC,yNAAA,CAAA,eAAY;oBAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;QAEhE;QACA,QAAQ;QACR,WAAW;QACX,qBAAqB;YACjB,yFAAyF;YACzF,SAAS;YACT,GAAG,oBAAoB,yCAAyC;QACpE;QACC,GAAG,KAAK;;;;;;AAGf;KAjES;AAkET,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 993, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', // Removed text-base and md:text-sm for consistency\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1028, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1256, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/LocationSelector.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport type { Location } from '@/types/schedule'; // Assuming type exists\n\ninterface LocationSelectorProps {\n  locations: Location[];\n  selectedLocationId?: string;\n  onLocationChange: (locationId: string) => void;\n}\n\nexport const LocationSelector: React.FC<LocationSelectorProps> = ({\n  locations,\n  selectedLocationId,\n  onLocationChange,\n}) => {\n  return (\n    <Select value={selectedLocationId} onValueChange={onLocationChange}>\n      <SelectTrigger id=\"location-select\">\n        <SelectValue placeholder=\"Selecciona una sede\" />\n      </SelectTrigger>\n      <SelectContent>\n        {locations.map((location) => (\n          <SelectItem key={location.id} value={location.id}>\n            {location.name}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n};\n\n    "],"names":[],"mappings":";;;;AAEA;;;AASO,MAAM,mBAAoD,CAAC,EAChE,SAAS,EACT,kBAAkB,EAClB,gBAAgB,EACjB;IACC,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,OAAO;QAAoB,eAAe;;0BAChD,6LAAC,qIAAA,CAAA,gBAAa;gBAAC,IAAG;0BAChB,cAAA,6LAAC,qIAAA,CAAA,cAAW;oBAAC,aAAY;;;;;;;;;;;0BAE3B,6LAAC,qIAAA,CAAA,gBAAa;0BACX,UAAU,GAAG,CAAC,CAAC,yBACd,6LAAC,qIAAA,CAAA,aAAU;wBAAmB,OAAO,SAAS,EAAE;kCAC7C,SAAS,IAAI;uBADC,SAAS,EAAE;;;;;;;;;;;;;;;;AAOtC;KAnBa","debugId":null}},
    {"offset": {"line": 1315, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/DraggableEmployee.tsx"],"sourcesContent":["\n'use client'; // Add this directive\n\nimport React, { useState, useEffect } from 'react'; // Import useState and useEffect\nimport { useDraggable } from '@dnd-kit/core';\nimport { CSS } from '@dnd-kit/utilities';\nimport { Button } from '@/components/ui/button';\nimport { GripVertical } from 'lucide-react';\nimport type { Employee } from '@/types/schedule'; // Assuming type exists\nimport { cn } from '@/lib/utils'; // Import cn\n\ninterface DraggableEmployeeProps {\n  employee: Employee;\n}\n\nexport const DraggableEmployee: React.FC<DraggableEmployeeProps> = ({ employee }) => {\n  const [isClient, setIsClient] = useState(false); // State to track client-side rendering\n\n  useEffect(() => {\n    setIsClient(true); // Set to true only on the client after initial render\n  }, []);\n\n  const { attributes, listeners, setNodeRef, transform, isDragging } = useDraggable({\n    id: employee.id, // Use employee ID as the draggable ID\n    data: { type: 'employee', employee }, // Pass employee data\n  });\n\n  const style = {\n    transform: CSS.Translate.toString(transform),\n    opacity: isDragging ? 0.5 : 1,\n    zIndex: isDragging ? 100 : 'auto', // Ensure dragged item is on top\n    cursor: isDragging ? 'grabbing' : 'grab',\n  };\n\n  // Render only on the client side to avoid hydration mismatch\n  if (!isClient) {\n    // Optionally render a placeholder or null during SSR and initial hydration\n    return (\n      <Button\n        variant=\"outline\"\n        className=\"w-full flex items-center justify-between p-2 bg-card hover:bg-muted/50 opacity-50 cursor-wait\" // Indicate loading/placeholder state\n        disabled\n      >\n        <span className=\"truncate\">{employee.name}</span> {/* Add truncate here */}\n        <GripVertical className=\"h-4 w-4 text-muted-foreground\" />\n      </Button>\n    );\n  }\n\n  return (\n    <Button\n      ref={setNodeRef}\n      style={style}\n      variant=\"outline\"\n      className=\"w-full flex items-center justify-between p-2 bg-card hover:bg-muted/50\"\n      {...listeners}\n      {...attributes}\n    >\n      <span className=\"truncate\">{employee.name}</span> {/* Add truncate here */}\n      <GripVertical className=\"h-4 w-4 text-muted-foreground\" />\n    </Button>\n  );\n};\n"],"names":[],"mappings":";;;;AAGA,mRAAoD,gCAAgC;AACpF;AACA;AACA;AACA;;;AANA,cAAc,qBAAqB;;;;;;AAc5B,MAAM,oBAAsD,CAAC,EAAE,QAAQ,EAAE;;IAC9E,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,uCAAuC;IAExF,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;uCAAE;YACR,YAAY,OAAO,sDAAsD;QAC3E;sCAAG,EAAE;IAEL,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,8JAAA,CAAA,eAAY,AAAD,EAAE;QAChF,IAAI,SAAS,EAAE;QACf,MAAM;YAAE,MAAM;YAAY;QAAS;IACrC;IAEA,MAAM,QAAQ;QACZ,WAAW,wKAAA,CAAA,MAAG,CAAC,SAAS,CAAC,QAAQ,CAAC;QAClC,SAAS,aAAa,MAAM;QAC5B,QAAQ,aAAa,MAAM;QAC3B,QAAQ,aAAa,aAAa;IACpC;IAEA,6DAA6D;IAC7D,IAAI,CAAC,UAAU;QACb,2EAA2E;QAC3E,qBACE,6LAAC,qIAAA,CAAA,SAAM;YACL,SAAQ;YACR,WAAU,gGAAgG,qCAAqC;;YAC/I,QAAQ;;8BAER,6LAAC;oBAAK,WAAU;8BAAY,SAAS,IAAI;;;;;;gBAAQ;8BACjD,6LAAC,yNAAA,CAAA,eAAY;oBAAC,WAAU;;;;;;;;;;;;IAG9B;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QACL,KAAK;QACL,OAAO;QACP,SAAQ;QACR,WAAU;QACT,GAAG,SAAS;QACZ,GAAG,UAAU;;0BAEd,6LAAC;gBAAK,WAAU;0BAAY,SAAS,IAAI;;;;;;YAAQ;0BACjD,6LAAC,yNAAA,CAAA,eAAY;gBAAC,WAAU;;;;;;;;;;;;AAG9B;GA/Ca;;QAO0D,8JAAA,CAAA,eAAY;;;KAPtE","debugId":null}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n"],"names":[],"mappings":";;;AAAA;;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAc,AAAD,EAAuB;IAEpE,CAAA,GAAA,6JAAA,CAAA,YAAe,AAAD;iCAAE;YACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;YACvE,MAAM;kDAAW;oBACf,YAAY,OAAO,UAAU,GAAG;gBAClC;;YACA,IAAI,gBAAgB,CAAC,UAAU;YAC/B,YAAY,OAAO,UAAU,GAAG;YAChC;yCAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;;QACjD;gCAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX;GAdgB","debugId":null}},
    {"offset": {"line": 1470, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/EmployeeList.tsx"],"sourcesContent":["\n'use client'; // Add this directive\n\nimport React, { useState, useEffect } from 'react'; // Import useState and useEffect\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\nimport { DraggableEmployee } from './DraggableEmployee';\nimport type { Employee } from '@/types/schedule';\nimport { Users } from 'lucide-react';\nimport { useIsMobile } from '@/hooks/use-mobile'; // Import the hook\n\ninterface EmployeeListProps {\n  employees: Employee[];\n}\n\nexport const EmployeeList: React.FC<EmployeeListProps> = ({ employees }) => {\n  const [isClient, setIsClient] = useState(false);\n  const isMobile = useIsMobile(); // Use the hook\n\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  // Calculate count only on client\n  const employeeCount = isClient ? employees.length : 0;\n\n  // Do not render this component on mobile\n  if (isMobile) {\n    return null;\n  }\n\n  return (\n    <Card className=\"h-full\"> {/* Allow card to take full height */}\n      <CardHeader>\n         <CardTitle className=\"text-lg font-medium flex items-center gap-2 truncate\"> {/* Add truncate here */}\n             <Users className=\"h-5 w-5 text-muted-foreground flex-shrink-0\" /> {/* Prevent icon shrink */}\n             Colaboradores Disponibles ({employeeCount}) {/* Use client-side count */}\n         </CardTitle>\n      </CardHeader>\n       <CardContent className=\"space-y-3 overflow-y-auto max-h-[calc(100vh-200px)]\"> {/* Make content scrollable */}\n        {isClient ? ( // Only render the list on the client\n          employees.length > 0 ? (\n            employees.map((employee) => (\n              <DraggableEmployee key={employee.id} employee={employee} />\n            ))\n          ) : (\n            <p className=\"text-sm text-muted-foreground text-center pt-4 italic\">\n              No hay colaboradores para esta sede o ya estn asignados.\n            </p>\n          )\n        ) : (\n          // Optionally show a loading state or placeholder during SSR/initial hydration\n          <p className=\"text-sm text-muted-foreground text-center pt-4 italic\">\n            Cargando colaboradores...\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n"],"names":[],"mappings":";;;;AAGA,mRAAoD,gCAAgC;AACpF;AACA;AAEA;AACA,iOAAkD,kBAAkB;;;AAPpE,cAAc,qBAAqB;;;;;;AAa5B,MAAM,eAA4C,CAAC,EAAE,SAAS,EAAE;;IACrE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,WAAW,CAAA,GAAA,iIAAA,CAAA,cAAW,AAAD,KAAK,eAAe;IAE/C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,YAAY;QACd;iCAAG,EAAE;IAEL,iCAAiC;IACjC,MAAM,gBAAgB,WAAW,UAAU,MAAM,GAAG;IAEpD,yCAAyC;IACzC,IAAI,UAAU;QACZ,OAAO;IACT;IAEA,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;YAAS;0BACvB,6LAAC,mIAAA,CAAA,aAAU;0BACR,cAAA,6LAAC,mIAAA,CAAA,YAAS;oBAAC,WAAU;;wBAAuD;sCACxE,6LAAC,uMAAA,CAAA,QAAK;4BAAC,WAAU;;;;;;wBAAgD;wBAA4B;wBACjE;wBAAc;;;;;;;;;;;;0BAGhD,6LAAC,mIAAA,CAAA,cAAW;gBAAC,WAAU;;oBAAsD;oBAC3E,WACC,UAAU,MAAM,GAAG,IACjB,UAAU,GAAG,CAAC,CAAC,yBACb,6LAAC,sJAAA,CAAA,oBAAiB;4BAAmB,UAAU;2BAAvB,SAAS,EAAE;;;;kDAGrC,6LAAC;wBAAE,WAAU;kCAAwD;;;;;+BAKvE,8EAA8E;kCAC9E,6LAAC;wBAAE,WAAU;kCAAwD;;;;;;;;;;;;;;;;;;AAO/E;GA5Ca;;QAEM,iIAAA,CAAA,cAAW;;;KAFjB","debugId":null}},
    {"offset": {"line": 1589, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/time-utils.ts"],"sourcesContent":["// src/lib/time-utils.ts\n\nimport { format as formatFns, parse as parseFns } from 'date-fns';\nimport { es } from 'date-fns/locale'; // Import Spanish locale if needed for 'am/pm'\n\n/**\n * Formats a time string (HH:mm) into 12-hour format (h:mm a).\n * Handles invalid input gracefully.\n *\n * @param timeString - The time string in \"HH:mm\" format.\n * @returns The formatted time string (e.g., \"8:00 AM\") or the original string if invalid.\n */\nexport function formatTo12Hour(timeString: string | undefined): string {\n  if (!timeString || !/^\\d{2}:\\d{2}$/.test(timeString)) {\n    return timeString || ''; // Return original or empty string if invalid/undefined\n  }\n\n  try {\n    // Create a dummy date object with the time to use date-fns formatting\n    const dummyDate = parseFns(timeString, 'HH:mm', new Date());\n    // Format using 'h:mm a' for 12-hour format with AM/PM\n    // Use locale 'es' if you want 'a. m.'/'p. m.' instead of AM/PM\n    return formatFns(dummyDate, 'h:mm a', { locale: es });\n  } catch (error) {\n    console.error(`Error formatting time string \"${timeString}\":`, error);\n    return timeString; // Return original string on error\n  }\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;AAExB;AAAA;AACA,0PAAsC,8CAA8C;;;AAS7E,SAAS,eAAe,UAA8B;IAC3D,IAAI,CAAC,cAAc,CAAC,gBAAgB,IAAI,CAAC,aAAa;QACpD,OAAO,cAAc,IAAI,uDAAuD;IAClF;IAEA,IAAI;QACF,sEAAsE;QACtE,MAAM,YAAY,CAAA,GAAA,wJAAA,CAAA,QAAQ,AAAD,EAAE,YAAY,SAAS,IAAI;QACpD,sDAAsD;QACtD,+DAA+D;QAC/D,OAAO,CAAA,GAAA,yJAAA,CAAA,SAAS,AAAD,EAAE,WAAW,UAAU;YAAE,QAAQ,+IAAA,CAAA,KAAE;QAAC;IACrD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,8BAA8B,EAAE,WAAW,EAAE,CAAC,EAAE;QAC/D,OAAO,YAAY,kCAAkC;IACvD;AACF","debugId":null}},
    {"offset": {"line": 1624, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/ShiftCard.tsx"],"sourcesContent":["import React from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Trash2, Clock, Coffee } from 'lucide-react'; // Added Coffee icon for break\nimport type { ShiftAssignment } from '@/types/schedule'; // Assuming type exists\nimport { cn } from '@/lib/utils'; // Import cn\nimport { formatTo12Hour } from '@/lib/time-utils'; // Import the formatting helper\n\ninterface ShiftCardProps {\n  assignment: ShiftAssignment;\n  onRemove: (event: React.MouseEvent<HTMLButtonElement>) => void; // Pass event to stop propagation\n  isCompact?: boolean; // Optional flag for compact view\n  onClick?: () => void; // Optional click handler for the card\n}\n\nexport const ShiftCard: React.FC<ShiftCardProps> = ({ assignment, onRemove, isCompact = false, onClick }) => {\n  // Add useSortable hook here if making items within a column sortable\n  // const { attributes, listeners, setNodeRef, transform, transition } = useSortable({ id: assignment.id });\n  // const style = { transform: CSS.Transform.toString(transform), transition };\n\n  const handleRemoveClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation(); // Prevent triggering the card's onClick\n    onRemove(event);\n  };\n\n\n  return (\n     <Card\n        // ref={setNodeRef} // For sortable\n        // style={style} // For sortable\n        className={cn(\n            \"group bg-background border shadow-sm transition-colors duration-150 relative\", // Add 'group' class, transition, and relative positioning\n            isCompact ? \"border-none shadow-none bg-transparent p-0 hover:bg-accent/50 cursor-pointer\" : \"hover:border-primary\", // Remove borders/padding if compact, add hover background and cursor\n            onClick && \"cursor-pointer\" // Add cursor pointer if onClick is provided\n        )}\n        // {...attributes} // For sortable\n        // {...listeners} // For sortable - Be careful with listeners vs onClick\n        onClick={onClick} // Add onClick handler to the card\n     >\n       <CardContent className={cn(\n           \"flex items-start justify-between\", // Changed items-center to items-start\n           isCompact ? \"p-0.5\" : \"p-3\" // Smaller padding if compact\n       )}>\n         {/* Content Wrapper */}\n         <div className=\"flex-grow min-w-0 overflow-hidden mr-1 pr-4\"> {/* Add padding-right to prevent overlap with absolute button */}\n             <p className={cn(\n                 \"font-medium truncate\",\n                 isCompact ? \"text-xs\" : \"text-sm\" // Increased compact font size back to xs\n             )} title={assignment.employee.name}>{assignment.employee.name}</p>\n             <div className={cn( // Wrap times in a div for better spacing control\n                 \"text-muted-foreground flex flex-wrap items-center\", // Use flex-wrap and items-center\n                 isCompact ? \"text-[11px] gap-x-1 gap-y-0\" : \"text-xs gap-x-1.5 gap-y-0.5\" // Increased compact font size from 10px, allow wrapping\n             )}>\n                 {/* Shift Time */}\n                 <span className=\"flex items-center gap-0.5\">\n                     <Clock className={cn(\"flex-shrink-0\", isCompact ? \"h-2.5 w-2.5\" : \"h-3 w-3\")} /> {/* Slightly larger icon, prevent shrink */}\n                     {/* Format times using the helper */}\n                     <span className=\"whitespace-nowrap\">{formatTo12Hour(assignment.startTime)}-{formatTo12Hour(assignment.endTime)}</span> {/* Prevent time wrap */}\n                 </span>\n                 {/* Break Time - Show icon and text if included */}\n                 {assignment.includeBreak && assignment.breakStartTime && assignment.breakEndTime && (\n                    <span className={cn(\n                        \"flex items-center gap-0.5\",\n                        isCompact && \"text-blue-600 dark:text-blue-400\" // Optional: different color for break icon in compact\n                        )} title={`Descanso: ${formatTo12Hour(assignment.breakStartTime)}-${formatTo12Hour(assignment.breakEndTime)}`}>\n                        <Coffee className={cn(\"flex-shrink-0\", isCompact ? \"h-2.5 w-2.5\" : \"h-3 w-3\")} /> {/* Break icon */}\n                        {/* Show break times in compact view as well */}\n                        {/* Format break times using the helper */}\n                        <span className=\"whitespace-nowrap\">D: {formatTo12Hour(assignment.breakStartTime)}-{formatTo12Hour(assignment.breakEndTime)}</span>\n                    </span>\n                 )}\n             </div>\n         </div>\n          {/* Delete Button - Positioned absolute top-right */}\n         <Button\n             variant=\"ghost\"\n             size=\"icon\"\n             className={cn(\n                 \"absolute top-1 right-1\", // Position top-right\n                 \"text-destructive flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive/10\", // Hide by default, show on group hover, add transition, add red hover\n                 isCompact ? \"h-4 w-4\" : \"h-7 w-7\", // Smaller button if compact\n                 // Keep the button hidden on mobile/tablet for compact view unless hovering\n                 isCompact && \"group-hover:opacity-100 md:opacity-0\"\n             )}\n             onClick={handleRemoveClick} // Use the new handler\n             title=\"Eliminar turno\" // Add title for accessibility\n          >\n           <Trash2 className={cn(isCompact ? \"h-2.5 w-2.5\" : \"h-4 w-4\")} /> {/* Smaller icon if compact */}\n         </Button>\n       </CardContent>\n     </Card>\n  );\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AACA,mWAAsD,8BAA8B;AAApF;AAAA;AAEA,8MAAkC,YAAY;AAC9C,2NAAmD,+BAA+B;;;;;;;AAS3E,MAAM,YAAsC,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,YAAY,KAAK,EAAE,OAAO,EAAE;IACtG,qEAAqE;IACrE,2GAA2G;IAC3G,8EAA8E;IAE9E,MAAM,oBAAoB,CAAC;QACzB,MAAM,eAAe,IAAI,wCAAwC;QACjE,SAAS;IACX;IAGA,qBACG,6LAAC,mIAAA,CAAA,OAAI;QACF,mCAAmC;QACnC,gCAAgC;QAChC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACR,gFACA,YAAY,iFAAiF,wBAC7F,WAAW,iBAAiB,4CAA4C;;QAE5E,kCAAkC;QAClC,wEAAwE;QACxE,SAAS;kBAEV,cAAA,6LAAC,mIAAA,CAAA,cAAW;YAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACrB,oCACA,YAAY,UAAU,MAAM,6BAA6B;;;8BAG3D,6LAAC;oBAAI,WAAU;;wBAA8C;sCACzD,6LAAC;4BAAE,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACX,wBACA,YAAY,YAAY,UAAU,yCAAyC;;4BAC5E,OAAO,WAAW,QAAQ,CAAC,IAAI;sCAAG,WAAW,QAAQ,CAAC,IAAI;;;;;;sCAC7D,6LAAC;4BAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACb,qDACA,YAAY,gCAAgC,8BAA8B,wDAAwD;;;8CAGlI,6LAAC;oCAAK,WAAU;;sDACZ,6LAAC,uMAAA,CAAA,QAAK;4CAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB,YAAY,gBAAgB;;;;;;wCAAc;sDAEhF,6LAAC;4CAAK,WAAU;;gDAAqB,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,WAAW,SAAS;gDAAE;gDAAE,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,WAAW,OAAO;;;;;;;wCAAS;;;;;;;gCAGzH,WAAW,YAAY,IAAI,WAAW,cAAc,IAAI,WAAW,YAAY,kBAC7E,6LAAC;oCAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACd,6BACA,aAAa,mCAAmC,sDAAsD;;oCACnG,OAAO,CAAC,UAAU,EAAE,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,WAAW,cAAc,EAAE,CAAC,EAAE,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,WAAW,YAAY,GAAG;;sDAC7G,6LAAC,yMAAA,CAAA,SAAM;4CAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB,YAAY,gBAAgB;;;;;;wCAAc;sDAGjF,6LAAC;4CAAK,WAAU;;gDAAoB;gDAAI,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,WAAW,cAAc;gDAAE;gDAAE,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,WAAW,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;8BAMzI,6LAAC,qIAAA,CAAA,SAAM;oBACH,SAAQ;oBACR,MAAK;oBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACR,0BACA,+GACA,YAAY,YAAY,WACxB,2EAA2E;oBAC3E,aAAa;oBAEjB,SAAS;oBACT,OAAM,iBAAiB,8BAA8B;;;sCAEvD,6LAAC,6MAAA,CAAA,SAAM;4BAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY,gBAAgB;;;;;;wBAAc;;;;;;;;;;;;;;;;;;AAK3E;KA7Ea","debugId":null}},
    {"offset": {"line": 1800, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf;KAVS","debugId":null}},
    {"offset": {"line": 1830, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/DepartmentColumn.tsx"],"sourcesContent":["// src/components/schedule/DepartmentColumn.tsx\n'use client'; // Ensure client component\n\nimport React, { useState, useEffect } from 'react'; // Import useState and useEffect\nimport { useDroppable } from '@dnd-kit/core';\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2 } from 'lucide-react';\nimport type { Department, ShiftAssignment, Employee } from '@/types/schedule'; // Assuming types exist\nimport { ShiftCard } from './ShiftCard'; // Assuming ShiftCard component exists\nimport { format } from 'date-fns';\nimport { cn } from '@/lib/utils'; // Added cn\nimport { Skeleton } from '@/components/ui/skeleton'; // Import Skeleton for placeholder\n\ninterface DepartmentColumnProps {\n  department: Department;\n  assignments: ShiftAssignment[];\n  onRemoveShift: (departmentId: string, assignmentId: string) => void;\n  date: Date; // Date for this column\n  onAddShiftRequest: (departmentId: string, date: Date) => void; // New handler for '+' button click\n  onShiftClick: (assignment: ShiftAssignment, date: Date, departmentId: string) => void; // Handler for clicking a shift card\n  isWeekView?: boolean; // Flag for potentially different rendering in week view\n  isMobile: boolean; // Flag to detect mobile view\n}\n\nexport const DepartmentColumn: React.FC<DepartmentColumnProps> = ({\n  department,\n  assignments,\n  onRemoveShift,\n  date,\n  onAddShiftRequest, // Destructure new handler\n  onShiftClick, // Destructure shift click handler\n  isWeekView = false,\n  isMobile, // Destructure mobile flag\n}) => {\n  const [isClient, setIsClient] = useState(false); // State for client-side rendering\n\n  useEffect(() => {\n    setIsClient(true); // Set true after initial mount\n  }, []);\n\n  const dateKey = format(date, 'yyyy-MM-dd');\n  const { setNodeRef, isOver } = useDroppable({\n    id: `${department.id}_${dateKey}`, // Make ID unique per department and date\n    data: {\n        type: 'department',\n        id: department.id,\n        date: dateKey, // Pass date string in data\n    },\n    disabled: isMobile, // Disable dropping on mobile\n  });\n\n  const style = {\n    backgroundColor: isOver ? 'hsl(var(--accent)/0.1)' : undefined,\n    borderColor: isOver ? 'hsl(var(--accent))' : (isWeekView ? 'hsl(var(--border) / 0.3)' : undefined), // Lighter border in week view normal state\n    borderWidth: '1px',\n    borderStyle: isOver ? 'dashed' : 'solid',\n    minHeight: isWeekView ? '60px' : '200px',\n    transition: 'background-color 0.2s ease, border-color 0.2s ease',\n    borderRadius: isWeekView ? '0.375rem' : undefined,\n  };\n\n  // Render placeholder on server and initial client render\n  const renderPlaceholder = () => {\n    if (isWeekView) {\n      return <Skeleton className=\"h-6 w-full\" />; // Simple skeleton for week view\n    }\n    return (\n      <div className=\"p-3 space-y-2\">\n        <Skeleton className=\"h-8 w-full\" />\n        <Skeleton className=\"h-5 w-3/4\" />\n      </div>\n    );\n  };\n\n  // Actual content rendering logic\n  const renderContent = () => {\n    if (isWeekView) {\n      return (\n        <>\n          {assignments.length > 0 ? (\n            assignments.map((assignment) => (\n              <ShiftCard\n                key={assignment.id}\n                assignment={assignment}\n                onRemove={(e) => { e.stopPropagation(); onRemoveShift(department.id, assignment.id); }}\n                isCompact\n                onClick={() => onShiftClick(assignment, date, department.id)}\n              />\n            ))\n          ) : (\n            // Minimal placeholder for empty week view cells on desktop\n             !isMobile && <div className=\"h-4\"></div> // Small spacer\n          )}\n          {/* Single '+' button at the bottom for week view on mobile */}\n          {isMobile && (\n               <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-5 w-5 p-0 text-muted-foreground hover:text-primary block mx-auto mt-1\" // Centered, small\n                  onClick={() => onAddShiftRequest(department.id, date)}\n                  title=\"Aadir Colaborador\"\n              >\n                  <Plus className=\"h-3 w-3\" />\n              </Button>\n          )}\n        </>\n      );\n    } else {\n      // Full rendering for day view\n      return (\n        <>\n          {assignments.length > 0 ? (\n            assignments.map((assignment) => (\n              <ShiftCard\n                key={assignment.id}\n                assignment={assignment}\n                onRemove={(e) => { e.stopPropagation(); onRemoveShift(department.id, assignment.id); }}\n                onClick={() => onShiftClick(assignment, date, department.id)}\n              />\n            ))\n          ) : (\n            <p className=\"text-xs text-muted-foreground text-center pt-4 italic\">\n              {!isMobile ? 'Arrastra o usa +' : 'Usa + para aadir'} {/* Adjusted text based on mobile */}\n            </p>\n          )}\n        </>\n      );\n    }\n  };\n\n  // Main return logic\n  if (isWeekView) {\n     // Simplified structure for week view, '+' button logic handled inside renderContent\n    return (\n      <div ref={setNodeRef} style={style} className=\"p-1 space-y-0.5\">\n        {isClient ? renderContent() : renderPlaceholder()}\n      </div>\n    );\n  } else {\n    // Day view with Card structure and a single '+' button in the header\n    return (\n      <Card ref={setNodeRef} style={style} className=\"flex flex-col h-full shadow-sm\">\n        <CardHeader className=\"flex flex-row items-center justify-between pb-2 pt-4 px-4 border-b\">\n           <CardTitle className=\"text-base font-medium flex items-center gap-2 text-foreground\">\n               {department.icon && <department.icon className=\"h-3.5 w-3.5 text-muted-foreground\" />}\n               {department.name} ({isClient ? assignments.length : '...'}) {/* Show count only on client */}\n           </CardTitle>\n           {/* Single '+' button in the header for Day View */}\n          <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-7 w-7 text-primary hover:bg-primary/10\" // Styled button\n              onClick={() => onAddShiftRequest(department.id, date)}\n              title=\"Aadir Colaborador\"\n          >\n            <Plus className=\"h-4 w-4\" />\n          </Button>\n        </CardHeader>\n        <CardContent className=\"flex-grow p-3 space-y-2 overflow-y-auto\">\n          {isClient ? renderContent() : renderPlaceholder()}\n        </CardContent>\n      </Card>\n    );\n  }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2092, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,kBAAkB,sKAAA,CAAA,WAAyB;AAEjD,MAAM,UAAU,sKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,sKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGpC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,6LAAC,sKAAA,CAAA,UAAwB;QACvB,KAAK;QACL,YAAY;QACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sYACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,sKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2135, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/ScheduleView.tsx"],"sourcesContent":["// src/components/schedule/ScheduleView.tsx\nimport React, { useState, useEffect } from 'react'; // Added useState, useEffect\nimport type { Department, ScheduleData, ShiftAssignment, ScheduleNote, Employee } from '@/types/schedule'; // Added ScheduleNote and Employee\nimport { DepartmentColumn } from './DepartmentColumn'; // Assuming DepartmentColumn component exists\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from '@/components/ui/card'; // Added CardFooter\nimport { format, parse, isValid as isValidDate } from 'date-fns'; // Correctly import parse and isValid\nimport { es } from 'date-fns/locale';\nimport { Button } from '../ui/button';\nimport { Plus, Copy, Eraser, NotebookPen } from 'lucide-react'; // Added NotebookPen icon\nimport { cn } from '@/lib/utils'; // Import cn\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\" // Import Tooltip components\nimport { AlertDialog, AlertDialogTrigger } from '@/components/ui/alert-dialog'; // Import AlertDialogTrigger\n\ninterface ScheduleViewProps {\n  departments: Department[];\n  scheduleData: { [dateKey: string]: ScheduleData }; // Now a map of dateKey to ScheduleData\n  onRemoveShift: (dateKey: string, departmentId: string, assignmentId: string) => void;\n  viewMode: 'day' | 'week';\n  weekDates: Date[];\n  currentDate: Date; // For day view\n  onAddShiftRequest: (departmentId: string, date: Date) => void; // New handler for '+' button click\n  onShiftClick: (assignment: ShiftAssignment, date: Date, departmentId: string) => void; // Handler for clicking a shift card\n  getScheduleForDate: (date: Date) => ScheduleData; // Function to get schedule for a specific date\n  onDuplicateDay: (sourceDate: Date) => void; // Add prop for duplicating a day's schedule\n  onClearDay: (dateToClear: Date) => void; // Add prop for clearing a day's schedule\n  isHoliday: (date: Date | null | undefined) => boolean; // Function to check if a date is a holiday\n  isMobile: boolean; // Flag to detect mobile view\n  getNotesForDate: (date: Date) => ScheduleNote[]; // Function to get notes for a date\n  onOpenNotesModal: (date: Date) => void; // Handler to open notes modal for a specific date\n  employees: Employee[]; // Pass employees to render tooltip content correctly\n}\n\nexport const ScheduleView: React.FC<ScheduleViewProps> = ({\n    departments,\n    scheduleData,\n    onRemoveShift,\n    viewMode,\n    weekDates,\n    currentDate,\n    onAddShiftRequest, // Destructure new handler\n    onShiftClick, // Destructure shift click handler\n    getScheduleForDate, // Receive helper function\n    onDuplicateDay, // Receive duplicate handler\n    onClearDay, // Receive clear handler\n    isHoliday, // Receive holiday check function\n    isMobile, // Receive mobile flag\n    getNotesForDate, // Receive notes function\n    onOpenNotesModal, // Receive the handler to open the notes modal\n    employees, // Receive employees\n}) => {\n  const [isClient, setIsClient] = useState(false); // State for client-side rendering check\n\n  useEffect(() => {\n    setIsClient(true); // Set to true after initial mount\n  }, []);\n\n  // Helper function to render notes tooltip content\n  const renderNotesTooltip = (notes: ScheduleNote[]) => {\n    if (!notes || notes.length === 0) return null;\n    return (\n        <div className=\"text-xs space-y-1 max-w-xs p-2\"> {/* Add padding */}\n            <p className=\"font-medium mb-1\">Anotaciones:</p>\n            {notes.map(note => {\n                const employeeName = note.employeeId ? employees.find(e => e.id === note.employeeId)?.name : null;\n                // Format date for tooltip: Abbreviated day, numeric day, abbreviated month\n                // Use the imported 'parse' function\n                const noteDate = parse(note.date, 'yyyy-MM-dd', new Date());\n                const formattedDate = isValidDate(noteDate) ? format(noteDate, 'EEE d MMM', { locale: es }) : note.date;\n                return (\n                    <p key={note.id}>\n                        {note.note} {employeeName ? <span className=\"italic text-muted-foreground\">({employeeName})</span> : ''}\n                    </p>\n                );\n            })}\n        </div>\n    );\n  };\n\n    if (viewMode === 'day') {\n         // --- Day View ---\n        const daySchedule = getScheduleForDate(currentDate);\n        const dynamicGridClass = `grid-cols-1 sm:grid-cols-2 lg:grid-cols-${Math.min(departments.length, 4)} xl:grid-cols-${Math.min(departments.length, 5)}`; // Adjust as needed\n        const isCurrentHoliday = isHoliday(currentDate);\n        const notesForDay = getNotesForDate(currentDate); // Get notes for the current day\n\n        return (\n            <Card className={cn(\n                \"shadow-md bg-card border\",\n                isCurrentHoliday ? \"border-primary\" : \"border-border\" // Highlight border if holiday\n            )}>\n                <CardHeader className=\"border-b\">\n                    <CardTitle className={cn(\n                        \"text-lg font-medium flex items-center gap-2\", // Added flex and gap\n                        isCurrentHoliday ? \"text-primary font-semibold\" : \"text-foreground\" // Highlight text if holiday\n                    )}>\n                        <span> {/* Wrap text */}\n                            Horario para el {format(currentDate, 'PPPP', { locale: es })}\n                            {isCurrentHoliday && <span className=\"text-xs font-normal ml-2\">(Festivo)</span>}\n                        </span>\n                        {/* Notes Indicator and Tooltip/Click */}\n                        {notesForDay.length > 0 && (\n                             <TooltipProvider delayDuration={100}>\n                                 <Tooltip>\n                                     <TooltipTrigger asChild>\n                                         {/* Wrap the icon in a button for click handling */}\n                                         <Button\n                                            variant=\"ghost\"\n                                            size=\"icon\"\n                                            className=\"h-5 w-5 p-0 text-yellow-500 hover:text-yellow-600 cursor-pointer\" // Yellow color, smaller size\n                                            onClick={() => onOpenNotesModal(currentDate)} // Open notes modal on click\n                                            aria-label=\"Ver/Eliminar anotaciones\"\n                                         >\n                                             <NotebookPen className=\"h-4 w-4\" />\n                                         </Button>\n                                     </TooltipTrigger>\n                                     <TooltipContent side=\"bottom\">\n                                         {renderNotesTooltip(notesForDay)}\n                                     </TooltipContent>\n                                 </Tooltip>\n                            </TooltipProvider>\n                        )}\n                    </CardTitle>\n                    {/* Add description or other info if needed */}\n                </CardHeader>\n                <CardContent className=\"p-4\">\n                    {departments.length > 0 ? (\n                        <div className={`grid ${dynamicGridClass} gap-4`}>\n                            {departments.map((department) => (\n                                <DepartmentColumn\n                                    key={department.id}\n                                    department={department}\n                                    assignments={daySchedule.assignments[department.id] || []}\n                                    onRemoveShift={(deptId, assignId) => onRemoveShift(format(currentDate, 'yyyy-MM-dd'), deptId, assignId)}\n                                    date={currentDate} // Pass the date\n                                    onAddShiftRequest={onAddShiftRequest} // Pass new assign handler\n                                    onShiftClick={onShiftClick} // Pass shift click handler\n                                    isMobile={isMobile} // Pass mobile flag\n                                />\n                            ))}\n                        </div>\n                    ) : (\n                         <p className=\"text-center text-muted-foreground italic py-4\">\n                             No hay departamentos definidos para esta sede. Agrega departamentos en la seccin de configuracin.\n                         </p>\n                    )}\n                </CardContent>\n                 <CardFooter className=\"flex justify-end gap-2 border-t pt-4\">\n                     {/* Duplicate Button */}\n                     <Button\n                         variant=\"outline\"\n                         size=\"sm\"\n                         onClick={() => onDuplicateDay(currentDate)}\n                         title=\"Duplicar horario al da siguiente\"\n                         // Disable if it's the last day of the week maybe? Or handle in the function itself.\n                     >\n                         <Copy className=\"mr-2 h-4 w-4\" /> Duplicar Da Sig.\n                     </Button>\n                      {/* Clear Day Button */}\n                     <AlertDialog>\n                         <AlertDialogTrigger asChild>\n                            <Button\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                title=\"Limpiar turnos del da\"\n                                onClick={() => onClearDay(currentDate)} // Use onClick here to trigger confirmation in parent\n                                disabled={Object.values(daySchedule.assignments).flat().length === 0 && notesForDay.length === 0} // Disable if no assignments or notes\n                            >\n                                <Eraser className=\"mr-2 h-4 w-4\" /> Limpiar Da\n                            </Button>\n                         </AlertDialogTrigger>\n                         {/* AlertDialogContent defined in parent page.tsx for confirmation */}\n                    </AlertDialog>\n                 </CardFooter>\n            </Card>\n        );\n    } else {\n         // --- Week View ---\n         const weekViewContent = (\n            <div className=\"grid grid-cols-7 gap-1 min-w-[1000px]\"> {/* Reduced gap, ensure min-width */}\n              {weekDates.map((date, index) => {\n                  const daySchedule = getScheduleForDate(date);\n                  const dateKey = format(date, 'yyyy-MM-dd');\n                  const notesForDay = getNotesForDate(date); // Get notes for this day\n                   // Calculate count only on client to avoid hydration mismatch\n                   const totalAssignmentsForDay = isClient\n                       ? Object.values(daySchedule.assignments).reduce((sum, deptAssignments) => sum + deptAssignments.length, 0)\n                       : 0; // Show 0 during SSR and initial render\n                  const isLastDayOfWeek = index === weekDates.length - 1;\n                  const isCurrentHoliday = isHoliday(date);\n\n                  // Card represents a single day column in the week view\n                  return (\n                      <div key={dateKey} className=\"flex flex-col h-full\"> {/* Ensure day column takes height */}\n                          <Card className={cn(\n                              \"shadow-sm bg-card border flex flex-col flex-grow\", // Use flex-grow\n                              isCurrentHoliday ? \"border-primary border-2\" : \"border-border/50\" // Thicker primary border for holiday\n                          )}>\n                              <CardHeader className={cn(\n                                  \"pb-2 pt-3 px-2 border-b relative\", // Reduced padding\n                                  isCurrentHoliday ? \"border-primary\" : \"border-border/50\" // Match border color\n                              )}>\n                                  <CardTitle className={cn(\n                                      \"text-xs font-semibold text-center whitespace-nowrap flex items-center justify-center gap-1\", // Added flex, items-center, justify-center, gap\n                                      isCurrentHoliday ? \"text-primary\" : \"text-foreground\" // Highlight title text with primary color\n                                  )}>\n                                      <span>{format(date, 'EEE d', { locale: es })}</span> {/* Wrap date text */}\n                                      {/* Notes Indicator and Tooltip/Click */}\n                                      {notesForDay.length > 0 && (\n                                           <TooltipProvider delayDuration={100}>\n                                               <Tooltip>\n                                                   <TooltipTrigger asChild>\n                                                       <Button\n                                                           variant=\"ghost\"\n                                                           size=\"icon\"\n                                                           className=\"h-4 w-4 p-0 text-yellow-500 hover:text-yellow-600 cursor-pointer\" // Yellow color, smaller size\n                                                           onClick={() => onOpenNotesModal(date)} // Open notes modal on click\n                                                           aria-label=\"Ver/Eliminar anotaciones\"\n                                                        >\n                                                           <NotebookPen className=\"h-3 w-3\" />\n                                                       </Button>\n                                                   </TooltipTrigger>\n                                                   <TooltipContent side=\"top\">\n                                                        {renderNotesTooltip(notesForDay)}\n                                                   </TooltipContent>\n                                               </Tooltip>\n                                          </TooltipProvider>\n                                      )}\n                                  </CardTitle>\n                                  <CardDescription className=\"text-[10px] text-muted-foreground text-center\"> {/* Extra small text */}\n                                      {format(date, 'MMM', { locale: es })} ({totalAssignmentsForDay})\n                                      {isCurrentHoliday && <span className=\"text-primary block font-medium\">Festivo</span>} {/* Use primary color for Festivo text */}\n                                  </CardDescription>\n                                  {/* Action Buttons: Duplicate and Clear */}\n                                  <div className=\"absolute top-0.5 right-0.5 flex flex-col gap-0\"> {/* Reduced gap, adjusted position */}\n                                      {!isLastDayOfWeek && (\n                                          <Button\n                                              variant=\"ghost\"\n                                              size=\"icon\"\n                                              className=\"h-4 w-4 p-0 text-muted-foreground hover:text-foreground opacity-50 hover:opacity-100\"\n                                              onClick={() => onDuplicateDay(date)}\n                                              title=\"Duplicar al da siguiente\"\n                                          >\n                                              <Copy className=\"h-2.5 w-2.5\" /> {/* Smaller icon */}\n                                          </Button>\n                                      )}\n                                     <AlertDialog>\n                                        <AlertDialogTrigger asChild>\n                                            <Button\n                                                variant=\"ghost\"\n                                                size=\"icon\"\n                                                className=\"h-4 w-4 p-0 text-destructive hover:text-destructive opacity-50 hover:opacity-100\"\n                                                title=\"Limpiar turnos del da\"\n                                                onClick={() => onClearDay(date)} // Use onClick here\n                                                disabled={totalAssignmentsForDay === 0 && notesForDay.length === 0} // Disable if no assignments or notes\n                                            >\n                                                <Eraser className=\"h-2.5 w-2.5\" /> {/* Smaller icon */}\n                                            </Button>\n                                        </AlertDialogTrigger>\n                                         {/* AlertDialogContent defined in parent page.tsx */}\n                                     </AlertDialog>\n                                  </div>\n                              </CardHeader>\n                              <CardContent className=\"p-1 space-y-1 flex-grow overflow-y-auto\"> {/* Reduced padding, smaller space */}\n                                  {departments.length > 0 ? (\n                                      departments.map((department) => (\n                                          <div key={department.id} className=\"border rounded-sm p-1 bg-muted/10 relative\"> {/* Reduced padding/rounding, lighter bg */}\n                                              <div className=\"flex justify-between items-center mb-0.5\"> {/* Reduced margin */}\n                                                  <h4 className=\"text-[10px] font-semibold text-foreground flex items-center gap-0.5 whitespace-nowrap overflow-hidden text-ellipsis pr-4\"> {/* Extra small, reduced gap/padding */}\n                                                       {department.icon && <department.icon className=\"h-2.5 w-2.5 text-muted-foreground\" />} {/* Smaller icon */}\n                                                       <span className=\"overflow-hidden text-ellipsis\">{department.name}</span>\n                                                  </h4>\n                                                  {/* Add shift button directly here */}\n                                                   <Button\n                                                        variant=\"ghost\"\n                                                        size=\"icon\"\n                                                        className=\"absolute top-0 right-0 h-4 w-4 p-0 text-primary hover:bg-primary/10\" // Positioned top-right\n                                                        onClick={() => onAddShiftRequest(department.id, date)}\n                                                        title=\"Aadir Colaborador\"\n                                                   >\n                                                       <Plus className=\"h-3 w-3\" />\n                                                   </Button>\n                                              </div>\n                                              <DepartmentColumn\n                                                  department={department}\n                                                  assignments={daySchedule.assignments[department.id] || []}\n                                                  onRemoveShift={(deptId, assignId) => onRemoveShift(dateKey, deptId, assignId)}\n                                                  isWeekView\n                                                  date={date}\n                                                  onAddShiftRequest={onAddShiftRequest}\n                                                  onShiftClick={onShiftClick}\n                                                  isMobile={isMobile} // Pass mobile flag\n                                              />\n                                          </div>\n                                      ))\n                                   ) : (\n                                        <p className=\"text-center text-[10px] text-muted-foreground italic pt-1\"> {/* Smaller text/padding */}\n                                            No hay deptos.\n                                        </p>\n                                   )}\n                              </CardContent>\n                          </Card>\n                      </div>\n                  );\n              })}\n            </div>\n          );\n\n         // Return the scrollable container wrapping the week view content\n         return weekViewContent;\n    }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2757, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,qKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2800, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/ShiftDetailModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogClose,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch'; // Import Switch\nimport { Save, X, PencilLine } from 'lucide-react'; // Added PencilLine\nimport type { ShiftDetails } from '@/types/schedule'; // Assuming type exists\nimport { useToast } from '@/hooks/use-toast';\nimport { cn } from '@/lib/utils'; // Import cn\nimport { formatTo12Hour } from '@/lib/time-utils'; // Import the time formatting helper\n\ninterface ShiftDetailModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (details: ShiftDetails) => void;\n  employeeName: string;\n  departmentName: string;\n  initialDetails?: Partial<ShiftDetails>; // For editing existing shifts\n  isEditing?: boolean; // Flag to indicate if editing\n}\n\n// Basic time validation (HH:MM format)\nconst timeRegex = /^([01]\\d|2[0-3]):([0-5]\\d)$/;\nconst timeErrorMessage = 'Formato HH:MM invlido.';\n\nexport const ShiftDetailModal: React.FC<ShiftDetailModalProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  employeeName,\n  departmentName,\n  initialDetails,\n  isEditing = false, // Default to false (adding)\n}) => {\n  const { toast } = useToast();\n  const [startTime, setStartTime] = useState(initialDetails?.startTime || '12:00'); // Default to 12:00 PM\n  const [endTime, setEndTime] = useState(initialDetails?.endTime || '22:00'); // Default to 10:00 PM\n  const [includeBreak, setIncludeBreak] = useState(initialDetails?.includeBreak || false); // Default to false\n  const [breakStartTime, setBreakStartTime] = useState(initialDetails?.breakStartTime || '15:00'); // Default 3 PM\n  const [breakEndTime, setBreakEndTime] = useState(initialDetails?.breakEndTime || '18:00'); // Default 6 PM\n\n  const [startTimeError, setStartTimeError] = useState<string | null>(null);\n  const [endTimeError, setEndTimeError] = useState<string | null>(null);\n  const [breakStartTimeError, setBreakStartTimeError] = useState<string | null>(null);\n  const [breakEndTimeError, setBreakEndTimeError] = useState<string | null>(null);\n\n  // Reset state when modal opens or initial details change\n  useEffect(() => {\n    if (isOpen) {\n        const defaultStartTime = '12:00'; // Updated default start time\n        const defaultEndTime = '22:00';   // Updated default end time\n        const defaultBreakStartTime = '15:00';\n        const defaultBreakEndTime = '18:00';\n\n        setStartTime(initialDetails?.startTime || defaultStartTime);\n        setEndTime(initialDetails?.endTime || defaultEndTime);\n        setIncludeBreak(initialDetails?.includeBreak || false);\n        setBreakStartTime(initialDetails?.breakStartTime || defaultBreakStartTime);\n        setBreakEndTime(initialDetails?.breakEndTime || defaultBreakEndTime);\n        setStartTimeError(null);\n        setEndTimeError(null);\n        setBreakStartTimeError(null);\n        setBreakEndTimeError(null);\n    }\n   // Dependency includes initialDetails to reset when editing a different shift\n   // isEditing is included to ensure reset happens correctly when switching between add/edit modes\n  }, [isOpen, initialDetails, isEditing]);\n\n\n  const handleSaveClick = () => {\n    let isValid = true;\n    setStartTimeError(null);\n    setEndTimeError(null);\n    setBreakStartTimeError(null);\n    setBreakEndTimeError(null);\n\n    if (!timeRegex.test(startTime)) {\n      setStartTimeError(timeErrorMessage);\n      isValid = false;\n    }\n    if (!timeRegex.test(endTime)) {\n      setEndTimeError(timeErrorMessage);\n      isValid = false;\n    }\n\n    // Validate break times only if break is included\n    if (includeBreak) {\n        if (!breakStartTime || !timeRegex.test(breakStartTime)) {\n            setBreakStartTimeError(timeErrorMessage);\n            isValid = false;\n        }\n        if (!breakEndTime || !timeRegex.test(breakEndTime)) {\n            setBreakEndTimeError(timeErrorMessage);\n            isValid = false;\n        }\n\n        // Check break end time is after break start time\n        if (isValid && breakStartTime && breakEndTime && breakStartTime >= breakEndTime) {\n             setBreakEndTimeError('Hora fin descanso debe ser posterior a hora inicio.');\n             isValid = false;\n             // Note: Simple comparison works for HH:MM within the same day.\n             // More complex logic needed if breaks can cross midnight (unlikely scenario).\n        }\n    }\n\n\n    // Basic check: end time should be after start time (doesn't handle overnight yet)\n    if (isValid && startTime >= endTime) {\n        // Allow overnight shifts for simplicity, maybe add a warning or flag later\n        // setEndTimeError('Hora de fin debe ser posterior a la hora de inicio.');\n        // isValid = false;\n    }\n\n\n    if (isValid) {\n      onSave({\n        startTime,\n        endTime,\n        includeBreak,\n        breakStartTime: includeBreak ? breakStartTime : undefined, // Only save if included\n        breakEndTime: includeBreak ? breakEndTime : undefined,     // Only save if included\n      });\n    } else {\n        toast({\n            title: \"Error de Validacin\",\n            description: \"Por favor corrige los campos marcados.\",\n            variant: \"destructive\",\n        });\n    }\n  };\n\n  const title = isEditing ? 'Editar Detalles del Turno' : 'Detalles del Turno';\n  const saveButtonText = isEditing ? 'Guardar Cambios' : 'Guardar Turno';\n  const SaveIcon = isEditing ? PencilLine : Save; // Use different icon for editing\n\n  // Helper function to handle input changes and keep 24-hour format internally\n  const handleTimeChange = (setter: React.Dispatch<React.SetStateAction<string>>, value: string) => {\n    if (timeRegex.test(value)) {\n      setter(value);\n    } else {\n      // Handle potential partial input or conversion if needed\n      // For now, just update if valid 24-hour format\n      setter(value); // Allow intermediate typing\n    }\n  };\n\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{title}</DialogTitle>\n          <DialogDescription>\n            {isEditing ? 'Modificando' : 'Asignando'} a <strong>{employeeName}</strong> en <strong>{departmentName}</strong>.\n            Ingresa las horas y el descanso.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-4 py-4\">\n          {/* Start Time */}\n          <div className=\"grid grid-cols-4 items-center gap-4\">\n            <Label htmlFor=\"start-time\" className=\"text-right\">\n              Inicio Turno\n            </Label>\n             <Input\n                id=\"start-time\"\n                type=\"time\" // Use type=\"time\" for the native picker\n                value={startTime} // Bind directly to the 24-hour state\n                onChange={(e) => handleTimeChange(setStartTime, e.target.value)}\n                className={cn(\"col-span-3\", startTimeError && 'border-destructive ring-destructive')}\n            />\n             {startTimeError && <p className=\"col-span-4 text-xs text-destructive text-right\">{startTimeError}</p>}\n          </div>\n          {/* End Time */}\n          <div className=\"grid grid-cols-4 items-center gap-4\">\n            <Label htmlFor=\"end-time\" className=\"text-right\">\n              Fin Turno\n            </Label>\n             <Input\n                id=\"end-time\"\n                type=\"time\"\n                value={endTime}\n                onChange={(e) => handleTimeChange(setEndTime, e.target.value)}\n                className={cn(\"col-span-3\", endTimeError && 'border-destructive ring-destructive')}\n             />\n             {endTimeError && <p className=\"col-span-4 text-xs text-destructive text-right\">{endTimeError}</p>}\n          </div>\n\n          {/* Include Break Switch */}\n          <div className=\"flex items-center justify-between space-x-2 pt-2 border-t mt-2\">\n             <Label htmlFor=\"include-break\" className=\"font-medium\">\n                Incluir Descanso\n             </Label>\n             <Switch\n                id=\"include-break\"\n                checked={includeBreak}\n                onCheckedChange={setIncludeBreak}\n             />\n          </div>\n\n\n          {/* Conditional Break Time Inputs */}\n          {includeBreak && (\n            <>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"break-start-time\" className=\"text-right\">\n                  Inicio Descanso\n                </Label>\n                <Input\n                  id=\"break-start-time\"\n                  type=\"time\"\n                  value={breakStartTime}\n                  onChange={(e) => handleTimeChange(setBreakStartTime, e.target.value)}\n                  className={cn(\"col-span-3\", breakStartTimeError && 'border-destructive ring-destructive')}\n                />\n                 {breakStartTimeError && <p className=\"col-span-4 text-xs text-destructive text-right\">{breakStartTimeError}</p>}\n              </div>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"break-end-time\" className=\"text-right\">\n                  Fin Descanso\n                </Label>\n                <Input\n                  id=\"break-end-time\"\n                  type=\"time\"\n                  value={breakEndTime}\n                  onChange={(e) => handleTimeChange(setBreakEndTime, e.target.value)}\n                  className={cn(\"col-span-3\", breakEndTimeError && 'border-destructive ring-destructive')}\n                />\n                 {breakEndTimeError && <p className=\"col-span-4 text-xs text-destructive text-right\">{breakEndTimeError}</p>}\n              </div>\n            </>\n          )}\n\n        </div>\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button type=\"button\" variant=\"outline\">\n              <X className=\"mr-2 h-4 w-4\" /> Cancelar\n            </Button>\n          </DialogClose>\n          <Button type=\"button\" onClick={handleSaveClick} variant=\"default\">\n            <SaveIcon className=\"mr-2 h-4 w-4\" /> {saveButtonText}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3253, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/WeekNavigator.tsx"],"sourcesContent":["// src/components/schedule/WeekNavigator.tsx\n'use client';\n\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { ChevronsLeft, ChevronsRight } from 'lucide-react';\nimport { format, startOfWeek, endOfWeek } from 'date-fns';\nimport { es } from 'date-fns/locale'; // Import Spanish locale\nimport { Card } from '@/components/ui/card'; // Import Card for background\n\ninterface WeekNavigatorProps {\n  currentDate: Date;\n  onPreviousWeek: () => void;\n  onNextWeek: () => void;\n}\n\nexport const WeekNavigator: React.FC<WeekNavigatorProps> = ({\n  currentDate,\n  onPreviousWeek,\n  onNextWeek,\n}) => {\n  const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 }); // Start on Monday\n  const weekEnd = endOfWeek(currentDate, { weekStartsOn: 1 });\n\n  // Format the week range string, handling year change within the week\n  const startYear = format(weekStart, 'yyyy');\n  const endYear = format(weekEnd, 'yyyy');\n  const weekRange = `Semana del ${format(weekStart, 'd MMM', { locale: es })}${startYear !== endYear ? ' ' + startYear : ''} al ${format(weekEnd, 'd MMM yyyy', { locale: es })}`;\n\n  return (\n    <Card className=\"flex items-center justify-center gap-2 px-3 py-2 bg-card shadow-sm border border-border rounded-lg\"> {/* Wrap in Card, add padding */}\n      <Button variant=\"ghost\" size=\"icon\" onClick={onPreviousWeek} className=\"h-9 w-9 text-muted-foreground hover:text-primary\"> {/* Larger button, ghost variant */}\n        <ChevronsLeft className=\"h-5 w-5\" /> {/* Larger icon */}\n        <span className=\"sr-only\">Semana Anterior</span>\n      </Button>\n      <span className=\"text-base font-semibold text-foreground text-center min-w-[220px]\"> {/* Larger, bolder text */}\n        {weekRange}\n      </span>\n      <Button variant=\"ghost\" size=\"icon\" onClick={onNextWeek} className=\"h-9 w-9 text-muted-foreground hover:text-primary\"> {/* Larger button, ghost variant */}\n        <ChevronsRight className=\"h-5 w-5\" /> {/* Larger icon */}\n        <span className=\"sr-only\">Semana Siguiente</span>\n      </Button>\n    </Card>\n  );\n};\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAI5C;AACA;AAAA;AACA;AAAA;AAAA;AACA,0PAAsC,wBAAwB;AAC9D,qOAA6C,6BAA6B;AAP1E;;;;;;;AAeO,MAAM,gBAA8C,CAAC,EAC1D,WAAW,EACX,cAAc,EACd,UAAU,EACX;IACC,MAAM,YAAY,CAAA,GAAA,8IAAA,CAAA,cAAW,AAAD,EAAE,aAAa;QAAE,cAAc;IAAE,IAAI,kBAAkB;IACnF,MAAM,UAAU,CAAA,GAAA,4IAAA,CAAA,YAAS,AAAD,EAAE,aAAa;QAAE,cAAc;IAAE;IAEzD,qEAAqE;IACrE,MAAM,YAAY,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE,WAAW;IACpC,MAAM,UAAU,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE,SAAS;IAChC,MAAM,YAAY,CAAC,WAAW,EAAE,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE,WAAW,SAAS;QAAE,QAAQ,+IAAA,CAAA,KAAE;IAAC,KAAK,cAAc,UAAU,MAAM,YAAY,GAAG,IAAI,EAAE,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE,SAAS,cAAc;QAAE,QAAQ,+IAAA,CAAA,KAAE;IAAC,IAAI;IAE/K,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;YAAqG;0BACnH,6LAAC,qIAAA,CAAA,SAAM;gBAAC,SAAQ;gBAAQ,MAAK;gBAAO,SAAS;gBAAgB,WAAU;;oBAAmD;kCACxH,6LAAC,yNAAA,CAAA,eAAY;wBAAC,WAAU;;;;;;oBAAY;kCACpC,6LAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;;0BAE5B,6LAAC;gBAAK,WAAU;;oBAAoE;oBACjF;;;;;;;0BAEH,6LAAC,qIAAA,CAAA,SAAM;gBAAC,SAAQ;gBAAQ,MAAK;gBAAO,SAAS;gBAAY,WAAU;;oBAAmD;kCACpH,6LAAC,2NAAA,CAAA,gBAAa;wBAAC,WAAU;;;;;;oBAAY;kCACrC,6LAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;;;;;;;;AAIlC;KA5Ba","debugId":null}},
    {"offset": {"line": 3380, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/EmployeeSelectionModal.tsx"],"sourcesContent":["// src/components/schedule/EmployeeSelectionModal.tsx\n'use client';\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogClose,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { ScrollArea } from '@/components/ui/scroll-area'; // Use ScrollArea for potentially long lists\nimport type { Employee } from '@/types/schedule';\nimport { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport { X, UserPlus } from 'lucide-react';\n\ninterface EmployeeSelectionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  employees: Employee[];\n  onSelectEmployee: (employee: Employee) => void;\n  departmentName: string;\n  date: Date;\n}\n\nexport const EmployeeSelectionModal: React.FC<EmployeeSelectionModalProps> = ({\n  isOpen,\n  onClose,\n  employees,\n  onSelectEmployee,\n  departmentName,\n  date,\n}) => {\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Seleccionar Colaborador</DialogTitle>\n          <DialogDescription>\n            Elige un colaborador disponible para asignar a <strong>{departmentName}</strong> el{' '}\n            <strong>{format(date, 'PPP', { locale: es })}</strong>.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"py-4\">\n           {employees.length > 0 ? (\n             <ScrollArea className=\"h-[300px] pr-4\"> {/* Add max height and scrolling */}\n                <div className=\"space-y-2\">\n                  {employees.map((employee) => (\n                    <Button\n                      key={employee.id}\n                      variant=\"outline\"\n                      className=\"w-full justify-start\"\n                      onClick={() => onSelectEmployee(employee)}\n                    >\n                       <UserPlus className=\"mr-2 h-4 w-4\" /> {employee.name}\n                    </Button>\n                  ))}\n                </div>\n             </ScrollArea>\n           ) : (\n             <p className=\"text-center text-muted-foreground italic\">\n               No hay colaboradores disponibles para asignar en esta fecha/departamento.\n             </p>\n           )}\n        </div>\n         <DialogFooter>\n             <DialogClose asChild>\n                 <Button type=\"button\" variant=\"outline\">\n                    <X className=\"mr-2 h-4 w-4\" /> Cancelar\n                 </Button>\n             </DialogClose>\n         </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AAIrD;AASA;AACA,sPAA0D,4CAA4C;AAEtG;AACA;AACA;AAAA;AAjBA;;;;;;;;AA4BO,MAAM,yBAAgE,CAAC,EAC5E,MAAM,EACN,OAAO,EACP,SAAS,EACT,gBAAgB,EAChB,cAAc,EACd,IAAI,EACL;IACC,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAQ,cAAc,CAAC,OAAS,CAAC,QAAQ;kBACrD,cAAA,6LAAC,qIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;;gCAAC;8CAC8B,6LAAC;8CAAQ;;;;;;gCAAwB;gCAAI;8CACpF,6LAAC;8CAAQ,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE,MAAM,OAAO;wCAAE,QAAQ,+IAAA,CAAA,KAAE;oCAAC;;;;;;gCAAY;;;;;;;;;;;;;8BAG1D,6LAAC;oBAAI,WAAU;8BACX,UAAU,MAAM,GAAG,kBAClB,6LAAC,6IAAA,CAAA,aAAU;wBAAC,WAAU;;4BAAiB;0CACpC,6LAAC;gCAAI,WAAU;0CACZ,UAAU,GAAG,CAAC,CAAC,yBACd,6LAAC,qIAAA,CAAA,SAAM;wCAEL,SAAQ;wCACR,WAAU;wCACV,SAAS,IAAM,iBAAiB;;0DAE/B,6LAAC,iNAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;4CAAiB;4CAAE,SAAS,IAAI;;uCALhD,SAAS,EAAE;;;;;;;;;;;;;;;6CAWzB,6LAAC;wBAAE,WAAU;kCAA2C;;;;;;;;;;;8BAK5D,6LAAC,qIAAA,CAAA,eAAY;8BACT,cAAA,6LAAC,qIAAA,CAAA,cAAW;wBAAC,OAAO;kCAChB,cAAA,6LAAC,qIAAA,CAAA,SAAM;4BAAC,MAAK;4BAAS,SAAQ;;8CAC3B,6LAAC,+LAAA,CAAA,IAAC;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlD;KAlDa","debugId":null}},
    {"offset": {"line": 3556, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/schedule/ScheduleNotesModal.tsx"],"sourcesContent":["// src/components/schedule/ScheduleNotesModal.tsx\n'use client';\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { format, parse as parseDateFns, isValid as isValidDate, isWithinInterval } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogClose,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { Calendar } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Trash2, CalendarIcon, NotebookPen, PlusCircle, X } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport type { ScheduleNote, Employee } from '@/types/schedule';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface ScheduleNotesModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  notes: ScheduleNote[];\n  employees: Employee[]; // To populate the dropdown\n  onAddNote: (newNoteData: Omit<ScheduleNote, 'id'>) => void;\n  onDeleteNote: (noteId: string) => void; // Renamed prop\n  initialDate?: Date; // Optional initial date when opened from a specific day\n  // New props for filtering based on context\n  viewMode: 'day' | 'week';\n  currentDate: Date; // The date currently focused in the planner (day view target or week start)\n  weekDates?: Date[]; // Array of dates in the current week view\n}\n\nexport const ScheduleNotesModal: React.FC<ScheduleNotesModalProps> = ({\n  isOpen,\n  onClose,\n  notes: allNotes, // Rename prop to avoid conflict\n  employees,\n  onAddNote,\n  onDeleteNote, // Use the renamed prop\n  initialDate, // Receive initial date\n  viewMode,\n  currentDate,\n  weekDates,\n}) => {\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(initialDate || currentDate);\n  const [noteText, setNoteText] = useState('');\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState<string | undefined>(undefined);\n  const [error, setError] = useState<string | null>(null);\n  const [noteToDeleteId, setNoteToDeleteId] = useState<string | null>(null); // State for delete confirmation\n  const { toast } = useToast();\n\n  // Filter notes based on context (initialDate or current view)\n  const displayedNotes = useMemo(() => {\n      if (initialDate) {\n          // If modal opened for a specific day, show only notes for that day\n          const dateKey = format(initialDate, 'yyyy-MM-dd');\n          return allNotes.filter(note => note.date === dateKey);\n      } else if (viewMode === 'week' && weekDates && weekDates.length === 7) {\n          // If opened generally in week view, show notes for the current week\n          const weekInterval = { start: weekDates[0], end: weekDates[6] };\n          return allNotes.filter(note => {\n              const noteDate = parseDateFns(note.date, 'yyyy-MM-dd', new Date());\n              return isValidDate(noteDate) && isWithinInterval(noteDate, weekInterval);\n          });\n      } else {\n          // If opened generally in day view, show notes for the selectedDate in the form\n          if (selectedDate) {\n             const dateKey = format(selectedDate, 'yyyy-MM-dd');\n             return allNotes.filter(note => note.date === dateKey);\n          }\n          return []; // Or show all future notes? For now, show for selected day\n      }\n  }, [allNotes, initialDate, viewMode, weekDates, selectedDate]);\n\n  // Reset form when modal opens or initialDate changes\n  useEffect(() => {\n    if (isOpen) {\n      setSelectedDate(initialDate || currentDate); // Use initialDate or the planner's current date\n      setNoteText('');\n      setSelectedEmployeeId(undefined);\n      setError(null);\n      setNoteToDeleteId(null); // Reset delete confirmation on open\n    }\n  }, [isOpen, initialDate, currentDate]);\n\n  const handleAddClick = () => {\n    setError(null);\n    if (!selectedDate) {\n      setError('Por favor selecciona una fecha.');\n      return;\n    }\n    if (!noteText.trim()) {\n      setError('Por favor ingresa una nota.');\n      return;\n    }\n\n    const newNoteData: Omit<ScheduleNote, 'id'> = {\n      date: format(selectedDate, 'yyyy-MM-dd'),\n      note: noteText.trim(),\n      employeeId: selectedEmployeeId || undefined, // Ensure empty string becomes undefined\n    };\n\n    onAddNote(newNoteData);\n\n    // Reset form fields after adding\n    setNoteText('');\n    setSelectedEmployeeId(undefined);\n    // Optionally keep the date or advance it? Keep for now.\n  };\n\n  // Function to actually delete the note after confirmation\n   const confirmDeleteNote = () => {\n       if (noteToDeleteId) {\n           onDeleteNote(noteToDeleteId);\n           setNoteToDeleteId(null); // Close the confirmation dialog\n       }\n   };\n\n  const getModalTitle = () => {\n      if (initialDate) return `Anotaciones para ${format(initialDate, 'PPP', { locale: es })}`;\n      if (viewMode === 'week') return 'Anotaciones de la Semana';\n      if (selectedDate) return `Anotaciones para ${format(selectedDate, 'PPP', { locale: es })}`;\n      return 'Anotaciones Futuras / Eventos';\n  };\n\n   const getModalDescription = () => {\n       if (initialDate) return 'Haz clic en una nota para eliminarla.';\n       if (viewMode === 'week') return 'Notas guardadas para la semana actual.';\n       if (selectedDate) return `Agrega o elimina notas para el da seleccionado (${format(selectedDate, 'PPP', { locale: es })}).`;\n       return 'Agrega o elimina notas para fechas especficas.';\n   };\n\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-lg max-h-[90vh] flex flex-col\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <NotebookPen className=\"h-5 w-5\" />\n            {getModalTitle()}\n          </DialogTitle>\n          <DialogDescription>\n             {getModalDescription()}\n          </DialogDescription>\n        </DialogHeader>\n\n        {/* --- Formulario para aadir nota (only if not viewing specific date) --- */}\n        {!initialDate && (\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 py-2 border-b pb-4\"> {/* Reduced py and pb */}\n            {/* Date Picker */}\n            <div className=\"space-y-2 sm:col-span-1\">\n                <Label htmlFor=\"note-date\">Fecha</Label>\n                <Popover>\n                <PopoverTrigger asChild>\n                    <Button\n                    id=\"note-date\"\n                    variant={'outline'}\n                    className={cn(\n                        'w-full justify-start text-left font-normal overflow-hidden whitespace-nowrap', // Added overflow styles\n                        !selectedDate && 'text-muted-foreground'\n                    )}\n                    >\n                    <CalendarIcon className=\"mr-2 h-4 w-4 flex-shrink-0\" /> {/* Prevent icon shrinking */}\n                     {/* Use shorter date format and ensure it doesn't overflow */}\n                    <span className=\"truncate\"> {/* Added truncate */}\n                        {selectedDate ? format(selectedDate, 'dd MMM yyyy', { locale: es }) : <span>Selecciona fecha</span>}\n                    </span>\n                    </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\">\n                    <Calendar\n                    mode=\"single\"\n                    selected={selectedDate}\n                    onSelect={setSelectedDate}\n                    initialFocus\n                    locale={es}\n                    />\n                </PopoverContent>\n                </Popover>\n            </div>\n\n            {/* Note Text */}\n            <div className=\"space-y-2 sm:col-span-2\">\n                <Label htmlFor=\"note-text\">Nota / Descripcin</Label>\n                <Textarea\n                    id=\"note-text\"\n                    value={noteText}\n                    onChange={(e) => setNoteText(e.target.value)}\n                    placeholder=\"Ej: Cumpleaos Carlos P., Solo hasta medioda...\"\n                    rows={3}\n                />\n            </div>\n\n            {/* Optional Employee Link */}\n            <div className=\"space-y-2 sm:col-span-3\">\n                <Label htmlFor=\"note-employee\">Colaborador (Opcional)</Label>\n                <Select value={selectedEmployeeId} onValueChange={(value) => setSelectedEmployeeId(value === 'ninguno' ? undefined : value)}>\n                <SelectTrigger id=\"note-employee\">\n                    <SelectValue placeholder=\"Vincular a colaborador...\" />\n                </SelectTrigger>\n                <SelectContent>\n                    <SelectItem value=\"ninguno\">Ninguno</SelectItem>\n                    {employees.map(emp => (\n                    <SelectItem key={emp.id} value={emp.id}>{emp.name}</SelectItem>\n                    ))}\n                </SelectContent>\n                </Select>\n            </div>\n\n            {/* Error Message */}\n            {error && <p className=\"text-sm text-destructive sm:col-span-3\">{error}</p>}\n\n            {/* Add Button */}\n            <div className=\"sm:col-span-3 flex justify-end\">\n                <Button onClick={handleAddClick}>\n                    <PlusCircle className=\"mr-2 h-4 w-4\" /> Aadir Anotacin\n                </Button>\n            </div>\n            </div>\n        )}\n\n\n        {/* --- Lista de notas existentes --- */}\n        <div className=\"flex-grow overflow-hidden py-2\"> {/* Reduced py */}\n          <h4 className=\"mb-3 font-medium text-sm text-foreground\">\n             Anotaciones Guardadas ({displayedNotes.length})\n          </h4>\n          {displayedNotes.length > 0 ? (\n            <ScrollArea className=\"h-[40vh] pr-4\"> {/* Increased height */}\n              <ul className=\"space-y-2\">\n                {displayedNotes.map((note) => {\n                   const employeeName = note.employeeId ? employees.find(e => e.id === note.employeeId)?.name : null;\n                   const noteDate = parseDateFns(note.date, 'yyyy-MM-dd', new Date());\n                   // Format date for display: Abbreviated day, numeric day, abbreviated month\n                   const formattedDate = isValidDate(noteDate) ? format(noteDate, 'EEE d MMM', { locale: es }) : note.date;\n                  return (\n                     <li key={note.id} className=\"flex items-start justify-between p-2 border rounded-md bg-background text-sm\">\n                       <div className=\"flex-grow mr-2 overflow-hidden\"> {/* Added overflow-hidden */}\n                         <p className=\"font-medium text-foreground block truncate\">{note.note}</p> {/* Added truncate */}\n                         <span className=\"block text-xs text-muted-foreground truncate\"> {/* Added truncate */}\n                            {formattedDate}\n                            {employeeName ? ` - ${employeeName}` : ''}\n                         </span>\n                       </div>\n                        {/* Wrap the trigger and dialog inside the map */}\n                        <AlertDialog>\n                            <AlertDialogTrigger asChild>\n                               <Button\n                                  variant=\"ghost\"\n                                  size=\"icon\"\n                                  className=\"h-6 w-6 text-destructive hover:text-destructive/80 flex-shrink-0\"\n                                  title=\"Eliminar anotacin\"\n                                  onClick={() => setNoteToDeleteId(note.id)} // Set ID to delete on click\n                               >\n                                  <Trash2 className=\"h-4 w-4\" />\n                               </Button>\n                            </AlertDialogTrigger>\n                            {/* Keep the confirmation dialog content here, it needs the context */}\n                             <AlertDialogContent>\n                               <AlertDialogHeader>\n                                 <AlertDialogTitle>Eliminar esta anotacin?</AlertDialogTitle>\n                                 <AlertDialogDescription>\n                                    \"{note.note}\"\n                                    <br />\n                                    Esta accin no se puede deshacer.\n                                 </AlertDialogDescription>\n                               </AlertDialogHeader>\n                               <AlertDialogFooter>\n                                 <AlertDialogCancel onClick={() => setNoteToDeleteId(null)}>Cancelar</AlertDialogCancel>\n                                 <AlertDialogAction\n                                    onClick={confirmDeleteNote} // Call the delete function on confirm\n                                    className=\"bg-destructive hover:bg-destructive/90\">\n                                    Eliminar Anotacin\n                                 </AlertDialogAction>\n                               </AlertDialogFooter>\n                            </AlertDialogContent>\n                        </AlertDialog>\n                     </li>\n                  );\n                 })}\n              </ul>\n            </ScrollArea>\n          ) : (\n            <p className=\"text-sm text-muted-foreground italic text-center py-4\">\n                 No hay anotaciones guardadas para {initialDate ? 'esta fecha' : (viewMode === 'week' ? 'esta semana' : 'este da')}.\n            </p>\n          )}\n        </div>\n\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button variant=\"secondary\">\n              <X className=\"mr-2 h-4 w-4\" /> Cerrar\n            </Button>\n          </DialogClose>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4226, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/services/colombian-holidays.ts"],"sourcesContent":["/**\n * Representa una fecha.\n */\nexport interface Date {\n  year: number;\n  month: number; // 1-12\n  day: number;\n}\n\n/**\n * Obtiene de forma asncrona una lista de festivos colombianos para un ao dado.\n *\n * @param year El ao para el cual obtener los festivos.\n * @returns Una promesa que resuelve a un array de objetos Date representando los festivos.\n */\nexport async function getColombianHolidays(year: number): Promise<Date[]> {\n  // TODO: Implementar esto llamando a una API externa o usando una biblioteca confiable.\n  // Ejemplo de estructura placeholder:\n  // const response = await fetch(`https://api.example.com/holidays/co/${year}`);\n  // if (!response.ok) {\n  //   throw new Error('Fallo al obtener los festivos');\n  // }\n  // const holidays = await response.json();\n  // return holidays.map(holiday => ({ year: year, month: ..., day: ... }));\n\n   console.warn(`Obteniendo festivos para ${year} - Usando datos de ejemplo. Implementar llamada API.`);\n\n   // Datos de ejemplo SOLO para desarrollo/pruebas\n   if (year === 2024) {\n        return [\n            { year: 2024, month: 1, day: 1 }, { year: 2024, month: 1, day: 8 }, // Ao Nuevo, Reyes Magos\n            { year: 2024, month: 3, day: 25 }, { year: 2024, month: 3, day: 28 }, // San Jos, Jueves Santo\n            { year: 2024, month: 3, day: 29 }, { year: 2024, month: 5, day: 1 }, // Viernes Santo, Da del Trabajo\n            { year: 2024, month: 5, day: 13 }, { year: 2024, month: 6, day: 3 }, // Ascensin del Seor, Corpus Christi\n            { year: 2024, month: 6, day: 10 }, { year: 2024, month: 7, day: 1 }, // Sagrado Corazn, San Pedro y San Pablo\n            { year: 2024, month: 7, day: 20 }, { year: 2024, month: 8, day: 7 }, // Independencia, Batalla de Boyac\n            { year: 2024, month: 8, day: 19 }, { year: 2024, month: 10, day: 14 }, // Asuncin de la Virgen, Da de la Raza\n            { year: 2024, month: 11, day: 4 }, { year: 2024, month: 11, day: 11 }, // Todos los Santos, Independencia de Cartagena\n            { year: 2024, month: 12, day: 8 }, { year: 2024, month: 12, day: 25 } // Inmaculada Concepcin, Navidad\n        ];\n   }\n   if (year === 2025) {\n     return [\n       { year: 2025, month: 1, day: 1 }, { year: 2025, month: 1, day: 6 }, // Ao Nuevo, Reyes Magos\n       { year: 2025, month: 3, day: 24 }, { year: 2025, month: 4, day: 17 }, // San Jos, Jueves Santo\n       { year: 2025, month: 4, day: 18 }, { year: 2025, month: 5, day: 1 }, // Viernes Santo, Da del Trabajo\n       { year: 2025, month: 6, day: 2 }, { year: 2025, month: 6, day: 23 }, // Ascensin del Seor, Corpus Christi\n       { year: 2025, month: 6, day: 30 }, { year: 2025, month: 7, day: 20 }, // Sagrado Corazn, San Pedro y San Pablo (Nota: 20 Julio cae Domingo, no se traslada)\n       { year: 2025, month: 8, day: 7 }, { year: 2025, month: 8, day: 18 }, // Batalla de Boyac, Asuncin de la Virgen\n       { year: 2025, month: 10, day: 13 }, { year: 2025, month: 11, day: 3 }, // Da de la Raza, Todos los Santos\n       { year: 2025, month: 11, day: 17 }, { year: 2025, month: 12, day: 8 }, // Independencia de Cartagena, Inmaculada Concepcin\n       { year: 2025, month: 12, day: 25 } // Navidad\n     ];\n   }\n    if (year === 2023) {\n        return [\n            { year: 2023, month: 1, day: 1 }, { year: 2023, month: 1, day: 9 },\n            { year: 2023, month: 3, day: 20 }, { year: 2023, month: 4, day: 6 },\n            { year: 2023, month: 4, day: 7 }, { year: 2023, month: 5, day: 1 },\n            { year: 2023, month: 5, day: 22 }, { year: 2023, month: 6, day: 12 },\n            { year: 2023, month: 6, day: 19 }, { year: 2023, month: 7, day: 3 },\n            { year: 2023, month: 7, day: 20 }, { year: 2023, month: 8, day: 7 },\n            { year: 2023, month: 8, day: 21 }, { year: 2023, month: 10, day: 16 },\n            { year: 2023, month: 11, day: 6 }, { year: 2023, month: 11, day: 13 },\n            { year: 2023, month: 12, day: 8 }, { year: 2023, month: 12, day: 25 }\n        ];\n    }\n\n\n  // Retorna array vaco si no hay datos de ejemplo o la API falla en el futuro\n  return [];\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4531, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/schedule-pdf-exporter.ts"],"sourcesContent":["// src/lib/schedule-pdf-exporter.ts\nimport jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\nimport { format, parse } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport type { ScheduleData, Department, Employee, ShiftAssignment } from '@/types/schedule';\nimport { formatTo12Hour } from './time-utils'; // Import the helper\n\n// Extend jsPDF interface for autoTable\ndeclare module 'jspdf' {\n  interface jsPDF {\n    autoTable: (options: any) => jsPDF;\n  }\n}\n\ninterface ScheduleExportData {\n    locationName: string;\n    weekDates: Date[];\n    departments: Department[];\n    employees: Employee[]; // List of all employees for the selected location\n    scheduleData: { [dateKey: string]: ScheduleData };\n    getScheduleForDate: (date: Date) => ScheduleData;\n    calculateShiftDuration: (assignment: ShiftAssignment, shiftDate: Date) => number;\n}\n\nexport function exportScheduleToPDF(data: ScheduleExportData): void {\n    const doc = new jsPDF({\n        orientation: 'landscape', // Landscape for week view\n        unit: 'pt', // Use points for better precision\n        format: 'a4' // Standard A4 size\n    });\n\n    const pageHeight = doc.internal.pageSize.height;\n    const pageWidth = doc.internal.pageSize.width;\n    let currentY = 40; // Start position for content (with margin)\n    const leftMargin = 40;\n    const rightMargin = 40;\n    const tableWidth = pageWidth - leftMargin - rightMargin;\n\n    // --- Header ---\n    doc.setFontSize(16);\n    doc.setFont('helvetica', 'bold');\n    doc.text('Horario Semanal de Trabajo', pageWidth / 2, currentY, { align: 'center' });\n    currentY += 20;\n\n    doc.setFontSize(12);\n    doc.setFont('helvetica', 'normal');\n    const weekStartFormatted = format(data.weekDates[0], 'dd MMMM', { locale: es });\n    const weekEndFormatted = format(data.weekDates[6], 'dd MMMM yyyy', { locale: es });\n    doc.text(`Sede: ${data.locationName}`, leftMargin, currentY);\n    doc.text(`Semana: ${weekStartFormatted} - ${weekEndFormatted}`, pageWidth - rightMargin, currentY, { align: 'right' });\n    currentY += 30;\n\n    // --- Table Setup ---\n    const head: any[] = [\n        [{ content: 'EMPLEADO / DA', styles: { halign: 'left', valign: 'middle' } }] // First header cell for employee names\n    ];\n    // Add days of the week to header\n    data.weekDates.forEach(date => {\n        head[0].push({\n            content: `${format(date, 'EEE', { locale: es }).toUpperCase()}\\n${format(date, 'dd MMM', { locale: es })}`,\n            styles: { halign: 'center', valign: 'middle' }\n        });\n    });\n\n    const body: any[] = [];\n\n    // Group employees by department for the PDF structure\n    const employeesByDept: { [deptId: string]: Employee[] } = {};\n    data.employees.forEach(emp => {\n        // Find which department the employee worked in *most* this week, or just use primary?\n        // For simplicity, let's group by primary department for now.\n        // A more complex logic might group by actual assignments.\n        // We need to iterate through all assignments to build rows per employee.\n\n        // Alternative: Iterate departments, then employees assigned to that dept\n    });\n\n\n    data.departments.forEach(dept => {\n         // Add Department Row\n         body.push([\n             {\n                 content: `${dept.name} (${data.employees.filter(e => {\n                     // Check if employee has any shift in this dept this week\n                     return data.weekDates.some(date => {\n                         const daySchedule = data.getScheduleForDate(date);\n                         return (daySchedule.assignments[dept.id] || []).some(a => a.employee.id === e.id);\n                     });\n                 }).length} empleados)`,\n                 colSpan: data.weekDates.length + 1, // Span across all columns\n                 styles: { fontStyle: 'bold', fillColor: [230, 230, 230], textColor: [0, 0, 0] } // Gray background\n             }\n         ]);\n\n        // Find employees who have at least one shift in this department during the week\n        const deptEmployees = data.employees.filter(emp =>\n            data.weekDates.some(date => {\n                const daySchedule = data.getScheduleForDate(date);\n                return (daySchedule.assignments[dept.id] || []).some(a => a.employee.id === emp.id);\n            })\n        );\n\n\n        // Add Employee Rows for this department\n        deptEmployees.forEach(emp => {\n             const employeeRow: any[] = [{ content: emp.name, styles: { valign: 'middle' } }]; // First cell is employee name\n\n             data.weekDates.forEach(date => {\n                const daySchedule = data.getScheduleForDate(date);\n                const assignment = (daySchedule.assignments[dept.id] || []).find(a => a.employee.id === emp.id);\n\n                if (assignment) {\n                    // Format times using the helper\n                    let cellContent = `${formatTo12Hour(assignment.startTime)} - ${formatTo12Hour(assignment.endTime)}`;\n                    // Append break time if included\n                    if (assignment.includeBreak && assignment.breakStartTime && assignment.breakEndTime) {\n                        cellContent += `\\nD: ${formatTo12Hour(assignment.breakStartTime)}-${formatTo12Hour(assignment.breakEndTime)}`; // Add break time on new line\n                    }\n                     employeeRow.push({ content: cellContent, styles: { halign: 'center', valign: 'middle', fontSize: 8 } });\n                } else {\n                     employeeRow.push({ content: 'Sin turno', styles: { halign: 'center', valign: 'middle', textColor: [150, 150, 150], fontSize: 8 } }); // Gray text for \"Sin turno\"\n                }\n             });\n             body.push(employeeRow);\n        });\n    });\n\n\n    // --- Draw Table ---\n    autoTable(doc, {\n        head: head,\n        body: body,\n        startY: currentY,\n        theme: 'grid',\n        headStyles: {\n            fillColor: [76, 67, 223], // Primary color #4C43DF\n            textColor: [255, 255, 255], // White text\n            fontSize: 9,\n            lineWidth: 0.5,\n            lineColor: [200, 200, 200]\n        },\n        columnStyles: {\n            0: { cellWidth: 100, fontStyle: 'bold' }, // Employee name column wider and bold\n             // Dynamically apply styles to day columns\n             ...Array.from({ length: data.weekDates.length }).reduce((styles, _, index) => {\n                styles[index + 1] = { cellWidth: 'auto', halign: 'center', fontSize: 8 }; // Smaller font size for shifts\n                return styles;\n            }, {} as any)\n        },\n        styles: {\n            cellPadding: 4,\n            fontSize: 9,\n            overflow: 'linebreak', // Break long text\n            lineWidth: 0.5,\n            lineColor: [200, 200, 200]\n        },\n        didDrawPage: (hookData) => { currentY = hookData.cursor?.y ?? currentY; }\n    });\n\n    // --- Save the PDF ---\n    const timestamp = format(new Date(), 'yyyyMMdd_HHmmss');\n    const filename = `Horario_Semanal_${data.locationName}_${timestamp}.pdf`;\n    doc.save(filename);\n}\n\n// Helper to parse HH:MM to minutes (same as in page.tsx, consider moving to utils)\nconst parseTimeToMinutes = (timeStr: string): number => {\n    if (!timeStr || !/^\\d{2}:\\d{2}$/.test(timeStr)) return 0;\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    return hours * 60 + minutes;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4769, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/schedule/page.tsx"],"sourcesContent":["// src/app/schedule/page.tsx\n'use client'; // Ensure this directive is present\n\nimport React, { useState, useEffect, useCallback, useMemo, useRef, ChangeEvent, DragEvent } from 'react';\nimport { DndContext, DragEndEvent, closestCenter } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport Image from 'next/image'; // Import next/image\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardFooter, // Import CardFooter\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2, Edit, ChevronsLeft, ChevronsRight, Calendar as CalendarModernIcon, Users, Building, Building2, MinusCircle, ChevronsUpDown, Settings, Save, CopyPlus, Eraser, Download, FileX2, FileDown, PencilLine, Share2, Loader2, Check, Copy, Upload, FolderUp, FileJson, List, UploadCloud, FileText, NotebookPen, CalendarX } from 'lucide-react'; // Added CalendarX\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label'; // Import Label\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Separator } from '@/components/ui/separator'; // Import Separator\nimport { ScrollArea } from '@/components/ui/scroll-area'; // Import ScrollArea\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\"; // Import AlertDialog components\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription, DialogClose, DialogTrigger } from \"@/components/ui/dialog\"; // Import Dialog components\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuPortal,\n  DropdownMenuTrigger, // Import DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\";\n\n\nimport { LocationSelector } from '@/components/schedule/LocationSelector';\nimport { EmployeeList } from '@/components/schedule/EmployeeList';\nimport { ScheduleView } from '@/components/schedule/ScheduleView';\nimport { ShiftDetailModal } from '@/components/schedule/ShiftDetailModal';\nimport { WeekNavigator } from '@/components/schedule/WeekNavigator'; // Import WeekNavigator\nimport { useToast } from '@/hooks/use-toast';\nimport { useIsMobile } from '@/hooks/use-mobile';\nimport { EmployeeSelectionModal } from '@/components/schedule/EmployeeSelectionModal';\nimport { ScheduleNotesModal } from '@/components/schedule/ScheduleNotesModal'; // Import the new modal\n\nimport type { Location, Department, Employee, ShiftAssignment, ScheduleData, DailyAssignments, WeeklyAssignments, ScheduleTemplate, ScheduleNote } from '@/types/schedule'; // Added ScheduleTemplate and ScheduleNote\nimport { startOfWeek, endOfWeek, addDays, format, addWeeks, subWeeks, parseISO, getYear, isValid, differenceInMinutes, parse as parseDateFnsInternal, isSameDay, isWithinInterval, getDay } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport { cn } from '@/lib/utils';\nimport { getColombianHolidays } from '@/services/colombian-holidays';\nimport { exportScheduleToPDF } from '@/lib/schedule-pdf-exporter';\nimport { formatTo12Hour } from '@/lib/time-utils';\nimport { parse as parseDateFns } from 'date-fns'; // Alias for clarity\n\n\n// Helper to generate dates for the current week\nconst getWeekDates = (currentDate: Date): Date[] => {\n  const start = startOfWeek(currentDate, { weekStartsOn: 1 }); // Start on Monday\n  return Array.from({ length: 7 }).map((_, i) => addDays(start, i));\n};\n\n// LocalStorage Keys\nconst SCHEDULE_DATA_KEY = 'schedulePlannerData';\nconst SCHEDULE_NOTES_KEY = 'schedulePlannerNotes'; // Key for general notes\nconst SCHEDULE_EVENTS_KEY = 'scheduleCalendarEvents'; // Key for specific date notes/events\nconst LOCATIONS_KEY = 'schedulePlannerLocations';\nconst DEPARTMENTS_KEY = 'schedulePlannerDepartments';\nconst EMPLOYEES_KEY = 'schedulePlannerEmployees';\nconst SCHEDULE_TEMPLATES_KEY = 'schedulePlannerTemplates'; // Key for schedule templates\n\n// Cache for holidays\nlet holidaysCache: { [year: number]: Set<string> } = {};\n\nasync function fetchAndCacheHolidays(year: number): Promise<Set<string>> {\n    if (holidaysCache[year]) {\n        return holidaysCache[year];\n    }\n    try {\n        const holidays = await getColombianHolidays(year);\n        if (!Array.isArray(holidays)) {\n            console.error(`Error: getColombianHolidays(${year}) did not return an array.`);\n            throw new Error(`Formato de respuesta invlido para festivos de ${year}.`);\n        }\n        const holidaySet = new Set(holidays.map(h => {\n            if (!h || typeof h.year !== 'number' || typeof h.month !== 'number' || typeof h.day !== 'number') {\n                console.error(`Error: Invalid holiday object structure for year ${year}:`, h);\n                return '';\n            }\n             try {\n                 const dateToFormat = new Date(h.year, h.month - 1, h.day);\n                 if (!isValid(dateToFormat) || getYear(dateToFormat) !== h.year) {\n                     console.error(`Error: Invalid date components for holiday in year ${year}:`, h);\n                     return '';\n                 }\n                 return format(dateToFormat, 'yyyy-MM-dd');\n             } catch (formatError) {\n                 console.error(`Error formatting holiday date for year ${year}:`, h, formatError);\n                 return '';\n             }\n        }).filter(dateStr => dateStr !== ''));\n\n        holidaysCache[year] = holidaySet;\n        return holidaySet;\n    } catch (error) {\n        console.error(`Error fetching or caching holidays for ${year}:`, error);\n        return new Set();\n    }\n}\n\nconst initialLocations: Location[] = [\n  { id: 'loc-1', name: 'Sede Principal' },\n  { id: 'loc-2', name: 'Sede Norte' },\n];\n\n// Define initial departments with icon components\nconst iconMap: { [key: string]: React.ElementType } = {\n    Building: Building,\n    Users: Users,\n    Edit: Edit,\n    Building2: Building2, // Add other icons used\n};\nconst initialDepartments: Department[] = [\n  { id: 'dep-1', name: 'Cocina', locationId: 'loc-1', icon: Building },\n  { id: 'dep-2', name: 'Saln', locationId: 'loc-1', icon: Users },\n  { id: 'dep-3', name: 'Caja & Barra', locationId: 'loc-2', icon: Edit },\n].map(dep => ({ ...dep, iconName: Object.keys(iconMap).find(key => iconMap[key] === dep.icon) })); // Add iconName initially\n\n\nconst initialEmployees: Employee[] = [\n  { id: '101', name: 'Carlos Prez', locationIds: ['loc-1'] },\n  { id: '102', name: 'Ana Rodriguez', locationIds: ['loc-1'] },\n  { id: '201', name: 'Luis Gmez', locationIds: ['loc-2'] },\n  { id: '202', name: 'Maria Garca', locationIds: ['loc-1', 'loc-2'] }, // Example multi-location employee\n];\n\nconst defaultNotesText = `Lun a Jue: Parrillazo y Gauchos 12am. - Gaucho 11pm. | Vie a Sab: Parrillazo y Gauchos 1am. - Gaucho 12am. | Dom: Todos 11 pm`;\n\nconst parseTimeToMinutes = (timeStr: string): number => {\n  if (!timeStr || !/^\\d{2}:\\d{2}$/.test(timeStr)) return 0;\n  const [hours, minutes] = timeStr.split(':').map(Number);\n  return hours * 60 + minutes;\n};\n\nconst calculateShiftDuration = (assignment: ShiftAssignment, shiftDate: Date): number => {\n    try {\n        const startDateStr = format(shiftDate, 'yyyy-MM-dd');\n        const startTime = parseDateFnsInternal(`${startDateStr} ${assignment.startTime}`, 'yyyy-MM-dd HH:mm', new Date());\n\n        const startTimeMinutes = parseTimeToMinutes(assignment.startTime);\n        const endTimeMinutes = parseTimeToMinutes(assignment.endTime);\n        let endTime = parseDateFnsInternal(`${startDateStr} ${assignment.endTime}`, 'yyyy-MM-dd HH:mm', new Date());\n        if (!isValid(endTime) || endTimeMinutes < startTimeMinutes) {\n             if (endTimeMinutes < startTimeMinutes) {\n                endTime = addDays(parseDateFnsInternal(`${startDateStr} ${assignment.endTime}`, 'yyyy-MM-dd HH:mm', new Date()), 1);\n             } else {\n                 console.warn('Invalid end time for duration calculation:', assignment);\n                 return 0;\n             }\n        }\n\n        if (!isValid(startTime) || !isValid(endTime)) {\n            console.warn('Invalid start or end time for duration calculation:', assignment);\n            return 0;\n        }\n\n        let totalShiftMinutes = differenceInMinutes(endTime, startTime);\n\n        let breakMinutes = 0;\n        if (assignment.includeBreak && assignment.breakStartTime && assignment.breakEndTime) {\n            const breakStartMinutes = parseTimeToMinutes(assignment.breakStartTime);\n            const breakEndMinutes = parseTimeToMinutes(assignment.breakEndTime);\n            if (breakEndMinutes > breakStartMinutes) {\n                 breakMinutes = breakEndMinutes - breakStartMinutes;\n            }\n        }\n\n        const netMinutes = totalShiftMinutes - breakMinutes;\n        return Math.max(0, netMinutes) / 60;\n    } catch (error) {\n        console.error(\"Error calculating shift duration:\", error, assignment);\n        return 0;\n    }\n};\n\n// Helper function to load data from localStorage safely\nconst loadFromLocalStorage = <T,>(key: string, defaultValue: T, isJson: boolean = true): T => {\n    if (typeof window === 'undefined') {\n        return defaultValue; // Return default during SSR\n    }\n    try {\n        const savedData = localStorage.getItem(key);\n        if (!savedData) return defaultValue;\n\n        if (!isJson) {\n            return savedData as unknown as T; // Return raw string if not JSON\n        }\n\n        const parsed = JSON.parse(savedData);\n\n        // Basic check for array types\n        if ([LOCATIONS_KEY, EMPLOYEES_KEY, DEPARTMENTS_KEY, SCHEDULE_EVENTS_KEY].includes(key)) { // Added SCHEDULE_EVENTS_KEY\n            if (Array.isArray(parsed)) {\n                  // Ensure employees have locationIds array\n                  if (key === EMPLOYEES_KEY) {\n                      return parsed.map((emp: any) => ({\n                          ...emp,\n                          locationIds: Array.isArray(emp.locationIds)\n                              ? emp.locationIds\n                              : (emp.primaryLocationId ? [emp.primaryLocationId] : []) // Convert old primaryLocationId\n                      })) as T;\n                  }\n                  // For ScheduleNotes, dates are already strings 'yyyy-MM-dd'\n                  if (key === SCHEDULE_EVENTS_KEY) {\n                      return parsed.filter(note => // Basic validation\n                          note && typeof note === 'object' && note.id && note.date && note.note\n                      ) as T;\n                  }\n                 return parsed as T;\n            } else {\n                console.warn(`[loadFromLocalStorage] Expected array for key ${key}, but found:`, typeof parsed, \". Returning default.\");\n                // If data exists but is not an array, remove it (except for notes)\n                if(key !== SCHEDULE_NOTES_KEY && key !== SCHEDULE_DATA_KEY) { // Avoid removing complex or string data\n                    try {\n                        localStorage.removeItem(key);\n                        console.warn(`Removed invalid non-array item from localStorage for key: ${key}`);\n                    } catch (removeError) {\n                        console.error(`Error removing invalid item from localStorage for key ${key}:`, removeError);\n                    }\n                }\n                return defaultValue; // Return default if type mismatch\n            }\n        } else if (key === SCHEDULE_DATA_KEY || key === SCHEDULE_TEMPLATES_KEY) { // Treat templates as complex objects too\n            // More complex types might need more checks, but for now assume it's okay if it parses\n            return parsed as T;\n        } else {\n            // For unknown keys, just return the parsed data if it's not null/undefined\n            return parsed as T;\n        }\n    } catch (error) {\n        // Handle JSON parsing errors or other potential issues\n         if (error instanceof SyntaxError) {\n             console.error(`Error parsing JSON from localStorage for key ${key}:`, error.message, \"Saved data:\", localStorage.getItem(key));\n             // Don't remove notes on parse error, but remove others\n             if (key !== SCHEDULE_NOTES_KEY) {\n                 try {\n                     localStorage.removeItem(key);\n                     console.warn(`Removed invalid item from localStorage for key: ${key}`);\n                 } catch (removeError) {\n                     console.error(`Error removing invalid item from localStorage for key ${key}:`, removeError);\n                 }\n             }\n         } else {\n             console.error(`Error loading ${key} from localStorage:`, error);\n         }\n    }\n    return defaultValue; // Return default if nothing saved or error occurred\n};\n\n\n// Helper specifically for loading departments and restoring icons\nconst loadDepartmentsFromLocalStorage = (defaultValue: Department[]): Department[] => {\n    const savedDepartments = loadFromLocalStorage<{id: string, name: string, locationId: string, iconName?: string}[]>(DEPARTMENTS_KEY, []);\n    if (savedDepartments.length > 0) {\n         return savedDepartments.map(dep => ({\n            ...dep,\n            icon: dep.iconName ? iconMap[dep.iconName] : Building, // Use map or default\n         }));\n    }\n     // If nothing loaded, map initial data to include iconName\n     return defaultValue.map(dep => ({\n         ...dep,\n         iconName: Object.keys(iconMap).find(key => iconMap[key] === dep.icon)\n     }));\n};\n\n// Helper for loading schedule data and parsing dates/employees\nconst loadScheduleDataFromLocalStorage = (employees: Employee[], defaultValue: { [dateKey: string]: ScheduleData }): { [dateKey: string]: ScheduleData } => {\n    const savedSchedule = loadFromLocalStorage<{ [dateKey: string]: any }>(SCHEDULE_DATA_KEY, defaultValue);\n     try {\n         const hydratedSchedule: { [dateKey: string]: ScheduleData } = {};\n         Object.keys(savedSchedule).forEach(key => {\n             const dayData = savedSchedule[key];\n             if (!dayData || !dayData.date) return; // Skip invalid entries\n\n             const date = typeof dayData.date === 'string' ? parseISO(dayData.date) : dayData.date;\n             if (!isValid(date)) return; // Skip if date is invalid\n\n             const hydratedAssignments: { [departmentId: string]: ShiftAssignment[] } = {};\n             if (dayData.assignments) {\n                 Object.keys(dayData.assignments).forEach(deptId => {\n                     const assignments = dayData.assignments[deptId];\n                     if (Array.isArray(assignments)) {\n                         hydratedAssignments[deptId] = assignments.map((assign: any) => {\n                             // Ensure employee object is fully populated\n                             if (assign.employee && typeof assign.employee === 'object') {\n                                 const fullEmployee = employees.find(emp => emp.id === assign.employee.id);\n                                 if (fullEmployee) {\n                                     return { ...assign, employee: fullEmployee };\n                                 } else {\n                                     console.warn(`Employee ID ${assign.employee.id} not found while loading schedule for assignment ${assign.id}`);\n                                     return { ...assign, employee: { id: assign.employee.id, name: `(ID: ${assign.employee.id})`, locationIds: [] } }; // Placeholder if employee not found\n                                 }\n                             }\n                             return assign; // Should not happen if saved correctly\n                         }).filter(Boolean); // Filter out any null entries if employee wasn't found\n                     }\n                 });\n             }\n             hydratedSchedule[key] = { date, assignments: hydratedAssignments };\n         });\n         return hydratedSchedule;\n     } catch (error) {\n         console.error(\"Error parsing schedule data from localStorage:\", error);\n         return defaultValue;\n     }\n};\n\n// --- Function to Load Schedule Templates ---\nconst loadScheduleTemplates = (): ScheduleTemplate[] => {\n    if (typeof window === 'undefined') return []; // Only run on client\n\n    const loadedTemplates = loadFromLocalStorage<ScheduleTemplate[]>(SCHEDULE_TEMPLATES_KEY, []); // Use helper\n    console.log(`[loadScheduleTemplates] Loaded ${loadedTemplates.length} templates from key ${SCHEDULE_TEMPLATES_KEY}.`);\n\n    // Add createdAt revival if necessary (might already be handled by loadFromLocalStorage if SCHEDULE_TEMPLATES_KEY is in the array check)\n    return loadedTemplates\n        .map(tpl => {\n            if (tpl.createdAt && typeof tpl.createdAt === 'string') {\n                try {\n                    return { ...tpl, createdAt: parseISO(tpl.createdAt) };\n                } catch (e) {\n                    console.error(\"Error parsing template createdAt date:\", e);\n                    return { ...tpl, createdAt: undefined }; // Or handle as invalid\n                }\n            }\n            return tpl;\n        })\n        .sort((a, b) => {\n            const dateA = a.createdAt instanceof Date ? a.createdAt.getTime() : 0;\n            const dateB = b.createdAt instanceof Date ? b.createdAt.getTime() : 0;\n            return dateB - dateA; // Sort newest first\n        });\n};\n\n\n\n\nexport default function SchedulePage() {\n    // --- State Initialization ---\n    const [currentDate, setCurrentDate] = useState(new Date());\n    const [viewMode, setViewMode] = useState<'day' | 'week'>('week');\n    const [locations, setLocations] = useState<Location[]>([]);\n    const [departments, setDepartments] = useState<Department[]>([]);\n    const [employees, setEmployees] = useState<Employee[]>([]);\n    const [scheduleData, setScheduleData] = useState<{ [dateKey: string]: ScheduleData }>({});\n    const [scheduleNotes, setScheduleNotes] = useState<ScheduleNote[]>([]); // State for calendar notes/events\n    const [isNotesModalOpen, setIsNotesModalOpen] = useState(false); // State for the notes modal\n    const [savedTemplates, setSavedTemplates] = useState<ScheduleTemplate[]>([]); // State for saved templates\n    const [isTemplateModalOpen, setIsTemplateModalOpen] = useState(false); // State for template modal\n    const [templateToDeleteId, setTemplateToDeleteId] = useState<string | null>(null); // State for confirming template deletion\n    const [templateToSaveName, setTemplateToSaveName] = useState<string>(''); // State for template name input\n    const [isSavingTemplate, setIsSavingTemplate] = useState<boolean>(false); // Loading state for saving template\n    const [noteToDeleteId, setNoteToDeleteId] = useState<string | null>(null); // State for confirming note deletion\n    const [notesModalForDate, setNotesModalForDate] = useState<Date | null>(null); // State to open notes modal for a specific date\n\n\n    const [notes, setNotes] = useState<string>(defaultNotesText); // Initialize with default general notes\n    const [selectedLocationId, setSelectedLocationId] = useState<string>('');\n\n    const [isShiftModalOpen, setIsShiftModalOpen] = useState(false);\n    const [isEmployeeSelectionModalOpen, setIsEmployeeSelectionModalOpen] = useState(false);\n    const [shiftRequestContext, setShiftRequestContext] = useState<{ departmentId: string; date: Date } | null>(null);\n    const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n    const [editingShift, setEditingShift] = useState<{ assignment: ShiftAssignment; date: Date; departmentId: string } | null>(null);\n    const [targetDate, setTargetDate] = useState<Date>(new Date());\n\n    const [isConfigModalOpen, setIsConfigModalOpen] = useState(false);\n    const [isLocationModalOpen, setIsLocationModalOpen] = useState(false);\n    const [isDepartmentModalOpen, setIsDepartmentModalOpen] = useState(false);\n    const [isEmployeeModalOpen, setIsEmployeeModalOpen] = useState(false);\n\n    const [editingLocation, setEditingLocation] = useState<Location | null>(null);\n    const [locationFormData, setLocationFormData] = useState({ name: '' });\n\n    const [editingDepartment, setEditingDepartment] = useState<Department | null>(null);\n    const [departmentFormData, setDepartmentFormData] = useState<{name: string, locationId: string, iconName?: string}>({ name: '', locationId: '', iconName: undefined });\n\n\n    const [editingEmployee, setEditingEmployee] = useState<Employee | null>(null);\n    const [employeeFormData, setEmployeeFormData] = useState<{ id: string, name: string, locationIds: string[] }>({ id: '', name: '', locationIds: [] });\n\n\n    const [itemToDelete, setItemToDelete] = useState<{ type: 'location' | 'department' | 'employee'; id: string; name: string } | null>(null); // Removed 'template'\n\n    const [clearingDate, setClearingDate] = useState<Date | null>(null);\n    const [clearingWeek, setClearingWeek] = useState<boolean>(false); // State for clearing week confirmation\n\n    const [holidaySet, setHolidaySet] = useState<Set<string>>(new Set());\n    const [isCheckingHoliday, setIsCheckingHoliday] = useState<boolean>(false);\n\n    const [isClient, setIsClient] = useState(false);\n\n    const isMobile = useIsMobile();\n    const { toast } = useToast();\n\n    // --- Load Data from localStorage on Mount (Client-side only) ---\n    useEffect(() => {\n        setIsClient(true); // Mark as client-side after mount\n        const loadedLocations = loadFromLocalStorage(LOCATIONS_KEY, initialLocations);\n        const loadedDepts = loadDepartmentsFromLocalStorage(initialDepartments);\n        const loadedEmps = loadFromLocalStorage(EMPLOYEES_KEY, initialEmployees);\n        const loadedSched = loadScheduleDataFromLocalStorage(loadedEmps, {});\n        const loadedNotesStr = loadFromLocalStorage(SCHEDULE_NOTES_KEY, defaultNotesText, false); // Load general notes as string\n        const loadedEvents = loadFromLocalStorage<ScheduleNote[]>(SCHEDULE_EVENTS_KEY, []); // Load calendar notes/events\n        const loadedTpls = loadScheduleTemplates(); // Load schedule templates using the new function\n\n        setLocations(loadedLocations);\n        setDepartments(loadedDepts);\n        setEmployees(loadedEmps);\n        setScheduleData(loadedSched);\n        setNotes(loadedNotesStr);\n        setScheduleNotes(loadedEvents); // Set loaded calendar notes\n        setSavedTemplates(loadedTpls); // Set loaded schedule templates\n\n        // Set initial selected location and update form defaults accordingly\n        const initialSelectedLoc = loadedLocations.length > 0 ? loadedLocations[0].id : '';\n        setSelectedLocationId(initialSelectedLoc);\n        setDepartmentFormData(prev => ({ ...prev, locationId: initialSelectedLoc }));\n        setEmployeeFormData(prev => ({ ...prev, locationIds: initialSelectedLoc ? [initialSelectedLoc] : [] }));\n\n    }, []); // Empty dependency array ensures this runs only once on mount\n\n    useEffect(() => {\n        const startYear = getYear(startOfWeek(currentDate, { weekStartsOn: 1 }));\n        const endYear = getYear(endOfWeek(currentDate, { weekStartsOn: 1 }));\n        const yearsToFetch = new Set([startYear, endYear]);\n\n        setIsCheckingHoliday(true);\n        Promise.all(Array.from(yearsToFetch).map(year => fetchAndCacheHolidays(year)))\n            .then(results => {\n                const combinedSet = new Set<string>();\n                results.forEach(set => set.forEach(date => combinedSet.add(date)));\n                setHolidaySet(combinedSet);\n            })\n            .catch(error => {\n                console.error(\"Error fetching holidays for week view:\", error);\n                setHolidaySet(new Set());\n            })\n            .finally(() => {\n                setIsCheckingHoliday(false);\n            });\n    }, [currentDate]);\n\n     // --- Save Data to localStorage on Change ---\n     useEffect(() => {\n         if (isClient) {\n             try {\n                 localStorage.setItem(LOCATIONS_KEY, JSON.stringify(locations));\n             } catch (e) { console.error(\"Error saving locations:\", e); }\n         }\n     }, [locations, isClient]);\n\n     useEffect(() => {\n         if (isClient) {\n             try {\n                 const departmentsToSave = departments.map(({ icon, ...rest }) => ({\n                    ...rest,\n                    iconName: Object.keys(iconMap).find(key => iconMap[key] === icon)\n                 }));\n                 localStorage.setItem(DEPARTMENTS_KEY, JSON.stringify(departmentsToSave));\n             } catch (e) { console.error(\"Error saving departments:\", e); }\n         }\n     }, [departments, isClient]);\n\n     useEffect(() => {\n         if (isClient) {\n             try {\n                 localStorage.setItem(EMPLOYEES_KEY, JSON.stringify(employees));\n             } catch (e) { console.error(\"Error saving employees:\", e); }\n         }\n     }, [employees, isClient]);\n\n     useEffect(() => {\n        if (isClient) {\n            try {\n                const dataToSave = JSON.parse(JSON.stringify(scheduleData));\n                 Object.keys(dataToSave).forEach(key => {\n                     if (dataToSave[key] && dataToSave[key].date instanceof Date) {\n                         dataToSave[key].date = dataToSave[key].date.toISOString();\n                     }\n                     if (dataToSave[key] && dataToSave[key].assignments) {\n                         Object.keys(dataToSave[key].assignments).forEach(deptId => {\n                             (dataToSave[key].assignments[deptId] || []).forEach((assign: any) => {\n                                 if (assign.employee && typeof assign.employee === 'object') {\n                                     assign.employee = { id: assign.employee.id };\n                                 }\n                             });\n                         });\n                     }\n                 });\n                localStorage.setItem(SCHEDULE_DATA_KEY, JSON.stringify(dataToSave));\n            } catch (error) {\n                console.error(\"Error saving schedule data to localStorage:\", error);\n                 toast({\n                     title: \"Error al Guardar Horario\",\n                     description: \"No se pudo guardar el horario en el almacenamiento local.\",\n                     variant: \"destructive\",\n                 });\n            }\n        }\n    }, [scheduleData, isClient, toast]);\n\n    useEffect(() => {\n        if (isClient) {\n            try {\n                localStorage.setItem(SCHEDULE_NOTES_KEY, notes);\n            } catch (error) {\n                console.error(\"Error saving notes to localStorage:\", error);\n            }\n        }\n    }, [notes, isClient]);\n\n     // --- Effect to save ScheduleNotes to localStorage ---\n     useEffect(() => {\n        if (isClient) {\n            try {\n                console.log(\"[Save Effect] Saving schedule notes:\", scheduleNotes);\n                localStorage.setItem(SCHEDULE_EVENTS_KEY, JSON.stringify(scheduleNotes));\n                console.log(\"[Save Effect] Schedule notes saved successfully.\");\n            } catch (error) {\n                console.error(\"Error saving schedule notes to localStorage:\", error);\n                toast({\n                    title: 'Error al Guardar Notas de Calendario',\n                    description: 'No se pudieron guardar las notas especficas.',\n                    variant: 'destructive',\n                });\n            }\n        }\n    }, [scheduleNotes, isClient, toast]);\n\n      // --- Effect to save Templates to localStorage ---\n     useEffect(() => {\n         if (isClient) {\n             try {\n                  console.log(\"[Save Effect] Saving templates to localStorage:\", savedTemplates); // Log before saving\n                  // Ensure each template has a unique ID and createdAt timestamp if missing\n                  const templatesToSave = savedTemplates.map(tpl => ({\n                      ...tpl,\n                      id: tpl.id || `${SCHEDULE_TEMPLATES_KEY}_${Date.now()}-${Math.random().toString(36).substring(2, 7)}`, // Generate ID if missing\n                      createdAt: tpl.createdAt instanceof Date ? tpl.createdAt.toISOString() : (tpl.createdAt || new Date().toISOString()) // Ensure ISO string date\n                  }));\n                  // Save the entire array under the single SCHEDULE_TEMPLATES_KEY\n                  localStorage.setItem(SCHEDULE_TEMPLATES_KEY, JSON.stringify(templatesToSave));\n                  console.log(\"[Save Effect] Templates saved successfully.\"); // Log if saving succeeds\n             } catch (error) {\n                  console.error(\"Error saving templates to localStorage:\", error);\n                  toast({\n                      title: 'Error al Guardar Templates',\n                      description: 'No se pudieron guardar los templates localmente.',\n                      variant: 'destructive',\n                  });\n             }\n         }\n     }, [savedTemplates, isClient, toast]);\n\n    // ---- End LocalStorage Effects ---\n\n    // --- Functions to Manage Schedule Notes ---\n    const addScheduleNote = useCallback((newNoteData: Omit<ScheduleNote, 'id'>) => {\n        const newNote: ScheduleNote = {\n            ...newNoteData,\n            id: `note-${Date.now()}-${Math.random().toString(36).substring(2, 7)}`,\n        };\n        setScheduleNotes(prevNotes => [...prevNotes, newNote].sort((a, b) => a.date.localeCompare(b.date)));\n        toast({ title: \"Anotacin Guardada\", description: `Nota para ${format(parseDateFns(newNoteData.date, 'yyyy-MM-dd', new Date()), 'PPP', { locale: es })} agregada.` });\n    }, [toast]);\n\n    const deleteScheduleNote = useCallback((noteId: string) => {\n        setScheduleNotes(prevNotes => prevNotes.filter(note => note.id !== noteId));\n        toast({ title: \"Anotacin Eliminada\", variant: 'destructive' });\n        setNoteToDeleteId(null); // Close the confirmation dialog after deletion\n    }, [toast]);\n\n    // Function to get notes for a specific date\n     const getNotesForDate = useCallback((date: Date): ScheduleNote[] => {\n         if (!date || !isValid(date)) return [];\n         const dateKey = format(date, 'yyyy-MM-dd');\n         return scheduleNotes.filter(note => note.date === dateKey);\n     }, [scheduleNotes]);\n\n    // Function to open the notes modal specifically for a date, filtering the notes\n    const handleOpenNotesModalForDate = (date: Date) => {\n        setNotesModalForDate(date); // Set the date context\n        setIsNotesModalOpen(true);\n    };\n\n    const weekDates = getWeekDates(currentDate);\n\n    const getScheduleForDate = useCallback((date: Date): ScheduleData => {\n        const key = format(date, 'yyyy-MM-dd');\n        const dayData = scheduleData[key];\n        const hydratedAssignments: { [departmentId: string]: ShiftAssignment[] } = {};\n\n        if (dayData && dayData.assignments) {\n             Object.keys(dayData.assignments).forEach(deptId => {\n                 hydratedAssignments[deptId] = (dayData.assignments[deptId] || []).map(assign => {\n                    const fullEmployee = employees.find(emp => emp.id === assign.employee?.id);\n                    if (fullEmployee) {\n                        return { ...assign, employee: fullEmployee };\n                    } else {\n                        console.warn(`Employee with ID ${assign.employee?.id || 'undefined'} not found for assignment ${assign.id}`);\n                         return { ...assign, employee: { id: assign.employee?.id || 'unknown', name: `(ID: ${assign.employee?.id || '??'})`, locationIds: [] } };\n                    }\n                 }).filter(assign => assign !== null);\n             });\n        }\n        return {\n            date: date,\n            assignments: hydratedAssignments\n        };\n    }, [scheduleData, employees]);\n\n\n    const filteredEmployees = useMemo(() => employees.filter(emp =>\n        Array.isArray(emp.locationIds) && emp.locationIds.includes(selectedLocationId)\n    ), [employees, selectedLocationId]);\n\n     // Filter templates based on selected location and current view mode\n     const filteredTemplates = useMemo(() => {\n          console.log(\"[Filter Memo] All templates in state:\", savedTemplates);\n          const templatesArray = Array.isArray(savedTemplates) ? savedTemplates : [];\n          const filtered = templatesArray.filter(temp => {\n              const locationMatch = temp.locationId === selectedLocationId;\n              const typeMatch = temp.type === viewMode; // Only show templates matching current view (day/week)\n              console.log(`[Filter Memo] Template ${temp.id} (${temp.name}): Loc Match=${locationMatch}, Type Match=${typeMatch}`);\n              return locationMatch && typeMatch;\n          });\n          console.log(`[Filter Memo] Filtered templates for loc ${selectedLocationId}, view ${viewMode}:`, filtered);\n          return filtered;\n     }, [savedTemplates, selectedLocationId, viewMode]); // Dependencies\n\n\n     const assignedEmployeeIdsForTargetDate = useMemo(() => {\n        const ids = new Set<string>();\n        const dateToUse = viewMode === 'day' ? targetDate : (shiftRequestContext?.date || null);\n\n        if (dateToUse) {\n            const dateKey = format(dateToUse, 'yyyy-MM-dd');\n            const daySchedule = scheduleData[dateKey];\n            if (daySchedule && daySchedule.assignments) {\n                Object.values(daySchedule.assignments).flat().forEach(assignment => {\n                    ids.add(assignment.employee.id);\n                });\n            }\n        }\n        return ids;\n    }, [scheduleData, targetDate, viewMode, shiftRequestContext]);\n\n    const availableEmployees = useMemo(() => {\n        // For week view D&D (desktop), show all filtered employees\n        if (viewMode === 'week' && !isMobile) {\n            return filteredEmployees;\n        }\n\n        // For day view or mobile week view (+ button flow)\n        const dateForFiltering = viewMode === 'day' ? targetDate : (shiftRequestContext?.date || null);\n\n        if (!dateForFiltering) {\n            return filteredEmployees; // No specific date context, show all for location\n        }\n\n        const dateKey = format(dateForFiltering, 'yyyy-MM-dd');\n        const assignedIdsOnDate = new Set<string>();\n        const daySchedule = scheduleData[dateKey];\n        if (daySchedule && daySchedule.assignments) {\n            Object.values(daySchedule.assignments).flat().forEach(assignment => {\n                assignedIdsOnDate.add(assignment.employee.id);\n            });\n        }\n         // Filter employees of the location that are NOT assigned on the specific date\n        return filteredEmployees.filter(emp => !assignedIdsOnDate.has(emp.id));\n\n    }, [filteredEmployees, scheduleData, targetDate, viewMode, shiftRequestContext, isMobile]); // Added isMobile\n\n\n    useEffect(() => {\n        if (!departmentFormData.locationId || departmentFormData.locationId !== selectedLocationId) {\n           setDepartmentFormData(prev => ({ ...prev, locationId: selectedLocationId }));\n        }\n    }, [selectedLocationId, departmentFormData.locationId]);\n\n     useEffect(() => {\n        if (!editingEmployee && selectedLocationId) {\n            setEmployeeFormData(prev => ({\n                ...prev,\n                locationIds: [selectedLocationId]\n            }));\n        }\n     }, [selectedLocationId, editingEmployee]);\n\n\n    // Filter departments based on selected location\n    const filteredDepartments = useMemo(() => {\n        return departments.filter(dept => dept.locationId === selectedLocationId);\n    }, [departments, selectedLocationId]);\n\n\n    const handleLocationChange = (locationId: string) => {\n        setSelectedLocationId(locationId);\n         setDepartmentFormData(prev => ({ ...prev, locationId: locationId }));\n          if (!editingEmployee) {\n             setEmployeeFormData(prev => ({\n                ...prev,\n                locationIds: [locationId]\n            }));\n          }\n    };\n\n    const handleOpenEmployeeSelectionModal = (departmentId: string, date: Date) => {\n         setEditingShift(null);\n         setShiftRequestContext({ departmentId, date });\n         setTargetDate(date); // Ensure targetDate is set for filtering available employees\n         setIsEmployeeSelectionModalOpen(true);\n    };\n\n    const handleEmployeeSelectedForShift = (employee: Employee) => {\n        if (!shiftRequestContext) return;\n        setSelectedEmployee(employee);\n        setIsEmployeeSelectionModalOpen(false);\n        setIsShiftModalOpen(true);\n    };\n\n    const handleOpenShiftModalForDrop = (employee: Employee, departmentId: string, date: Date) => {\n        setEditingShift(null);\n        setSelectedEmployee(employee);\n        setShiftRequestContext({ departmentId, date });\n        setIsShiftModalOpen(true);\n    };\n\n    const handleShiftClick = (assignment: ShiftAssignment, date: Date, departmentId: string) => {\n        setEditingShift({ assignment, date, departmentId });\n        setSelectedEmployee(assignment.employee);\n        setShiftRequestContext({ departmentId, date });\n        setIsShiftModalOpen(true);\n    };\n\n    const handleAddOrUpdateShift = (details: any) => {\n        const context = editingShift || shiftRequestContext;\n        const employeeForShift = editingShift?.assignment.employee || selectedEmployee;\n\n        if (!employeeForShift || !context) return;\n\n        const { departmentId, date } = context;\n        const dateKey = format(date, 'yyyy-MM-dd');\n\n        const newAssignmentId = `shift_${employeeForShift.id}_${dateKey}_${details.startTime.replace(':', '')}`;\n\n        const assignmentPayload: ShiftAssignment = {\n            id: editingShift?.assignment.id || newAssignmentId,\n            employee: employeeForShift,\n            startTime: details.startTime,\n            endTime: details.endTime,\n            includeBreak: details.includeBreak || false,\n            breakStartTime: details.includeBreak ? details.breakStartTime : undefined,\n            breakEndTime: details.includeBreak ? details.breakEndTime : undefined,\n        };\n\n        setScheduleData(prevData => {\n            const currentDayData = getScheduleForDate(date);\n            const departmentAssignments = currentDayData.assignments[departmentId] || [];\n\n            let updatedAssignments;\n            if (editingShift) {\n                updatedAssignments = departmentAssignments.map(a =>\n                    a.id === editingShift.assignment.id ? assignmentPayload : a\n                );\n            } else {\n                 const isAlreadyAssignedOnDate = Object.values(currentDayData.assignments)\n                                                .flat()\n                                                .some(a => a.employee.id === employeeForShift.id);\n\n                 if (isAlreadyAssignedOnDate) {\n                     toast({\n                         title: 'Asignacin Duplicada',\n                         description: `${employeeForShift.name} ya tiene un turno asignado para el ${format(date, 'PPP', { locale: es })}.`,\n                         variant: 'destructive',\n                     });\n                     return prevData;\n                 }\n                updatedAssignments = [...departmentAssignments, assignmentPayload];\n            }\n\n             const updatedDayData: ScheduleData = {\n                 ...currentDayData,\n                 date: date,\n                 assignments: {\n                     ...currentDayData.assignments,\n                     [departmentId]: updatedAssignments,\n                 },\n             };\n\n            return {\n                ...prevData,\n                [dateKey]: updatedDayData,\n            };\n        });\n        setIsShiftModalOpen(false);\n        setSelectedEmployee(null);\n        setShiftRequestContext(null);\n        setEditingShift(null);\n         toast({\n            title: editingShift ? 'Turno Actualizado' : 'Turno Agregado',\n            description: `Turno para ${employeeForShift.name} el ${format(date, 'PPP', { locale: es })} ${editingShift ? 'actualizado.' : 'agregado.'}`,\n        });\n    };\n\n    const handleRemoveShift = (dateKey: string, departmentId: string, assignmentId: string) => {\n        setScheduleData(prevData => {\n            const dayData = prevData[dateKey];\n            if (!dayData) return prevData;\n\n            const departmentAssignments = (dayData.assignments[departmentId] || []).filter(a => a.id !== assignmentId);\n\n            const newAssignments = { ...dayData.assignments, [departmentId]: departmentAssignments };\n\n            // Optional: Clean up empty department arrays\n            if (newAssignments[departmentId]?.length === 0) {\n                delete newAssignments[departmentId];\n            }\n\n             // Optional: Clean up day data if no assignments left\n             const remainingAssignmentsCount = Object.values(newAssignments).reduce((sum, dept) => sum + dept.length, 0);\n             if (remainingAssignmentsCount === 0) {\n                 const updatedData = { ...prevData };\n                 delete updatedData[dateKey];\n                 return updatedData;\n             }\n\n\n            return {\n                ...prevData,\n                [dateKey]: {\n                    ...dayData,\n                    assignments: newAssignments,\n                },\n            };\n        });\n         toast({ title: 'Turno Eliminado', variant: 'destructive' });\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { over, active } = event;\n\n        if (isMobile || !isClient || !over || !active) return; // Ignore drag on mobile, ensure client side\n\n        const employeeId = active.id as string;\n        const targetData = over.data.current as { type: string; id: string; date?: string };\n\n        if (!targetData || targetData.type !== 'department' || !targetData.date) {\n            console.warn(\"Invalid drop target data:\", targetData);\n            return;\n        }\n\n        const departmentId = targetData.id;\n        const dropDate = parseISO(targetData.date);\n\n        const employee = employees.find(emp => emp.id === employeeId);\n        if (!employee) return;\n\n        // Check if employee is already assigned on this specific date\n        const dateKey = format(dropDate, 'yyyy-MM-dd');\n        const daySchedule = scheduleData[dateKey];\n        if (daySchedule && daySchedule.assignments) {\n             const isAlreadyAssignedOnDate = Object.values(daySchedule.assignments)\n                                            .flat()\n                                            .some(assignment => assignment.employee.id === employeeId);\n             if (isAlreadyAssignedOnDate) {\n                 toast({\n                     title: 'Asignacin Duplicada',\n                     description: `${employee.name} ya tiene un turno asignado para el ${format(dropDate, 'PPP', { locale: es })}.`,\n                     variant: 'destructive',\n                 });\n                 return; // Prevent assigning again on the same day\n             }\n        }\n        handleOpenShiftModalForDrop(employee, departmentId, dropDate);\n    };\n\n\n    // CRUD Handlers\n    const handleOpenLocationModal = (location: Location | null) => {\n        setEditingLocation(location);\n        setLocationFormData({ name: location?.name || '' });\n        setIsLocationModalOpen(true);\n    };\n\n    const handleSaveLocation = () => {\n        const name = locationFormData.name.trim();\n        if (!name) {\n            toast({ title: 'Nombre Invlido', description: 'El nombre de la sede no puede estar vaco.', variant: 'destructive' });\n            return;\n        }\n        if (editingLocation) {\n            setLocations(locations.map(loc => loc.id === editingLocation.id ? { ...loc, name } : loc));\n             toast({ title: 'Sede Actualizada', description: `Sede \"${name}\" actualizada.` });\n        } else {\n             const newLocation = { id: `loc-${Date.now()}`, name };\n            setLocations([...locations, newLocation]);\n            toast({ title: 'Sede Agregada', description: `Sede \"${name}\" agregada.` });\n            // If it's the first location or none was selected, select the new one\n            if (locations.length === 0 || !selectedLocationId) {\n                 setSelectedLocationId(newLocation.id);\n            }\n        }\n        setIsLocationModalOpen(false);\n        setEditingLocation(null);\n    };\n\n    const handleOpenDepartmentModal = (department: Department | null) => {\n        setEditingDepartment(department);\n        const iconName = department ? Object.keys(iconMap).find(key => iconMap[key] === department.icon) : undefined;\n        setDepartmentFormData({\n            name: department?.name || '',\n            locationId: department?.locationId || selectedLocationId,\n            iconName: iconName\n        });\n        setIsDepartmentModalOpen(true);\n    };\n\n    const handleSaveDepartment = () => {\n         const name = departmentFormData.name.trim();\n         const locationId = departmentFormData.locationId;\n         const iconName = departmentFormData.iconName;\n        if (!name || !locationId) {\n            toast({ title: 'Datos Incompletos', description: 'El nombre y la sede del departamento son requeridos.', variant: 'destructive' });\n            return;\n        }\n         const icon = iconName ? iconMap[iconName] : Building; // Default to Building icon if none selected\n\n        if (editingDepartment) {\n            setDepartments(departments.map(dep => dep.id === editingDepartment.id ? { ...dep, name, locationId, icon, iconName } : dep));\n             toast({ title: 'Departamento Actualizado', description: `Departamento \"${name}\" actualizado.` });\n        } else {\n             const newDepartment = { id: `dep-${Date.now()}`, name, locationId, icon, iconName };\n            setDepartments([...departments, newDepartment]);\n            toast({ title: 'Departamento Agregado', description: `Departamento \"${name}\" agregado.` });\n        }\n        setIsDepartmentModalOpen(false);\n        setEditingDepartment(null);\n    };\n\n    const handleOpenEmployeeModal = (employee: Employee | null) => {\n        setEditingEmployee(employee);\n        // Ensure locationIds is always initialized as an array\n        const initialLocationIds = Array.isArray(employee?.locationIds) ? employee.locationIds : (selectedLocationId ? [selectedLocationId] : []);\n        setEmployeeFormData({\n            id: employee?.id || '',\n            name: employee?.name || '',\n            locationIds: initialLocationIds\n        });\n        setIsEmployeeModalOpen(true);\n    };\n\n    const handleToggleEmployeeLocation = (locationId: string) => {\n        setEmployeeFormData(prev => {\n            const currentIds = Array.isArray(prev.locationIds) ? prev.locationIds : [];\n            let newLocationIds;\n            if (currentIds.includes(locationId)) {\n                // Prevent removing the last location ID\n                newLocationIds = currentIds.length > 1 ? currentIds.filter(id => id !== locationId) : currentIds;\n                 if (newLocationIds.length === 0 && currentIds.length > 0) {\n                    toast({ title: \"Validacin\", description: \"El colaborador debe estar asignado al menos a una sede.\", variant: \"destructive\" });\n                    return prev; // Return previous state if trying to remove the last one\n                }\n            } else {\n                newLocationIds = [...currentIds, locationId];\n            }\n            return { ...prev, locationIds: newLocationIds };\n        });\n    };\n\n\n    const handleSaveEmployee = () => {\n         const id = employeeFormData.id.trim();\n         const name = employeeFormData.name.trim();\n         // Ensure locationIds is an array and has at least one selection, default to selectedLocationId if somehow empty\n         const locationIds = Array.isArray(employeeFormData.locationIds) && employeeFormData.locationIds.length > 0\n                             ? employeeFormData.locationIds\n                             : (selectedLocationId ? [selectedLocationId] : []);\n\n          if (!id || !name) { // Removed locationIds check here, handled below\n             toast({ title: 'Datos Incompletos', description: 'El ID y el nombre del colaborador son requeridos.', variant: 'destructive' });\n             return;\n          }\n           if (locationIds.length === 0) {\n               toast({ title: 'Sede Requerida', description: 'Debes asignar el colaborador al menos a una sede.', variant: 'destructive' });\n               return;\n           }\n\n         // Check for duplicate ID only if adding a new employee\n         if (!editingEmployee) {\n             const isDuplicateId = employees.some(emp => emp.id === id);\n             if (isDuplicateId) {\n                 toast({ title: 'ID Duplicado', description: `El ID \"${id}\" ya est en uso por otro colaborador.`, variant: 'destructive' });\n                 return;\n             }\n         }\n\n         const updatedEmployeeData: Employee = { id, name, locationIds };\n\n        if (editingEmployee) {\n            // Update existing employee\n            setEmployees(employees.map(emp => emp.id === editingEmployee.id ? updatedEmployeeData : emp));\n             toast({ title: 'Colaborador Actualizado', description: `Colaborador \"${name}\" (ID: ${id}) actualizado.` });\n             // Update employee details within existing schedule assignments\n             setScheduleData(prevSchedule => {\n                const updatedSchedule = { ...prevSchedule };\n                Object.keys(updatedSchedule).forEach(dateKey => {\n                    Object.keys(updatedSchedule[dateKey].assignments).forEach(deptId => {\n                        updatedSchedule[dateKey].assignments[deptId] = updatedSchedule[dateKey].assignments[deptId].map(assignment => {\n                            if (assignment.employee.id === id) {\n                                // Update the employee object within the assignment\n                                return { ...assignment, employee: updatedEmployeeData };\n                            }\n                            return assignment;\n                        });\n                    });\n                });\n                return updatedSchedule;\n             });\n        } else {\n            // Add new employee\n            const newEmployee = updatedEmployeeData;\n            setEmployees(prev => [...prev, newEmployee]);\n             toast({ title: 'Colaborador Agregado', description: `Colaborador \"${name}\" (ID: ${id}) agregado.` });\n        }\n        setIsEmployeeModalOpen(false);\n        setEditingEmployee(null); // Reset editing state\n    };\n\n\n     // Confirm delete for locations, departments, employees\n     const confirmDeleteItem = (type: 'location' | 'department' | 'employee', id: string, name: string) => {\n        setItemToDelete({ type, id, name });\n     };\n\n    const handleDeleteItem = () => {\n        if (!itemToDelete) return;\n\n        try {\n            let message = '';\n            switch (itemToDelete.type) {\n                case 'location':\n                    setLocations(prevLocs => {\n                        const remaining = prevLocs.filter(loc => loc.id !== itemToDelete.id);\n                        // If the deleted location was selected, select the first remaining one or clear selection\n                        if (selectedLocationId === itemToDelete.id) {\n                           setSelectedLocationId(remaining.length > 0 ? remaining[0].id : '');\n                        }\n                        return remaining;\n                    });\n                    // Find departments associated with the deleted location\n                    const depsToDelete = departments.filter(dep => dep.locationId === itemToDelete.id).map(d => d.id);\n                    // Remove associated departments\n                    setDepartments(prevDeps => prevDeps.filter(dep => dep.locationId !== itemToDelete.id));\n                    // Remove location association from employees, filter out employees with no locations left\n                    setEmployees(prevEmps => prevEmps.map(emp => ({\n                        ...emp,\n                        locationIds: emp.locationIds.filter(locId => locId !== itemToDelete.id)\n                    })).filter(emp => emp.locationIds.length > 0)); // Remove employees with no locations left\n\n                    // Remove associated templates\n                    setSavedTemplates(prevTemplates => prevTemplates.filter(tpl => tpl.locationId !== itemToDelete.id));\n\n\n                    // Clean up schedule data: remove assignments in departments of the deleted location\n                     setScheduleData(prevSchedule => {\n                         const updatedSchedule = { ...prevSchedule };\n                         Object.keys(updatedSchedule).forEach(dateKey => {\n                             let dayHasOtherAssignments = false;\n                             const currentAssignments = updatedSchedule[dateKey].assignments;\n                             const newAssignments: { [deptId: string]: ShiftAssignment[] } = {};\n                             Object.keys(currentAssignments).forEach(deptId => {\n                                 if (!depsToDelete.includes(deptId)) { // Keep assignments from other departments\n                                     newAssignments[deptId] = currentAssignments[deptId];\n                                     if (currentAssignments[deptId].length > 0) {\n                                         dayHasOtherAssignments = true;\n                                     }\n                                 }\n                             });\n                              // Update assignments or delete day entry if empty\n                              if (Object.keys(newAssignments).length > 0) {\n                                  updatedSchedule[dateKey].assignments = newAssignments;\n                              } else {\n                                   delete updatedSchedule[dateKey];\n                              }\n                         });\n                         return updatedSchedule;\n                     });\n\n                    message = `Sede \"${itemToDelete.name}\" y sus datos asociados eliminados.`;\n                    break;\n                case 'department':\n                    setDepartments(prevDeps => prevDeps.filter(dep => dep.id !== itemToDelete.id));\n                    // Remove assignments for this department from schedule data\n                     const updatedScheduleDept = { ...scheduleData };\n                     Object.keys(updatedScheduleDept).forEach(dateKey => {\n                          if (updatedScheduleDept[dateKey].assignments[itemToDelete.id]) {\n                              delete updatedScheduleDept[dateKey].assignments[itemToDelete.id];\n                              // If no assignments left for the day, remove the day entry\n                              if (Object.keys(updatedScheduleDept[dateKey].assignments).length === 0) {\n                                   delete updatedScheduleDept[dateKey];\n                              }\n                          }\n                     });\n                     setScheduleData(updatedScheduleDept);\n\n                     // Remove department from templates\n                     setSavedTemplates(prevTemplates => prevTemplates.map(tpl => {\n                         if (tpl.assignments && tpl.assignments[itemToDelete.id]) {\n                             const newAssignments = { ...tpl.assignments };\n                             delete newAssignments[itemToDelete.id];\n                             return { ...tpl, assignments: newAssignments };\n                         }\n                         return tpl;\n                     }));\n\n                     message = `Departamento \"${itemToDelete.name}\" eliminado.`;\n                    break;\n                case 'employee':\n                    setEmployees(prevEmps => prevEmps.filter(emp => emp.id !== itemToDelete.id));\n                    // Remove assignments for this employee from schedule data\n                     const updatedScheduleEmp = { ...scheduleData };\n                     Object.keys(updatedScheduleEmp).forEach(dateKey => {\n                          let dayChanged = false;\n                          Object.keys(updatedScheduleEmp[dateKey].assignments).forEach(deptId => {\n                              const originalLength = updatedScheduleEmp[dateKey].assignments[deptId].length;\n                              updatedScheduleEmp[dateKey].assignments[deptId] = updatedScheduleEmp[dateKey].assignments[deptId].filter(a => a.employee.id !== itemToDelete.id);\n                              if (updatedScheduleEmp[dateKey].assignments[deptId].length < originalLength) {\n                                  dayChanged = true;\n                              }\n                              // If department becomes empty, remove it\n                              if (updatedScheduleEmp[dateKey].assignments[deptId].length === 0) {\n                                  delete updatedScheduleEmp[dateKey].assignments[deptId];\n                              }\n                          });\n                           // If day becomes empty, remove it\n                           if (dayChanged && Object.keys(updatedScheduleEmp[dateKey].assignments).length === 0) {\n                               delete updatedScheduleEmp[dateKey];\n                           }\n                     });\n                     setScheduleData(updatedScheduleEmp);\n\n                     // Remove employee assignments from templates\n                     setSavedTemplates(prevTemplates => prevTemplates.map(tpl => {\n                         const newAssignments = { ...tpl.assignments };\n                         let templateChanged = false;\n                         Object.keys(newAssignments).forEach(key => { // key can be dateKey or deptId\n                             if (tpl.type === 'week') {\n                                 // Handle weekly template structure\n                                 const dailyAssignments = newAssignments[key] as DailyAssignments;\n                                 Object.keys(dailyAssignments).forEach(deptId => {\n                                     const originalLength = dailyAssignments[deptId].length;\n                                     dailyAssignments[deptId] = dailyAssignments[deptId].filter(a => a.employee.id !== itemToDelete.id);\n                                     if (dailyAssignments[deptId].length < originalLength) templateChanged = true;\n                                     if (dailyAssignments[deptId].length === 0) delete dailyAssignments[deptId];\n                                 });\n                                 if (Object.keys(dailyAssignments).length === 0) delete newAssignments[key]; // Clean empty day\n\n                             } else { // Day template structure\n                                const deptAssignments = newAssignments[key] as ShiftAssignment[];\n                                const originalLength = deptAssignments.length;\n                                newAssignments[key] = deptAssignments.filter(a => a.employee.id !== itemToDelete.id);\n                                if (newAssignments[key].length < originalLength) templateChanged = true;\n                                if (newAssignments[key].length === 0) delete newAssignments[key]; // Clean empty department\n                             }\n                         });\n                         return templateChanged ? { ...tpl, assignments: newAssignments } : tpl;\n                     }));\n\n                     message = `Colaborador \"${itemToDelete.name}\" eliminado.`;\n                     break;\n             }\n             toast({ title: 'Elemento Eliminado', description: message, variant: 'destructive' });\n         } catch (error) {\n              console.error(`Error deleting item type ${itemToDelete.type}:`, error);\n              toast({ title: 'Error al Eliminar', description: 'No se pudo completar la eliminacin.', variant: 'destructive' });\n         } finally {\n             setItemToDelete(null); // Close the dialog\n         }\n     };\n\n\n     const handlePreviousWeek = () => {\n        setCurrentDate(prevDate => subWeeks(prevDate, 1));\n     };\n\n     const handleNextWeek = () => {\n        setCurrentDate(prevDate => addWeeks(prevDate, 1));\n     };\n\n    const handleSaveSchedule = () => {\n        // Since data is saved via useEffect, this button might just provide user feedback\n        toast({ title: 'Horario Guardado', description: 'Los cambios en el horario se guardan automticamente.' });\n        // Optionally trigger a manual save if needed, though useEffect should handle it\n        // localStorage.setItem(SCHEDULE_DATA_KEY, JSON.stringify(scheduleData)); // Example manual save\n    };\n\n\n     const handleDuplicateDay = (sourceDate: Date) => {\n         const sourceDayKey = format(sourceDate, 'yyyy-MM-dd');\n         const nextDayDate = addDays(sourceDate, 1);\n         const nextDayKey = format(nextDayDate, 'yyyy-MM-dd');\n         const sourceSchedule = scheduleData[sourceDayKey];\n\n         // Check if source day has any assignments\n         if (!sourceSchedule || Object.keys(sourceSchedule.assignments).length === 0 || Object.values(sourceSchedule.assignments).every(dept => dept.length === 0)) {\n             toast({ title: 'Nada que Duplicar', description: `No hay turnos asignados para el ${format(sourceDate, 'PPP', { locale: es })}.`, variant: 'default' });\n             return;\n         }\n\n         // Create a deep copy of the assignments to avoid reference issues\n         const duplicatedAssignments = JSON.parse(JSON.stringify(sourceSchedule.assignments));\n         // Update assignment IDs and potentially re-fetch full employee objects if needed\n         Object.keys(duplicatedAssignments).forEach(deptId => {\n             duplicatedAssignments[deptId].forEach((assign: ShiftAssignment) => {\n                 // Generate a new unique ID for the duplicated assignment\n                 assign.id = `shift_${assign.employee.id}_${nextDayKey}_${assign.startTime.replace(':', '')}_${Math.random().toString(36).substring(2, 7)}`;\n                  // Ensure the employee object is the full object, not just the ID reference if that was stored\n                  const fullEmployee = employees.find(emp => emp.id === assign.employee.id);\n                  if (fullEmployee) {\n                      assign.employee = fullEmployee;\n                  } else {\n                       // Handle case where employee might not be found (e.g., if deleted between planning and duplicating)\n                       console.warn(`Employee ${assign.employee.id} not found during duplication.`);\n                       assign.employee = { id: assign.employee.id, name: `(ID: ${assign.employee.id})`, locationIds: [] }; // Placeholder\n                  }\n             });\n         });\n\n         // Update the schedule data state\n         setScheduleData(prevData => ({\n             ...prevData,\n             [nextDayKey]: {\n                 date: nextDayDate,\n                 assignments: duplicatedAssignments,\n             },\n         }));\n\n         // If in day view, switch to the next day\n         if (viewMode === 'day') {\n             setTargetDate(nextDayDate);\n         }\n\n         toast({ title: 'Horario Duplicado', description: `El horario del ${format(sourceDate, 'dd/MM')} se duplic al ${format(nextDayDate, 'dd/MM')}.` });\n     };\n\n    const handleDuplicateWeek = () => {\n        const nextWeekStartDate = addWeeks(startOfWeek(currentDate, { weekStartsOn: 1 }), 1);\n        let updatedData = { ...scheduleData };\n        let duplicatedCount = 0;\n\n        weekDates.forEach(sourceDate => {\n            const sourceDayKey = format(sourceDate, 'yyyy-MM-dd');\n            const sourceDaySchedule = scheduleData[sourceDayKey];\n            // Check if there are assignments to duplicate for the source day\n            if (sourceDaySchedule && Object.keys(sourceDaySchedule.assignments).length > 0 && Object.values(sourceDaySchedule.assignments).some(dept => dept.length > 0)) {\n                 // Calculate target date based on the day of the week\n                 const dayOfWeek = getDay(sourceDate); // 0=Sun, 1=Mon,...\n                 const targetDateIndex = (dayOfWeek === 0 ? 6 : dayOfWeek - 1); // Adjust index for Monday start (0=Mon, 6=Sun)\n                 if (targetDateIndex < 0 || targetDateIndex >= 7) {\n                     console.error(\"Invalid target date index calculated:\", targetDateIndex, \"for date:\", sourceDate);\n                     return; // Skip this day if index calculation fails\n                 }\n                const targetDate = addDays(nextWeekStartDate, targetDateIndex);\n                const targetDayKey = format(targetDate, 'yyyy-MM-dd');\n\n                // Deep copy assignments and update IDs/employee objects\n                const duplicatedAssignments = JSON.parse(JSON.stringify(sourceDaySchedule.assignments));\n                Object.keys(duplicatedAssignments).forEach(deptId => {\n                     duplicatedAssignments[deptId].forEach((assign: ShiftAssignment) => {\n                         assign.id = `shift_${assign.employee.id}_${targetDayKey}_${assign.startTime.replace(':', '')}_${Math.random().toString(36).substring(2, 7)}`;\n                          const fullEmployee = employees.find(emp => emp.id === assign.employee.id); // Use assign here\n                          assign.employee = fullEmployee || { id: assign.employee.id, name: `(ID: ${assign.employee.id})`, locationIds: [] }; // Handle missing employee\n                     });\n                });\n\n                // Assign duplicated data to the target date\n                updatedData[targetDayKey] = {\n                    date: targetDate,\n                    assignments: duplicatedAssignments,\n                };\n                duplicatedCount++;\n            }\n        });\n\n        if (duplicatedCount > 0) {\n            setScheduleData(updatedData); // Update the state with all duplicated days\n            setCurrentDate(nextWeekStartDate); // Move view to the next week\n            toast({ title: 'Semana Duplicada', description: `El horario de esta semana (${duplicatedCount} da(s)) se duplic a la siguiente.` });\n        } else {\n            toast({ title: 'Nada que Duplicar', description: 'No hay turnos en la semana actual para duplicar.', variant: 'default' });\n        }\n    };\n\n\n     const handleConfirmClearDay = (dateToClear: Date) => {\n         setClearingDate(dateToClear); // Set the date to be cleared, triggers the AlertDialog\n     };\n\n     const handleClearDay = () => {\n         if (!clearingDate) return;\n         const dateKey = format(clearingDate, 'yyyy-MM-dd');\n\n         setScheduleData(prevData => {\n             const updatedData = { ...prevData };\n             // Remove the assignments for the specific day, or remove the day entry entirely\n             if (updatedData[dateKey]) {\n                  delete updatedData[dateKey];\n             }\n             return updatedData;\n         });\n         setClearingDate(null); // Close the dialog\n         toast({ title: 'Horario Limpiado', description: `Se eliminaron todos los turnos para el ${format(clearingDate, 'PPP', { locale: es })}.`, variant: 'destructive' });\n     };\n\n     // --- Clear Week Handler ---\n     const handleClearWeek = () => {\n         const weekStartDate = startOfWeek(currentDate, { weekStartsOn: 1 });\n         const weekEndDate = endOfWeek(currentDate, { weekStartsOn: 1 });\n         const weekStartDateFormatted = format(weekStartDate, 'dd/MM/yy');\n         const weekEndDateFormatted = format(weekEndDate, 'dd/MM/yy');\n\n         setScheduleData(prevData => {\n             const updatedData = { ...prevData };\n             weekDates.forEach(date => {\n                 const dateKey = format(date, 'yyyy-MM-dd');\n                 if (updatedData[dateKey]) {\n                     delete updatedData[dateKey];\n                 }\n             });\n             return updatedData;\n         });\n         setClearingWeek(false); // Close the confirmation dialog\n         toast({\n             title: 'Semana Limpiada',\n             description: `Se eliminaron todos los turnos de la semana del ${weekStartDateFormatted} al ${weekEndDateFormatted}.`,\n             variant: 'destructive'\n         });\n     };\n\n\n      // --- Template Handling Functions ---\n\n      const handleSaveTemplate = (name: string) => {\n        if (!name.trim() || !selectedLocationId) {\n            toast({ title: 'Error', description: 'Se requiere un nombre para el template y una sede seleccionada.', variant: 'destructive' });\n            return;\n        }\n         setIsSavingTemplate(true);\n\n        const templateType = viewMode; // 'day' or 'week'\n        let assignmentsToSave: DailyAssignments | WeeklyAssignments = {};\n\n        try {\n            if (templateType === 'day') {\n                 const dayKey = format(targetDate, 'yyyy-MM-dd');\n                 const daySchedule = scheduleData[dayKey];\n                 if (daySchedule && daySchedule.assignments) {\n                     // Deep copy and format for DailyAssignments\n                     assignmentsToSave = JSON.parse(JSON.stringify(daySchedule.assignments));\n                      Object.keys(assignmentsToSave).forEach(deptId => {\n                          assignmentsToSave[deptId] = (assignmentsToSave[deptId] as ShiftAssignment[]).map(({ id, employee, ...rest }) => ({ ...rest, employee: { id: employee.id } }));\n                      });\n                 } else {\n                     toast({ title: 'Template Vaco', description: 'No hay turnos asignados para guardar en este da.', variant: 'default' });\n                     setIsSavingTemplate(false);\n                     return;\n                 }\n            } else { // week\n                const weeklyAssignments: WeeklyAssignments = {};\n                 weekDates.forEach(date => {\n                     const dayKey = format(date, 'yyyy-MM-dd');\n                     const daySchedule = scheduleData[dayKey];\n                     if (daySchedule && daySchedule.assignments && Object.keys(daySchedule.assignments).length > 0) {\n                          // Deep copy and format for DailyAssignments structure inside WeeklyAssignments\n                          const dailyAssignmentsFormatted: DailyAssignments = {};\n                          const assignmentsRaw = JSON.parse(JSON.stringify(daySchedule.assignments));\n                           Object.keys(assignmentsRaw).forEach(deptId => {\n                               dailyAssignmentsFormatted[deptId] = (assignmentsRaw[deptId] as ShiftAssignment[]).map(({ id, employee, ...rest }) => ({ ...rest, employee: { id: employee.id } }));\n                           });\n                          weeklyAssignments[dayKey] = dailyAssignmentsFormatted;\n                     }\n                 });\n                 if (Object.keys(weeklyAssignments).length === 0) {\n                    toast({ title: 'Template Vaco', description: 'No hay turnos asignados para guardar en esta semana.', variant: 'default' });\n                    setIsSavingTemplate(false);\n                    return;\n                 }\n                 assignmentsToSave = weeklyAssignments;\n            }\n\n            const newTemplate: ScheduleTemplate = {\n                id: `${SCHEDULE_TEMPLATES_KEY}_${Date.now()}`, // Use constant in key, ensure uniqueness\n                name: name.trim(),\n                locationId: selectedLocationId,\n                type: templateType,\n                assignments: assignmentsToSave,\n                createdAt: new Date(),\n            };\n\n            // Update the state by adding the new template\n             setSavedTemplates(prev => [...prev, newTemplate].sort((a, b) => {\n                  const dateA = a.createdAt instanceof Date ? a.createdAt.getTime() : 0;\n                  const dateB = b.createdAt instanceof Date ? b.createdAt.getTime() : 0;\n                  return dateB - dateA; // Sort newest first\n             }));\n\n\n            toast({ title: 'Template Guardado', description: `Template \"${newTemplate.name}\" guardado.` });\n            setTemplateToSaveName(''); // Clear input field\n         } catch (error) {\n             console.error(\"Error saving template:\", error);\n             toast({ title: 'Error al Guardar', description: 'No se pudo guardar el template.', variant: 'destructive' });\n         } finally {\n             setIsSavingTemplate(false);\n         }\n     };\n\n     const handleLoadTemplate = useCallback((templateId: string) => {\n        console.log(\"Intentando cargar template con ID:\", templateId);\n        // Find template directly from state\n        const templateToLoad = savedTemplates.find(t => t.id === templateId);\n\n        if (!templateToLoad) {\n            console.error(\"Template no encontrado en el estado:\", templateId);\n            toast({ title: \"Error\", description: \"No se encontr el template seleccionado.\", variant: \"destructive\" });\n            return;\n        }\n\n         // Check if template type matches current view mode\n        if (templateToLoad.type !== viewMode) {\n            const requiredView = templateToLoad.type === 'week' ? 'semanal' : 'diaria';\n            toast({\n                title: 'Vista Incorrecta',\n                description: `El template \"${templateToLoad.name}\" es ${requiredView}. Cambia a la vista ${requiredView} para cargarlo.`,\n                variant: 'destructive',\n                duration: 5000,\n            });\n            return;\n        }\n\n        console.log(\"Template encontrado:\", templateToLoad);\n        console.log(\"Assignments a cargar:\", templateToLoad.assignments);\n\n        try {\n            setScheduleData(currentScheduleData => {\n                const updatedSchedule = { ...currentScheduleData };\n                let assignmentsLoadedCount = 0;\n\n                 // --- Lgica de Aplicacin ---\n                 const applyAssignments = (targetDateKey: string, dailyAssignments: DailyAssignments) => {\n                     const existingDayData = updatedSchedule[targetDateKey] || { date: parseDateFns(targetDateKey, 'yyyy-MM-dd', new Date()), assignments: {} };\n                     const newDayAssignments: { [deptId: string]: ShiftAssignment[] } = {};\n                     let dayLoadedCount = 0;\n\n                     Object.keys(dailyAssignments).forEach(deptId => {\n                         // Check if department exists in current filtered departments\n                         const departmentExists = filteredDepartments.some(d => d.id === deptId);\n                         if (!departmentExists) {\n                              console.warn(`Departamento ${deptId} del template no existe en la sede actual, omitiendo asignaciones.`);\n                              return; // Skip assignments for non-existent department\n                         }\n\n                         newDayAssignments[deptId] = (dailyAssignments[deptId] || []).map((templateAssign) => {\n                             const fullEmployee = employees.find(emp => emp.id === templateAssign.employee.id);\n                             if (!fullEmployee || !filteredEmployees.some(fe => fe.id === fullEmployee.id)) {\n                                 console.warn(`Empleado ${templateAssign.employee.id} del template no encontrado o no pertenece a la sede actual, omitiendo asignacin.`);\n                                 return null; // Skip assignment if employee not found or not in location\n                             }\n                             dayLoadedCount++;\n                              return {\n                                  ...templateAssign,\n                                  id: `shift_${fullEmployee.id}_${targetDateKey}_${templateAssign.startTime.replace(':', '')}_${Math.random().toString(36).substring(2, 7)}`,\n                                  employee: fullEmployee, // Use full employee object\n                              };\n                         }).filter((a): a is ShiftAssignment => a !== null); // Type guard to filter out nulls\n\n                         // Clean up department if no valid assignments were loaded for it\n                          if (newDayAssignments[deptId]?.length === 0) {\n                              delete newDayAssignments[deptId];\n                          }\n                     });\n\n                     // Update or remove the day's data based on loaded assignments\n                     if (Object.keys(newDayAssignments).length > 0) {\n                          updatedSchedule[targetDateKey] = { ...existingDayData, assignments: newDayAssignments };\n                          assignmentsLoadedCount += dayLoadedCount; // Add valid assignments loaded for this day\n                     } else {\n                         // If no valid assignments were loaded for this day, potentially clear existing ones?\n                         // Or keep existing? For now, let's just not update if nothing valid loaded.\n                          console.log(`No valid assignments loaded for ${targetDateKey}, keeping existing data.`);\n                     }\n                 };\n\n\n                if (templateToLoad.type === 'day' && viewMode === 'day') {\n                    const targetDayKey = format(targetDate, 'yyyy-MM-dd');\n                    applyAssignments(targetDayKey, templateToLoad.assignments as DailyAssignments);\n                } else if (templateToLoad.type === 'week' && viewMode === 'week') {\n                     const templateWeekAssignments = templateToLoad.assignments as WeeklyAssignments;\n                     const weekStartsOnMonday = startOfWeek(currentDate, { weekStartsOn: 1 });\n                    // Map assignments based on day of the week relative to the current view\n                    Object.keys(templateWeekAssignments).forEach(templateDateKey => {\n                        const templateDate = parseISO(templateDateKey); // Parse template date string\n                        if (isValid(templateDate)) {\n                             const dayOfWeekIndex = (getDay(templateDate) + 6) % 7; // 0=Mon, 6=Sun\n                             const targetApplyDate = addDays(weekStartsOnMonday, dayOfWeekIndex);\n                             const targetApplyDateKey = format(targetApplyDate, 'yyyy-MM-dd');\n                             applyAssignments(targetApplyDateKey, templateWeekAssignments[templateDateKey]);\n                        } else {\n                             console.warn(`Invalid date key found in weekly template: ${templateDateKey}`);\n                        }\n                    });\n                } else {\n                    // This case should technically be prevented by the initial check, but good to have a fallback.\n                    console.error(\"Mismatch between template type and view mode during load application.\");\n                    toast({ title: \"Error Interno\", description: \"No se pudo aplicar el template debido a un error de tipo.\", variant: \"destructive\" });\n                    return currentScheduleData; // Return original data on error\n                }\n\n                console.log(\"Nuevo estado del planificador:\", updatedSchedule);\n                 toast({\n                    title: \"Template Aplicado\",\n                    description: `Se aplicaron ${assignmentsLoadedCount} asignaciones de '${templateToLoad.name}'.`\n                 });\n                return updatedSchedule; // Return the modified schedule\n            });\n        } catch (error) {\n            console.error(\"Error applying template:\", error);\n            toast({ title: 'Error al Aplicar', description: 'Ocurri un error al aplicar las asignaciones del template.', variant: 'destructive' });\n        }\n        // Optionally close the modal\n         setIsTemplateModalOpen(false);\n\n    }, [savedTemplates, toast, viewMode, targetDate, setScheduleData, employees, filteredDepartments, filteredEmployees, currentDate]); // Added filteredDepartments and filteredEmployees\n\n\n      const handleDeleteTemplate = (templateId: string) => {\n         try {\n             // Find the index of the template to remove\n             const templateIndex = savedTemplates.findIndex(t => t.id === templateId);\n             if (templateIndex === -1) {\n                 toast({ title: 'Error', description: 'Template no encontrado para eliminar.', variant: 'destructive' });\n                 return;\n             }\n             // Create a new array without the template\n             const updatedTemplates = [...savedTemplates];\n             updatedTemplates.splice(templateIndex, 1);\n             // Update the state immediately\n             setSavedTemplates(updatedTemplates);\n             // Note: The useEffect for saving templates will handle saving the updated array to localStorage.\n             toast({ title: 'Template Eliminado', variant: 'destructive' });\n             setTemplateToDeleteId(null); // Close confirmation dialog if open\n         } catch (error) {\n             console.error(\"Error deleting template:\", error);\n             toast({ title: 'Error al Eliminar', description: 'No se pudo eliminar el template.', variant: 'destructive' });\n             setTemplateToDeleteId(null);\n         }\n     };\n\n      const handleConfirmDeleteTemplate = (templateId: string) => {\n          setTemplateToDeleteId(templateId); // Open confirmation dialog\n      };\n\n    // --- End Template Handling ---\n\n\n     const isHoliday = useCallback((date: Date | null | undefined): boolean => {\n        if (!date || !isValid(date)) return false;\n        const dateStr = format(date, 'yyyy-MM-dd');\n        return holidaySet.has(dateStr);\n    }, [holidaySet]);\n\n    const handleNotesChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setNotes(event.target.value);\n    };\n\n    const handleSaveNotes = () => {\n        toast({ title: 'Notas Guardadas', description: 'Tus notas han sido guardadas localmente.' });\n    };\n\n\n    const DndWrapper: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n        // Disable DndContext completely on mobile\n        if (isMobile || !isClient) {\n            return <>{children}</>;\n        }\n        // Render DndContext only on desktop and client-side\n        return (\n            <DndContext collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\n                {children}\n            </DndContext>\n        );\n    };\n\n\n    const handleExportPDF = () => {\n        const locationName = locations.find(l => l.id === selectedLocationId)?.name || selectedLocationId;\n        // Prepare data specifically for the PDF export function\n        const dataForPDF = {\n            locationName,\n            weekDates,\n            departments: filteredDepartments, // Use filtered departments for the current location\n            employees: employees, // Pass the full list (the PDF function might filter or group)\n            scheduleData,\n            getScheduleForDate: (date: Date) => getScheduleForDate(date),\n            calculateShiftDuration, // Pass the calculation function\n        };\n\n        try {\n            exportScheduleToPDF(dataForPDF); // Call the export function\n            toast({ title: 'Exportacin PDF Exitosa', description: 'Se ha descargado el horario semanal.' });\n        } catch (error) {\n            console.error(\"Error exporting schedule to PDF:\", error);\n            toast({ title: 'Error al Exportar PDF', description: 'No se pudo generar el archivo PDF.', variant: 'destructive' });\n        }\n    };\n\n\n     const handleShareSchedule = async () => {\n        let textToCopy = \"\";\n        const locationName = locations.find(l => l.id === selectedLocationId)?.name || selectedLocationId;\n\n        if (viewMode === 'day') {\n            const dateStr = format(targetDate, 'EEEE dd \\'de\\' MMMM', { locale: es });\n            textToCopy = `*Horario ${locationName} - ${dateStr}*\\n\\n`;\n            const daySchedule = getScheduleForDate(targetDate);\n            let dayHasAssignments = false;\n\n            filteredDepartments.forEach(dept => {\n                const assignments = daySchedule.assignments[dept.id] || [];\n                if (assignments.length > 0) {\n                    dayHasAssignments = true;\n                    textToCopy += `*${dept.name}*\\n`;\n                    assignments.forEach(a => {\n                         const employeeName = a.employee?.name || `(ID: ${a.employee?.id || '??'})`;\n                        // Format times using helper\n                        textToCopy += `- ${employeeName}: ${formatTo12Hour(a.startTime)} - ${formatTo12Hour(a.endTime)}`;\n                        if (a.includeBreak && a.breakStartTime && a.breakEndTime) {\n                             textToCopy += ` (D: ${formatTo12Hour(a.breakStartTime)}-${formatTo12Hour(a.breakEndTime)})`;\n                        }\n                        textToCopy += \"\\n\";\n                    });\n                    textToCopy += \"\\n\"; // Add space between departments\n                }\n            });\n             if (!dayHasAssignments) {\n                 textToCopy += \"_No hay turnos asignados para este da._\\n\";\n             }\n\n        } else { // Week View\n            const weekStartFormatted = format(weekDates[0], 'dd MMM', { locale: es });\n            const weekEndFormatted = format(weekDates[6], 'dd MMM yyyy', { locale: es });\n            textToCopy = `*Horario ${locationName} - Semana ${weekStartFormatted} al ${weekEndFormatted}*\\n\\n`;\n            let weekHasAssignments = false;\n\n            weekDates.forEach(date => {\n                const dateStr = format(date, 'EEEE dd', { locale: es });\n                const daySchedule = getScheduleForDate(date);\n                let dayHasAssignments = false;\n                let dayText = `*${dateStr.charAt(0).toUpperCase() + dateStr.slice(1)}:*\\n`; // Capitalize day name\n\n                filteredDepartments.forEach(dept => {\n                     const assignments = daySchedule.assignments[dept.id] || [];\n                     if (assignments.length > 0) {\n                         dayHasAssignments = true;\n                         weekHasAssignments = true;\n                         dayText += `_${dept.name}_\\n`; // Italicize department name\n                         assignments.forEach(a => {\n                              const employeeName = a.employee?.name || `(ID: ${a.employee?.id || '??'})`;\n                              // Format times using helper\n                             dayText += `- ${employeeName}: ${formatTo12Hour(a.startTime)} - ${formatTo12Hour(a.endTime)}`;\n                            if (a.includeBreak && a.breakStartTime && a.breakEndTime) {\n                                // Format break times\n                                dayText += ` (D: ${formatTo12Hour(a.breakStartTime)}-${formatTo12Hour(a.breakEndTime)})`;\n                            }\n                             dayText += \"\\n\";\n                         });\n                     }\n                });\n\n                // Only add the day's text if it has assignments\n                if (dayHasAssignments) {\n                    textToCopy += dayText + \"\\n\"; // Add space between days\n                }\n            });\n             if (!weekHasAssignments) {\n                 textToCopy += \"_No hay turnos asignados para esta semana._\\n\";\n             }\n        }\n\n        // Prevent copying if no meaningful content generated\n        if (!textToCopy || textToCopy.trim() === `*Horario ${locationName} - Semana ${format(weekDates[0], 'dd MMM', { locale: es })} al ${format(weekDates[6], 'dd MMM yyyy', { locale: es })}*` || textToCopy.includes(\"_No hay turnos asignados\")) {\n            toast({ title: 'Sin Horario', description: 'No hay turnos asignados para compartir.', variant: 'default' });\n            return;\n        }\n\n\n        // Attempt to copy to clipboard\n        try {\n            await navigator.clipboard.writeText(textToCopy);\n            toast({ title: 'Horario Copiado', description: 'El horario ha sido copiado al portapapeles. Puedes pegarlo en WhatsApp.' });\n        } catch (err) {\n            console.error('Error al copiar al portapapeles:', err);\n            toast({ title: 'Error al Copiar', description: 'No se pudo copiar el horario.', variant: 'destructive' });\n        }\n     };\n\n     // Function to copy Employee ID\n     const handleCopyEmployeeId = async (employeeId: string) => {\n         try {\n             await navigator.clipboard.writeText(employeeId);\n             toast({ title: 'ID Copiado', description: `ID ${employeeId} copiado al portapapeles.` });\n         } catch (err) {\n             console.error('Error al copiar ID:', err);\n             toast({ title: 'Error al Copiar', description: 'No se pudo copiar el ID.', variant: 'destructive' });\n         }\n     };\n\n    // Ensure this return statement is inside the component function\n    return (\n        <main className=\"container mx-auto p-4 md:p-8 max-w-full\">\n             {/* Illustration in top-left corner */}\n              <div className=\"absolute top-0 left-0 -z-10 opacity-70 dark:opacity-30 pointer-events-none\" aria-hidden=\"true\">\n                  <Image\n                      src=\"https://i.postimg.cc/PJVW7XZG/teclado.png\"\n                      alt=\"Ilustracin de teclado y elementos de oficina\"\n                      width={400} // Increased width\n                      height={200} // Increased height proportionally\n                      className=\"object-contain\"\n                      priority\n                      data-ai-hint=\"keyboard glasses pens\"\n                  />\n             </div>\n\n\n             {/* Title */}\n              <div className=\"text-center mb-6 md:mb-8\">\n                 <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary via-foreground/80 to-primary\">\n                    Planificador de Horarios\n                 </h1>\n                 <p className=\"text-sm sm:text-base text-muted-foreground mt-1 md:mt-2\">Gestiona turnos, sedes y colaboradores</p>\n             </div>\n\n\n             {/* Controls Section - Top Bar - Hidden Card */}\n              <div className=\"bg-transparent border-none shadow-none p-0 mb-6 md:mb-8\">\n                  <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 flex-wrap p-0\">\n                     {/* Location Selector */}\n                     <div className=\"flex items-center gap-2 flex-shrink-0\">\n                         <Building className=\"h-5 w-5 text-primary flex-shrink-0\" />\n                         <LocationSelector\n                             locations={locations}\n                             selectedLocationId={selectedLocationId}\n                             onLocationChange={handleLocationChange}\n                         />\n                         {/* Settings Button Trigger */}\n                         <Dialog open={isConfigModalOpen} onOpenChange={setIsConfigModalOpen}>\n                             <DialogTrigger asChild>\n                                 <Button variant=\"ghost\" size=\"icon\" title=\"Configuracin\" className=\"flex-shrink-0\">\n                                     <Settings className=\"h-5 w-5\"/>\n                                 </Button>\n                             </DialogTrigger>\n                             {/* Configuration Modal Content */}\n                             <DialogContent className=\"max-w-4xl max-h-[90vh] flex flex-col\">\n                                 <DialogHeader>\n                                     <DialogTitle>Configuracin General</DialogTitle>\n                                     <DialogDescription>Gestiona sedes, departamentos y colaboradores.</DialogDescription>\n                                 </DialogHeader>\n                                 <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 py-4 flex-grow overflow-y-hidden\"> {/* Changed to overflow-y-hidden */}\n                                     {/* Locations Column */}\n                                     <div className=\"flex flex-col space-y-4 border-r md:border-r-0 md:pr-4 h-full\">\n                                         <div className=\"flex justify-between items-center mb-2 flex-shrink-0\">\n                                             <h4 className=\"font-semibold text-foreground flex items-center gap-1\"><Building className=\"h-4 w-4 text-muted-foreground\"/>Sedes ({locations.length})</h4>\n                                             <Button variant=\"outline\" size=\"sm\" onClick={() => handleOpenLocationModal(null)} title=\"Agregar Sede\">\n                                                 <Plus className=\"h-4 w-4\" />\n                                             </Button>\n                                         </div>\n                                         <ScrollArea className=\"h-[40vh]\"> {/* Fixed height */}\n                                             <ul className=\"space-y-2 text-sm pr-2\">\n                                                 {locations.map((loc) => (\n                                                     <li key={loc.id} className=\"flex items-center justify-between group py-1 border-b\">\n                                                         <span className={`truncate ${loc.id === selectedLocationId ? 'font-semibold text-primary' : 'text-muted-foreground'}`}>{loc.name}</span>\n                                                         <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1\">\n                                                             <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-muted-foreground hover:text-foreground\" onClick={() => handleOpenLocationModal(loc)} title=\"Editar Sede\"><Edit className=\"h-4 w-4\" /></Button>\n                                                             <AlertDialog>\n                                                                 <AlertDialogTrigger asChild>\n                                                                     <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-destructive hover:bg-destructive/10\" onClick={() => confirmDeleteItem('location', loc.id, loc.name)} title=\"Eliminar Sede\"><Trash2 className=\"h-4 w-4\" /></Button>\n                                                                 </AlertDialogTrigger>\n                                                                 {/* Delete Confirmation Content defined later */}\n                                                             </AlertDialog>\n                                                         </div>\n                                                     </li>\n                                                 ))}\n                                             </ul>\n                                         </ScrollArea>\n                                     </div>\n                                     {/* Departments Column */}\n                                     <div className=\"flex flex-col space-y-4 border-r md:border-r-0 md:pr-4 h-full\">\n                                         <div className=\"flex justify-between items-center mb-2 flex-shrink-0\">\n                                             <h4 className=\"font-semibold text-foreground flex items-center gap-1\"><Building2 className=\"h-4 w-4 text-muted-foreground\"/>Departamentos ({departments.length})</h4>\n                                             <Button variant=\"outline\" size=\"sm\" onClick={() => handleOpenDepartmentModal(null)} title=\"Agregar Departamento\">\n                                                 <Plus className=\"h-4 w-4\" />\n                                             </Button>\n                                         </div>\n                                         <ScrollArea className=\"h-[40vh]\"> {/* Fixed height */}\n                                             <ul className=\"space-y-2 text-sm pr-2\">\n                                                 {departments.map((dep) => (\n                                                     <li key={dep.id} className=\"flex items-center justify-between group py-1 border-b\">\n                                                         <span className=\"truncate text-muted-foreground flex items-center gap-1\">\n                                                             {dep.icon && <dep.icon className=\"h-3 w-3 mr-1 flex-shrink-0\" />}\n                                                             {dep.name} <span className=\"text-xs italic ml-1\">({locations.find(l => l.id === dep.locationId)?.name || 'Sede?'})</span>\n                                                         </span>\n                                                         <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1\">\n                                                             <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-muted-foreground hover:text-foreground\" onClick={() => handleOpenDepartmentModal(dep)} title=\"Editar Departamento\"><Edit className=\"h-4 w-4\" /></Button>\n                                                             <AlertDialog>\n                                                                 <AlertDialogTrigger asChild>\n                                                                     <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-destructive hover:bg-destructive/10\" onClick={() => confirmDeleteItem('department', dep.id, dep.name)} title=\"Eliminar Departamento\"><Trash2 className=\"h-4 w-4\" /></Button>\n                                                                 </AlertDialogTrigger>\n                                                                 {/* Delete Confirmation Content defined later */}\n                                                             </AlertDialog>\n                                                         </div>\n                                                     </li>\n                                                 ))}\n                                             </ul>\n                                         </ScrollArea>\n                                     </div>\n                                     {/* Employees Column */}\n                                     <div className=\"flex flex-col space-y-4 h-full\">\n                                         <div className=\"flex justify-between items-center mb-2 flex-shrink-0\">\n                                             <h4 className=\"font-semibold text-foreground flex items-center gap-1\"><Users className=\"h-4 w-4 text-muted-foreground\"/>Colaboradores ({employees.length})</h4>\n                                             <Button variant=\"outline\" size=\"sm\" onClick={() => handleOpenEmployeeModal(null)} title=\"Agregar Colaborador\">\n                                                 <Plus className=\"h-4 w-4\" />\n                                             </Button>\n                                         </div>\n                                         <ScrollArea className=\"h-[40vh]\"> {/* Fixed height */}\n                                             <ul className=\"space-y-2 text-sm pr-2\">\n                                                 {employees.map((emp) => (\n                                                     <li key={emp.id} className=\"flex items-center justify-between group py-1 border-b\">\n                                                         <span className=\"truncate text-muted-foreground\">{emp.name} <span className=\"text-xs italic\">(ID: {emp.id})</span></span>\n                                                         <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1\">\n                                                             {/* Copy ID Button */}\n                                                             <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-muted-foreground hover:text-foreground\" onClick={() => handleCopyEmployeeId(emp.id)} title=\"Copiar ID\"><Copy className=\"h-4 w-4\" /></Button>\n                                                             {/* Edit Button */}\n                                                             <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-muted-foreground hover:text-foreground\" onClick={() => handleOpenEmployeeModal(emp)} title=\"Editar Colaborador\"><Edit className=\"h-4 w-4\" /></Button>\n                                                             {/* Delete Button */}\n                                                             <AlertDialog>\n                                                                 <AlertDialogTrigger asChild>\n                                                                     <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-destructive hover:bg-destructive/10\" onClick={() => confirmDeleteItem('employee', emp.id, emp.name)} title=\"Eliminar Colaborador\"><Trash2 className=\"h-4 w-4\" /></Button>\n                                                                 </AlertDialogTrigger>\n                                                                 {/* Delete Confirmation Content defined later */}\n                                                             </AlertDialog>\n                                                         </div>\n                                                     </li>\n                                                 ))}\n                                             </ul>\n                                         </ScrollArea>\n                                     </div>\n                                 </div>\n                                 <DialogFooter>\n                                     <DialogClose asChild>\n                                         <Button variant=\"secondary\">Cerrar</Button>\n                                     </DialogClose>\n                                 </DialogFooter>\n                             </DialogContent>\n                         </Dialog>\n                     </div>\n\n                    {/* Day/Week Navigation */}\n                     <div className=\"flex items-center justify-center gap-2 flex-grow md:flex-grow-0\"> {/* Added flex-grow */}\n                        {viewMode === 'day' ? (\n                             <Popover>\n                                <PopoverTrigger asChild>\n                                    <Button\n                                        variant={'outline'}\n                                        className={cn(\n                                            'w-[200px] sm:w-[280px] justify-start text-left font-normal',\n                                            !targetDate && 'text-muted-foreground',\n                                            isHoliday(targetDate) && 'border-primary font-semibold text-primary border-2' // Highlight border if holiday\n                                        )}\n                                        disabled={isCheckingHoliday}\n                                    >\n                                        {isCheckingHoliday ? (\n                                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                                        ) : (\n                                            <CalendarModernIcon className=\"mr-2 h-4 w-4 text-primary\" />\n                                        )}\n                                        {targetDate ? format(targetDate, 'PPP', { locale: es }) : <span>Selecciona fecha</span>}\n                                        {isHoliday(targetDate) && !isCheckingHoliday && <span className=\"ml-auto text-xs font-semibold text-primary\">(Festivo)</span>}\n                                    </Button>\n                                </PopoverTrigger>\n                                <PopoverContent className=\"w-auto p-0\">\n                                    <Calendar\n                                        mode=\"single\"\n                                        selected={targetDate}\n                                        onSelect={(date) => { if (date) setTargetDate(date) }}\n                                        initialFocus\n                                        locale={es}\n                                        modifiers={{ holiday: (date) => isHoliday(date) }}\n                                        modifiersClassNames={{\n                                             holiday: 'text-primary font-medium border border-primary',\n                                        }}\n                                    />\n                                </PopoverContent>\n                             </Popover>\n                        ) : (\n                             <WeekNavigator\n                                currentDate={currentDate}\n                                onPreviousWeek={handlePreviousWeek}\n                                onNextWeek={handleNextWeek}\n                             />\n                        )}\n                    </div>\n\n                    {/* View Mode Toggle */}\n                     <div className=\"flex items-center justify-center gap-2 flex-shrink-0\"> {/* Added flex-shrink-0 */}\n                        <Select value={viewMode} onValueChange={(value) => setViewMode(value as 'day' | 'week')}>\n                            <SelectTrigger className=\"w-[120px]\">\n                                <SelectValue placeholder=\"Vista\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                                <SelectItem value=\"day\">Da</SelectItem>\n                                <SelectItem value=\"week\">Semana</SelectItem>\n                            </SelectContent>\n                        </Select>\n                    </div>\n                 </div>\n             </div>\n\n\n               {/* Main content grid */}\n               <DndWrapper>\n                   <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-4 items-start mb-6\">\n\n                        {/* Employee List - Render only on desktop */}\n                        {!isMobile && (\n                             <div className=\"lg:col-span-2 space-y-4\">\n                                 <EmployeeList employees={availableEmployees} />\n                             </div>\n                        )}\n\n\n                       <div className={cn(\n                           \"lg:col-span-10\", // Takes 10 columns on large screens\n                           isMobile && \"lg:col-span-12\", // Takes full width on mobile\n                           \"overflow-x-auto\" // Always allow horizontal scroll if needed\n                        )}>\n                           <ScheduleView\n                              departments={filteredDepartments}\n                              scheduleData={scheduleData}\n                              onRemoveShift={handleRemoveShift}\n                              viewMode={viewMode}\n                              weekDates={weekDates}\n                              currentDate={targetDate} // Use targetDate for day view consistency\n                              onAddShiftRequest={handleOpenEmployeeSelectionModal}\n                              onShiftClick={handleShiftClick}\n                              getScheduleForDate={getScheduleForDate}\n                              onDuplicateDay={handleDuplicateDay}\n                              onClearDay={handleConfirmClearDay}\n                              isHoliday={isHoliday}\n                              isMobile={isMobile}\n                              getNotesForDate={getNotesForDate}\n                              onOpenNotesModal={handleOpenNotesModalForDate} // Pass the new handler\n                              employees={employees} // Pass employees to ScheduleView\n                          />\n                       </div>\n                   </div>\n               </DndWrapper>\n\n                 {/* --- Bottom Actions Row --- */}\n                  <div className=\"flex flex-wrap justify-end gap-2 mt-6\">\n                     {/* Notes Button */}\n                     <Button onClick={() => setIsNotesModalOpen(true)} variant=\"outline\" className=\"hover:bg-primary hover:text-primary-foreground\">\n                         <NotebookPen className=\"mr-2 h-4 w-4\" /> Anotaciones\n                     </Button>\n\n                    <Button onClick={handleShareSchedule} variant=\"outline\" className=\"hover:bg-primary hover:text-primary-foreground\">\n                        <Share2 className=\"mr-2 h-4 w-4\" /> Compartir (Texto)\n                    </Button>\n                    <Button onClick={handleExportPDF} variant=\"outline\" className=\"hover:bg-red-600 hover:text-white\">\n                        <FileDown className=\"mr-2 h-4 w-4\" /> PDF\n                    </Button>\n                    {viewMode === 'week' && (\n                        <Button\n                            variant=\"outline\"\n                            onClick={handleDuplicateWeek}\n                            title=\"Duplicar semana completa a la siguiente\"\n                            className=\"hover:bg-primary hover:text-primary-foreground\"\n                        >\n                            <CopyPlus className=\"mr-2 h-4 w-4\" /> Duplicar Semana\n                        </Button>\n                    )}\n                    {/* Clear Week Button */}\n                     {viewMode === 'week' && (\n                        <AlertDialog>\n                           <AlertDialogTrigger asChild>\n                             <Button variant=\"outline\" size=\"sm\" className=\"hover:bg-destructive hover:text-destructive-foreground\">\n                                <CalendarX className=\"mr-2 h-4 w-4\" /> Limpiar Semana\n                             </Button>\n                           </AlertDialogTrigger>\n                           <AlertDialogContent>\n                             <AlertDialogHeader>\n                               <AlertDialogTitle>Limpiar Semana Completa?</AlertDialogTitle>\n                               <AlertDialogDescription>\n                                 Esta accin eliminar todos los turnos de la semana del{' '}\n                                 {format(startOfWeek(currentDate, { weekStartsOn: 1 }), 'dd/MM/yy', { locale: es })} al{' '}\n                                 {format(endOfWeek(currentDate, { weekStartsOn: 1 }), 'dd/MM/yy', { locale: es })}. No se puede deshacer.\n                               </AlertDialogDescription>\n                             </AlertDialogHeader>\n                             <AlertDialogFooter>\n                               <AlertDialogCancel>Cancelar</AlertDialogCancel>\n                               <AlertDialogAction className=\"bg-destructive hover:bg-destructive/90\" onClick={handleClearWeek}>Limpiar Semana</AlertDialogAction>\n                             </AlertDialogFooter>\n                           </AlertDialogContent>\n                        </AlertDialog>\n                     )}\n                    {/* Template Button */}\n                     <Dialog open={isTemplateModalOpen} onOpenChange={setIsTemplateModalOpen}>\n                         <DialogTrigger asChild>\n                             <Button variant=\"outline\" className=\"hover:bg-primary hover:text-primary-foreground\">\n                                 <List className=\"mr-2 h-4 w-4\" /> Templates\n                             </Button>\n                         </DialogTrigger>\n                         <DialogContent className=\"max-w-lg max-h-[80vh] flex flex-col\">\n                             <DialogHeader>\n                                 <DialogTitle>Gestionar Templates de Horario</DialogTitle>\n                                 <DialogDescription>\n                                     Guarda la vista actual como template o carga uno existente para la sede '{locations.find(l => l.id === selectedLocationId)?.name}' en vista {viewMode === 'day' ? 'Diaria' : 'Semanal'}.\n                                 </DialogDescription>\n                             </DialogHeader>\n\n                              {/* Save Template Section */}\n                              <div className=\"pt-4 border-t\">\n                                  <Label htmlFor=\"template-name\" className=\"mb-2 block\">Nombre del Nuevo Template:</Label>\n                                 <div className=\"flex gap-2\">\n                                      <Input\n                                          id=\"template-name\"\n                                          value={templateToSaveName}\n                                          onChange={(e) => setTemplateToSaveName(e.target.value)}\n                                          placeholder={`Template ${viewMode === 'day' ? 'Diario' : 'Semanal'} ${format(viewMode === 'day' ? targetDate : currentDate, 'dd-MMM', { locale: es })}`}\n                                          disabled={isSavingTemplate}\n                                      />\n                                      <Button onClick={() => handleSaveTemplate(templateToSaveName)} disabled={!templateToSaveName.trim() || isSavingTemplate} className=\"flex-shrink-0\">\n                                          {isSavingTemplate ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Save className=\"h-4 w-4\" />}\n                                           <span className=\"ml-2\">Guardar Actual</span>\n                                      </Button>\n                                 </div>\n                              </div>\n\n                               <Separator className=\"my-4\" />\n\n                              {/* Load/Delete Template Section */}\n                              <div className=\"flex-grow overflow-hidden\">\n                                  <h4 className=\"mb-3 font-medium\">Templates Guardados ({filteredTemplates.length} para esta vista):</h4>\n                                  {filteredTemplates.length > 0 ? (\n                                       <ScrollArea className=\"h-[250px] pr-4\">\n                                          <ul className=\"space-y-3\">\n                                             {filteredTemplates.map((template) => (\n                                                <li key={template.id} className=\"flex items-center justify-between p-3 border rounded-md bg-background hover:bg-accent\">\n                                                   <span className=\"font-medium truncate mr-2 flex flex-col\" title={template.name}>\n                                                      {template.name || `Template (${template.id.substring(0, 8)})`}\n                                                       <span className=\"text-xs text-muted-foreground\">\n                                                           ({template.type === 'week' ? 'Semanal' : 'Diario'})\n                                                           {template.createdAt instanceof Date ? ` - ${format(template.createdAt, 'dd/MM/yy', { locale: es })}` : ''}\n                                                       </span>\n                                                   </span>\n                                                   <div className=\"flex items-center gap-1 flex-shrink-0\">\n                                                      <Button variant=\"outline\" size=\"sm\" onClick={() => handleLoadTemplate(template.id)} title=\"Cargar Template\">\n                                                         <Upload className=\"h-4 w-4\" />\n                                                      </Button>\n                                                      <AlertDialog>\n                                                         <AlertDialogTrigger asChild>\n                                                            <Button variant=\"ghost\" size=\"sm\" className=\"text-destructive hover:text-destructive hover:bg-destructive/10\" onClick={() => handleConfirmDeleteTemplate(template.id)} title=\"Eliminar Template\">\n                                                               <Trash2 className=\"h-4 w-4\" />\n                                                            </Button>\n                                                         </AlertDialogTrigger>\n                                                          <AlertDialogContent> <AlertDialogHeader> <AlertDialogTitle>Eliminar Template?</AlertDialogTitle> <AlertDialogDescription> Esta accin eliminar permanentemente el template \"{savedTemplates.find(t => t.id === templateToDeleteId)?.name}\". No se puede deshacer. </AlertDialogDescription> </AlertDialogHeader> <AlertDialogFooter> <AlertDialogCancel onClick={() => setTemplateToDeleteId(null)}>Cancelar</AlertDialogCancel> <AlertDialogAction className=\"bg-destructive hover:bg-destructive/90\" onClick={() => templateToDeleteId && handleDeleteTemplate(templateToDeleteId)}> Eliminar Template </AlertDialogAction> </AlertDialogFooter> </AlertDialogContent>\n                                                      </AlertDialog>\n                                                   </div>\n                                                </li>\n                                             ))}\n                                          </ul>\n                                       </ScrollArea>\n                                  ) : (\n                                       <p className=\"text-sm text-muted-foreground italic text-center py-4\">\n                                           No hay templates guardados para esta sede y vista.\n                                       </p>\n                                  )}\n                              </div>\n\n                             <DialogFooter className=\"mt-4\">\n                                 <DialogClose asChild>\n                                     <Button variant=\"secondary\">Cerrar</Button>\n                                 </DialogClose>\n                             </DialogFooter>\n                         </DialogContent>\n                     </Dialog>\n                    <Button onClick={handleSaveSchedule} variant=\"default\" className=\"hover:bg-primary/90\">\n                        <Save className=\"mr-2 h-4 w-4\" /> Guardar Horario\n                    </Button>\n                </div>\n\n\n\n            {/* Editable Notes Section */}\n             <Card className=\"mt-8 bg-transparent border-none shadow-none p-0\"> {/* Removed card styling */}\n                 <CardHeader className=\"px-0 pt-0 pb-2\">\n                     <CardTitle className=\"text-lg font-semibold text-foreground mb-2\">Notas Generales</CardTitle>\n                     <CardDescription className=\"text-sm text-muted-foreground\">\n                        Agrega notas importantes sobre horarios, eventos especiales o cualquier informacin relevante para la semana.\n                     </CardDescription>\n                 </CardHeader>\n                 <CardContent className=\"px-0 pb-0\">\n                    <Textarea\n                        value={notes}\n                        onChange={handleNotesChange}\n                        placeholder=\"Ej: Cierre anticipado el jueves por fumigacin...\"\n                        rows={4}\n                        className=\"w-full bg-card border border-border rounded-md shadow-sm\" // Added card-like styling to textarea\n                    />\n                 </CardContent>\n                 <CardFooter className=\"flex justify-end mt-4 px-0 pb-0\">\n                     <Button onClick={handleSaveNotes}>Guardar Notas</Button>\n                 </CardFooter>\n             </Card>\n\n             {/* --- Modals --- */}\n\n             {/* Schedule Notes Modal (for adding and general viewing) */}\n             <ScheduleNotesModal\n                 isOpen={isNotesModalOpen} // Controlled by isNotesModalOpen state\n                 onClose={() => { setIsNotesModalOpen(false); setNotesModalForDate(null); }} // Clear date context on close\n                 notes={scheduleNotes}\n                 employees={employees} // Pass employees for the dropdown\n                 onAddNote={addScheduleNote}\n                 onDeleteNote={(id) => setNoteToDeleteId(id)} // Trigger confirmation dialog\n                 initialDate={notesModalForDate || undefined} // Pass specific date if set\n                 // Pass context for filtering\n                 viewMode={viewMode}\n                 currentDate={currentDate}\n                 weekDates={weekDates}\n             />\n\n            {/* Location Modal */}\n             <Dialog open={isLocationModalOpen} onOpenChange={setIsLocationModalOpen}>\n                  <DialogContent>\n                      <DialogHeader>\n                           <DialogTitle>{editingLocation ? 'Editar Sede' : 'Agregar Sede'}</DialogTitle>\n                      </DialogHeader>\n                      <div className=\"space-y-4 py-4\">\n                          <Label htmlFor=\"location-name\">Nombre</Label>\n                          <Input id=\"location-name\" value={locationFormData.name} onChange={(e) => setLocationFormData({ name: e.target.value })} placeholder=\"Nombre de la Sede\" />\n                      </div>\n                      <DialogFooter>\n                         <DialogClose asChild>\n                           <Button variant=\"outline\">Cancelar</Button>\n                         </DialogClose>\n                          <Button onClick={handleSaveLocation}>Guardar</Button>\n                      </DialogFooter>\n                  </DialogContent>\n             </Dialog>\n\n             {/* Department Modal */}\n            <Dialog open={isDepartmentModalOpen} onOpenChange={setIsDepartmentModalOpen}>\n                 <DialogContent>\n                     <DialogHeader>\n                         <DialogTitle>{editingDepartment ? 'Editar Departamento' : 'Agregar Departamento'}</DialogTitle>\n                     </DialogHeader>\n                     <div className=\"space-y-4 py-4\">\n                          <div>\n                             <Label htmlFor=\"department-name\">Nombre</Label>\n                             <Input id=\"department-name\" value={departmentFormData.name} onChange={(e) => setDepartmentFormData(prev => ({ ...prev, name: e.target.value }))} placeholder=\"Nombre del Departamento\"/>\n                          </div>\n                         <div>\n                              <Label htmlFor=\"department-location\">Sede</Label>\n                              <Select value={departmentFormData.locationId} onValueChange={(value) => setDepartmentFormData(prev => ({ ...prev, locationId: value }))}>\n                                  <SelectTrigger id=\"department-location\">\n                                      <SelectValue placeholder=\"Selecciona sede\" />\n                                  </SelectTrigger>\n                                  <SelectContent>\n                                      {locations.map(loc => (\n                                          <SelectItem key={loc.id} value={loc.id}>{loc.name}</SelectItem>\n                                      ))}\n                                  </SelectContent>\n                              </Select>\n                         </div>\n                          {/* Icon Selector */}\n                          <div>\n                              <Label htmlFor=\"department-icon\">Icono (Opcional)</Label>\n                              <Select value={departmentFormData.iconName} onValueChange={(value) => setDepartmentFormData(prev => ({ ...prev, iconName: value }))}>\n                                  <SelectTrigger id=\"department-icon\">\n                                      <SelectValue placeholder=\"Selecciona icono\" />\n                                  </SelectTrigger>\n                                  <SelectContent>\n                                      {Object.keys(iconMap).map(iconKey => {\n                                          const IconComponent = iconMap[iconKey];\n                                          return (\n                                              <SelectItem key={iconKey} value={iconKey}>\n                                                  <span className=\"flex items-center gap-2\">\n                                                      <IconComponent className=\"h-4 w-4\" /> {iconKey}\n                                                  </span>\n                                              </SelectItem>\n                                          );\n                                      })}\n                                  </SelectContent>\n                              </Select>\n                         </div>\n                     </div>\n                     <DialogFooter>\n                          <DialogClose asChild>\n                            <Button variant=\"outline\">Cancelar</Button>\n                          </DialogClose>\n                         <Button onClick={handleSaveDepartment}>Guardar</Button>\n                     </DialogFooter>\n                 </DialogContent>\n            </Dialog>\n\n             {/* Employee Modal */}\n            <Dialog open={isEmployeeModalOpen} onOpenChange={setIsEmployeeModalOpen}>\n                <DialogContent>\n                    <DialogHeader>\n                        <DialogTitle>{editingEmployee ? 'Editar Colaborador' : 'Agregar Colaborador'}</DialogTitle>\n                    </DialogHeader>\n                     <div className=\"space-y-4 py-4\">\n                           <div>\n                               <Label htmlFor=\"employee-id\">ID Colaborador</Label>\n                               <Input\n                                   id=\"employee-id\"\n                                   value={employeeFormData.id}\n                                   onChange={(e) => setEmployeeFormData(prev => ({ ...prev, id: e.target.value }))}\n                                   placeholder=\"Ej: 101, CEDULA123\"\n                                   disabled={!!editingEmployee} // Disable ID field when editing\n                               />\n                               {!!editingEmployee && <p className=\"text-xs text-muted-foreground mt-1\">El ID no se puede cambiar al editar.</p>}\n                           </div>\n                          <div>\n                             <Label htmlFor=\"employee-name\">Nombre</Label>\n                             <Input id=\"employee-name\" value={employeeFormData.name} onChange={(e) => setEmployeeFormData(prev => ({ ...prev, name: e.target.value }))} placeholder=\"Nombre Completo\" />\n                          </div>\n                          <div>\n                               <Label htmlFor=\"employee-locations\">Sedes Asignadas</Label>\n                                {/* Use Dropdown Menu for multi-select */}\n                                <DropdownMenu>\n                                    <DropdownMenuTrigger asChild>\n                                        <Button variant=\"outline\" className=\"w-full justify-start\">\n                                            {employeeFormData.locationIds.length > 0\n                                                ? employeeFormData.locationIds\n                                                      .map(id => locations.find(l => l.id === id)?.name)\n                                                      .filter(Boolean) // Remove undefined if location not found\n                                                      .join(', ')\n                                                : 'Selecciona sedes'}\n                                            <ChevronsUpDown className=\"ml-auto h-4 w-4 opacity-50\"/>\n                                        </Button>\n                                    </DropdownMenuTrigger>\n                                    <DropdownMenuContent className=\"w-full\">\n                                        <DropdownMenuLabel>Selecciona Sedes</DropdownMenuLabel>\n                                        <DropdownMenuSeparator />\n                                        {locations.map(loc => (\n                                            <DropdownMenuCheckboxItem\n                                                key={loc.id}\n                                                checked={employeeFormData.locationIds.includes(loc.id)}\n                                                onCheckedChange={() => handleToggleEmployeeLocation(loc.id)}\n                                                // Prevent closing the menu on item selection\n                                                onSelect={(e) => e.preventDefault()}\n                                            >\n                                                {loc.name}\n                                            </DropdownMenuCheckboxItem>\n                                        ))}\n                                    </DropdownMenuContent>\n                                </DropdownMenu>\n                                {employeeFormData.locationIds.length === 0 && <p className=\"text-xs text-destructive mt-1\">Debes seleccionar al menos una sede.</p>}\n                           </div>\n                     </div>\n                    <DialogFooter>\n                         <DialogClose asChild>\n                            <Button variant=\"outline\">Cancelar</Button>\n                          </DialogClose>\n                        <Button onClick={handleSaveEmployee}>Guardar</Button>\n                    </DialogFooter>\n                </DialogContent>\n            </Dialog>\n\n\n             {/* Employee Selection Modal */}\n             <EmployeeSelectionModal\n                 isOpen={isEmployeeSelectionModalOpen}\n                 onClose={() => setIsEmployeeSelectionModalOpen(false)}\n                 employees={availableEmployees}\n                 onSelectEmployee={handleEmployeeSelectedForShift}\n                 departmentName={departments.find(d => d.id === shiftRequestContext?.departmentId)?.name || ''}\n                 date={shiftRequestContext?.date || new Date()}\n             />\n\n             {/* Shift Detail Modal */}\n             <ShiftDetailModal\n                 isOpen={isShiftModalOpen}\n                 onClose={() => {\n                     setIsShiftModalOpen(false);\n                     setSelectedEmployee(null);\n                     setShiftRequestContext(null);\n                     setEditingShift(null);\n                 }}\n                 onSave={handleAddOrUpdateShift}\n                 employeeName={selectedEmployee?.name || ''}\n                 departmentName={departments.find(d => d.id === shiftRequestContext?.departmentId)?.name || ''}\n                 initialDetails={editingShift?.assignment}\n                 isEditing={!!editingShift}\n             />\n\n             {/* Universal Delete Confirmation */}\n              <AlertDialog open={!!itemToDelete} onOpenChange={(open) => !open && setItemToDelete(null)}>\n                  <AlertDialogContent>\n                      <AlertDialogHeader>\n                          <AlertDialogTitle>Ests seguro?</AlertDialogTitle>\n                          <AlertDialogDescription>\n                              {itemToDelete?.type === 'location' && `Eliminar Sede \"${itemToDelete?.name}\"? Se eliminarn sus departamentos, los colaboradores asociados se desvincularn (si no tienen ms sedes) y se borrarn turnos relacionados. Esta accin no se puede deshacer.`}\n                              {itemToDelete?.type === 'department' && `Eliminar Departamento \"${itemToDelete?.name}\"? Se eliminarn los turnos asociados en horarios. Esta accin no se puede deshacer.`}\n                              {itemToDelete?.type === 'employee' && `Eliminar Colaborador \"${itemToDelete?.name}\"? Se eliminarn sus turnos asociados en horarios. Esta accin no se puede deshacer.`}\n                          </AlertDialogDescription>\n                      </AlertDialogHeader>\n                      <AlertDialogFooter>\n                          <AlertDialogCancel onClick={() => setItemToDelete(null)}>Cancelar</AlertDialogCancel>\n                          <AlertDialogAction className=\"bg-destructive hover:bg-destructive/90\" onClick={handleDeleteItem}>Eliminar</AlertDialogAction>\n                      </AlertDialogFooter>\n                  </AlertDialogContent>\n              </AlertDialog>\n\n\n            {/* Clear Day Confirmation */}\n            <AlertDialog open={!!clearingDate} onOpenChange={(open) => !open && setClearingDate(null)}>\n                 <AlertDialogContent>\n                     <AlertDialogHeader>\n                         <AlertDialogTitle>Limpiar Turnos del Da?</AlertDialogTitle>\n                         <AlertDialogDescription>\n                            Esta accin eliminar todos los turnos asignados para el{' '}\n                            <strong>{clearingDate ? format(clearingDate, 'PPP', { locale: es }) : ''}</strong>. No se puede deshacer.\n                         </AlertDialogDescription>\n                     </AlertDialogHeader>\n                     <AlertDialogFooter>\n                         <AlertDialogCancel onClick={() => setClearingDate(null)}>Cancelar</AlertDialogCancel>\n                         <AlertDialogAction className=\"bg-destructive hover:bg-destructive/90\" onClick={handleClearDay}>Limpiar Da</AlertDialogAction>\n                     </AlertDialogFooter>\n                 </AlertDialogContent>\n            </AlertDialog>\n\n            {/* Clear Week Confirmation */}\n             <AlertDialog open={clearingWeek} onOpenChange={setClearingWeek}>\n                 <AlertDialogContent>\n                     <AlertDialogHeader>\n                         <AlertDialogTitle>Limpiar Semana Completa?</AlertDialogTitle>\n                         <AlertDialogDescription>\n                            Esta accin eliminar todos los turnos de la semana del{' '}\n                            {format(startOfWeek(currentDate, { weekStartsOn: 1 }), 'dd/MM/yy', { locale: es })} al{' '}\n                            {format(endOfWeek(currentDate, { weekStartsOn: 1 }), 'dd/MM/yy', { locale: es })}. No se puede deshacer.\n                         </AlertDialogDescription>\n                     </AlertDialogHeader>\n                     <AlertDialogFooter>\n                         <AlertDialogCancel onClick={() => setClearingWeek(false)}>Cancelar</AlertDialogCancel>\n                         <AlertDialogAction className=\"bg-destructive hover:bg-destructive/90\" onClick={handleClearWeek}>Limpiar Semana</AlertDialogAction>\n                     </AlertDialogFooter>\n                 </AlertDialogContent>\n             </AlertDialog>\n\n            {/* Template Delete Confirmation Dialog */}\n             <AlertDialog open={!!templateToDeleteId} onOpenChange={(open) => !open && setTemplateToDeleteId(null)}>\n                 <AlertDialogContent>\n                     <AlertDialogHeader>\n                         <AlertDialogTitle>Eliminar Template?</AlertDialogTitle>\n                         <AlertDialogDescription>\n                             Esta accin eliminar permanentemente el template \"{savedTemplates.find(t => t.id === templateToDeleteId)?.name}\". No se puede deshacer.\n                         </AlertDialogDescription>\n                     </AlertDialogHeader>\n                     <AlertDialogFooter>\n                         <AlertDialogCancel onClick={() => setTemplateToDeleteId(null)}>Cancelar</AlertDialogCancel>\n                         <AlertDialogAction className=\"bg-destructive hover:bg-destructive/90\" onClick={() => templateToDeleteId && handleDeleteTemplate(templateToDeleteId)}>\n                             Eliminar Template\n                         </AlertDialogAction>\n                     </AlertDialogFooter>\n                 </AlertDialogContent>\n             </AlertDialog>\n\n             {/* Note Delete Confirmation Dialog */}\n             <AlertDialog open={!!noteToDeleteId} onOpenChange={(open) => !open && setNoteToDeleteId(null)}>\n                 <AlertDialogContent>\n                     <AlertDialogHeader>\n                         <AlertDialogTitle>Eliminar Anotacin?</AlertDialogTitle>\n                         <AlertDialogDescription>\n                             Ests seguro de que quieres eliminar esta anotacin? No se puede deshacer.\n                         </AlertDialogDescription>\n                     </AlertDialogHeader>\n                     <AlertDialogFooter>\n                         <AlertDialogCancel onClick={() => setNoteToDeleteId(null)}>Cancelar</AlertDialogCancel>\n                         <AlertDialogAction\n                             className=\"bg-destructive hover:bg-destructive/90\"\n                             onClick={() => noteToDeleteId && deleteScheduleNote(noteToDeleteId)}\n                         >\n                             Eliminar Anotacin\n                         </AlertDialogAction>\n                     </AlertDialogFooter>\n                 </AlertDialogContent>\n             </AlertDialog>\n\n\n        </main>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}